
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Étienne Rivard">
      
      
        <link rel="canonical" href="https://piratage.kerzo.ca/lecons/22_Programmer_application_securisee/">
      
      
        <link rel="prev" href="../21_Securiser_Apache/">
      
      
        <link rel="next" href="../23_Protection_Injection_SQL/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.32">
    
    
      
        <title>Programmer application sécurisée - Cours de piratage éthique</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#programmation-dapplications-securisees" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cours de piratage éthique" class="md-header__button md-logo" aria-label="Cours de piratage éthique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cours de piratage éthique
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Programmer application sécurisée
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cours de piratage éthique" class="md-nav__button md-logo" aria-label="Cours de piratage éthique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cours de piratage éthique
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Page principale
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../horaire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horaire
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Leçons
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Leçons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01b_Mots_de_passe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mots de passe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_Reconnaissance_passive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance passive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Reconnaissance_active/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance active
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_Ecoute_reseau/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Écoute du réseau
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_Gestion_de_risques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestion de risques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_Intro_Metasploit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction à Metasploit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_Strategies_sauvegarde/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stratégies de sauvegarde
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_Pare_feu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pare-feux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_Inventaire_Actifs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventaire d'actifs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19_Vulnerabilites_Web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vulnérabilités Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20_Injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Injections SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_Cryptographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cryptographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13_Penetration_reseau_sans_fils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pénétration de réseaux sans-fils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14_Tests_penetration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests de pénétration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17_Detection_intrusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Détection d'intrusion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18_Lois/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lois
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_Antivirus_et_PDF_malicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Antivirus et PDF malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_Hameconnage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hameçonnage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21_Securiser_Apache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sécuriser serveur Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Programmer application sécurisée
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Programmer application sécurisée
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#owasp-top-10" class="md-nav__link">
    <span class="md-ellipsis">
      OWASP Top 10
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monmur" class="md-nav__link">
    <span class="md-ellipsis">
      MonMur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MonMur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permier-jet-de-monmur" class="md-nav__link">
    <span class="md-ellipsis">
      Permier jet de MonMur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traitement-des-erreurs" class="md-nav__link">
    <span class="md-ellipsis">
      Traitement des erreurs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Traitement des erreurs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conditions-limites" class="md-nav__link">
    <span class="md-ellipsis">
      Conditions limites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mecanisme-de-traitement-des-erreurs" class="md-nav__link">
    <span class="md-ellipsis">
      Mécanisme de traitement des erreurs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#televersement-de-fichiers" class="md-nav__link">
    <span class="md-ellipsis">
      Téléversement de fichiers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lectures-supplementaires" class="md-nav__link">
    <span class="md-ellipsis">
      Lectures supplémentaires
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testez-vos-connaissances" class="md-nav__link">
    <span class="md-ellipsis">
      Testez vos connaissances
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23_Protection_Injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protection injection SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24_Chiffrement_et_donnees_sensibles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chiffrement et données sensibles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../99_CacherCodeMalicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cacher du code malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../99_Attaque_Uber/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attaque de Uber
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exercices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Exercices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/01_Exercices_Laboratoire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bâtir le laboratoire
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/02_Exercices_Reconnaissance_passive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance passive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/03_Reconnaissance_active/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnaissance active
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/04_Ecoute_reseau/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Écoute du réseau
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/05_Gestion_de_risques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestion du risque
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/06_Intro_Metasploit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro à Metasploit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/dossier_securite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dossier de sécurité
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/07_strategie_sauvegarde/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stratégie de sauvegarde
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/08_Pare_feu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pare-feux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_classification_actifs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classification d'actifs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/19_Vulnerabilites_Web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vulnérabilités Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/20_Injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Injections SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_Cryptographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cryptographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/13_Penetration_reseau_sans_fils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pénétration réseau sans-fils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/14_Tests_penetration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests de pénétration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/17_Detection_intrusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Détection d'intrusion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/18_Lois/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lois
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/09_PDF_Malicieux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDF Malicieux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/10_Hameconnage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hameçonnage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/21_Securiser_Apache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sécuriser serveur Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/22_Programmer_application_securisee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programmer application sécurisée
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/23_Proteger_injection_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protection injection SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercices/24_Chiffrement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chiffrement
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Outils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Outils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/cartographie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cartographie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Labo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Labo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Kali_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kali
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Metasploitable_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metasploitable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_WindowsXP_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows XP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Gogo_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gogo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_DunderMifflin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dundermifflin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_Snort_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snort
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/Installation_MonMur_VirtualBox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MonMur
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/capturer_trafic_virtualbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Capturer le trafic dans VirtualBox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../labo/kali_demarrer_bd_postgresql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Démarrer PostGreSQL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Évaluations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Évaluations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/evaluation_sommative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Évaluation sommative
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/examen_mi_session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examen mi-session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../evaluations/Hack_lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hack Lab
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#owasp-top-10" class="md-nav__link">
    <span class="md-ellipsis">
      OWASP Top 10
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monmur" class="md-nav__link">
    <span class="md-ellipsis">
      MonMur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MonMur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permier-jet-de-monmur" class="md-nav__link">
    <span class="md-ellipsis">
      Permier jet de MonMur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traitement-des-erreurs" class="md-nav__link">
    <span class="md-ellipsis">
      Traitement des erreurs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Traitement des erreurs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conditions-limites" class="md-nav__link">
    <span class="md-ellipsis">
      Conditions limites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mecanisme-de-traitement-des-erreurs" class="md-nav__link">
    <span class="md-ellipsis">
      Mécanisme de traitement des erreurs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#televersement-de-fichiers" class="md-nav__link">
    <span class="md-ellipsis">
      Téléversement de fichiers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lectures-supplementaires" class="md-nav__link">
    <span class="md-ellipsis">
      Lectures supplémentaires
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testez-vos-connaissances" class="md-nav__link">
    <span class="md-ellipsis">
      Testez vos connaissances
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="programmation-dapplications-securisees">Programmation d'applications sécurisées</h1>
<h2 id="owasp-top-10">OWASP Top 10</h2>
<table>
<thead>
<tr>
<th>Risk</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>A1:2017-Injection</td>
<td>Une faille de type injection, comme une injection SQL, une injection de commande système, ou une injection LDAP, se produit quand une donnée non fiable est envoyée à un interpréteur en tant qu'élément d'une commande ou d'une requête. Les données hostiles de l'attaquant peuvent duper l'interpréteur afin de l'amener à exécuter des commandes fortuites ou accéder à des données non autorisées.</td>
</tr>
<tr>
<td>A2:2017-Authentification de mauvaise qualité</td>
<td>Les fonctions applicatives liées à l'authentification et à la gestion des sessions sont souvent mal implémentées, ce qui permet aux attaquants de compromettre des mots de passe, des clés ou des jetons de session, ou encore d'exploiter d'autres failles d'implémentation pour usurper temporairement ou définitivement l'identité d'autres utilisateurs.</td>
</tr>
<tr>
<td>A3:2017-Exposition de données sensibles</td>
<td>Beaucoup d'applications web et d'APIs ne protègent pas correctement les données sensibles telles que les données bancaires, les données relatives aux soins de santé, les données personnelles d'identification. Les pirates peuvent alors voler ou modifier ces données mal protégées pour effectuer une usurpation d'identité, une fraude à la carte de crédit ou d'autres crimes. Les données sensibles méritent une protection supplémentaire tel un chiffrement statique ou en transit, ainsi que des précautions particulières lors de l'échange avec le navigateur.</td>
</tr>
<tr>
<td>A4:2017-XML External Entities (XXE)</td>
<td>De nombreux processeurs xml, anciens ou mal configurés, évaluent les références aux entités externes dans les documents XML. Les entités externes peuvent être utilisées pour divulguer des fichiers internes à l'aide du gestionnaire d'URI, pour faire des partages de fichier interne, pour faire de l'analyse interne de ports, pour exécuter du code à distance, pour faire des attaques par déni de service.</td>
</tr>
<tr>
<td>A5:2017-Violation de contrôle d'accès</td>
<td>Les restrictions sur les droits des utilisateurs  authentifiés sont souvent mal appliquées. Les attaquants peuvent exploiter ces failles pour accéder à des fonctionnalités et/ou des données non autorisées. Par exemple, accéder aux comptes d'autres utilisateurs, visualiser des fichiers sensibles, modifier les données d'autres utilisateurs, modifier les droits d'accès, etc.</td>
</tr>
<tr>
<td>A6:2017-Mauvaise configuration Sécurité</td>
<td>La mauvaise configuration de la sécurité est le problème le plus répandu. C'est généralement le résultat de configurations par défaut non sécurisées, de configurations incomplètes ou ad hoc, d'un stockage dans un cloud ouvert, d'en-têtes HTTP mal configurés et de messages d'erreur verbeux contenant des informations sensibles. Non seulement tous les systèmes d'exploitation, frameworks, bibliothèques et applications doivent être configurés de façon sécurisées, mais ils doivent également être corrigés et mis à jour en temps et en heure.</td>
</tr>
<tr>
<td>A7:2017-Cross-Site Scripting (XSS)</td>
<td>Les failles XSS se produisent chaque fois qu'une application inclut des données non fiables dans une nouvelle page Web sans les valider ou les échapper de façon appropriée, ou lorsqu'elle met à jour une page Web existante avec des données fournies par l'utilisateur à l'aide d'une API de navigateur permettant de créer du HTML ou du JavaScript. Le XSS permet aux attaquants d'exécuter des scripts dans le navigateur de la victime et ainsi de détourner des sessions utilisateurs, de défigurer des sites Web ou de rediriger l'utilisateur vers des sites malveillants.</td>
</tr>
<tr>
<td>A8:2017-Désérialisation non sécurisée</td>
<td>La désérialisation non sécurisée conduit souvent à l'exécution de code arbitraire à distance. Même si les failles de désérialisation n'entraînent pas l'exécution de code distant, elles peuvent être utilisées pour effectuer d'autres attaques, notamment des attaques par rejeu, des attaques par injection et des attaques par élévation de privilèges.</td>
</tr>
<tr>
<td>A9:2017-Utilisation de composants présentant des vulnérabilités connues</td>
<td>Les composants, tels que les bibliothèques, frameworks et autres modules logiciels, fonctionnent avec les mêmes privilèges que l'application. Si un composant vulnérable est exploité par une attaque, cela peut entraîner de graves pertes de données ou la compromission du serveur. Les applications et les API utilisant des composants dont les vulnérabilités sont connues peuvent compromettre leurs défenses et permettre diverses attaques et impacts.</td>
</tr>
<tr>
<td>A10:2017-Journalisation &amp; Surveillance insuffisantes</td>
<td>L'insuffisance de journalisation et de surveillance, couplée à une intégration avec la réponse aux incidents, inefficace ou absente, permet aux pirates d'attaquer des systèmes de façon plus avancée, de maintenir la persistance, de basculer vers d'autres systèmes, et de falsifier, extraire ou détruire des données. La plupart des études de failles montrent que le temps nécessaire pour détecter une faille est supérieur à 200 jours. Généralement, cette faille est détectée par des parties externes plutôt que par une surveillance ou des processus internes.</td>
</tr>
</tbody>
</table>
<p>À partir du cours d'aujourd'hui, nous allons prendre une application simple codée en PHP qui est insécure. À chaque cours, nous allons modifier l'application pour la rendre plus sécuritaire.  </p>
<h2 id="monmur">MonMur</h2>
<p>MonMur est une application qui permet à vos amis d'écrire des petits mots sur votre site Web. À la fin du cours, MonMur aura les fonctionnalités suivantes :  </p>
<ul>
<li>Permettre d'écrire de manière anonyme</li>
<li>Permettre de créer un compte pour voir et modifier les petits mots écrits auparavant  </li>
<li>Permettre à des administrateurs de visualiser les comptes utilisateurs, les supprimer et modérer les commentaires  </li>
</ul>
<h3 id="permier-jet-de-monmur">Permier jet de MonMur</h3>
<div class="highlight"><pre><span></span><code>&amp;lt;?php
// database.php sert à interagir avec la base de données
require_once(&#39;database.php&#39;);
require_once(&#39;commun.php&#39;);

session_start();

$erreur = &#39;&#39;;
$commentaire = &#39;&#39;;

// Traiter l&#39;image, s&#39;il y a lieu
traiterImage($nom_image, $erreur);

// Ajouter le commentaire à la base de données sauf s&#39;il y a une erreur
if(isset($_POST[&#39;commentaire&#39;])) {
  if($_POST[&#39;commentaire&#39;] &amp;&amp; $_POST[&#39;commentaire&#39;] != &#39;&#39;) {
    $commentaire = $_POST[&#39;commentaire&#39;];
    enregistrerCommentaire($commentaire, $nom_image, utilisateurCourant());
    retourAuMur();
    exit();
  } else {
    $erreur = &#39;Le commentaire est invalide. Veuillez réessayer.&#39;;
  }
}

// Dessiner l&#39;interface utilisateur
$html = debutHtml()
 . formulaireCommentaire(&quot;monmur.php&quot;, $commentaire, 0, $erreur)
 . afficherCommentaires()
 . finHtml();

print $html;

function afficherCommentaires(){

  $resultats = listeCommentaires();

  $monmur = &#39;&#39;;

  while($ligne = $resultats-&gt;fetch_assoc()){
    $commentaire = trim($ligne[&quot;commentaire&quot;]);
    // Remplacer les retour de chariot par l&#39;équivalent html
    $commentaire = str_replace(&quot;\n&quot;, &#39;&amp;lt;br/&gt;&#39;, $commentaire);
    $commentaire_id = $ligne[&quot;commentaire_id&quot;];
    $image = $ligne[&quot;image&quot;];
    $code_utilisateur = trim($ligne[&quot;codeutilisateur&quot;]);

    $monmur .= &lt;&lt;&lt;fin
    &amp;lt;div class=&quot;commentaire&quot;&gt;
      &amp;lt;div class=&quot;commentaire_entete&quot;&gt;
        &amp;lt;div class=&quot;utilisateur&quot;&gt;{$code_utilisateur}&amp;lt;/div&gt;
        &amp;lt;div class=&quot;commentaire_id&quot;&gt;{$commentaire_id}&amp;lt;/div&gt;
      &amp;lt;/div&gt;
      &amp;lt;div class=&quot;commentaire_texte&quot;&gt;{$commentaire}&amp;lt;/div&gt;
    fin;

    if(!empty($image)) {
      $monmur .= &quot;&amp;lt;img src=&#39;/images/{$image}&#39;/&gt;&quot;;
    }

    // Afficher les actions seulement si c&#39;est l&#39;utilisateur qui est l&#39;auteur
    if($code_utilisateur == utilisateurCourant() &amp;&amp; utilisateurCourant() != ANON) {
      $monmur .= &lt;&lt;&lt;fin
      &amp;lt;div class=&quot;commentaire_pied&quot;&gt;
        &amp;lt;div class=&quot;commentaire_action&quot;&gt;
          &amp;lt;a href=&quot;modifier.php?id={$commentaire_id}&quot;&gt;Modifier&amp;lt;/a&gt;
        &amp;lt;/div&gt;
        &amp;lt;div class=&quot;commentaire_action&quot;&gt;
          &amp;lt;a href=&quot;javascript:ConfirmerSupression({$commentaire_id})&quot;&gt;Supprimer&amp;lt;/a&gt;
        &amp;lt;/div&gt;
      &amp;lt;/div&gt;
      fin;
    }

    $monmur .= &quot;&amp;lt;/div&gt;&quot;;
  }

  return $monmur;
}
?&gt;
</code></pre></div>
<h2 id="traitement-des-erreurs">Traitement des erreurs</h2>
<p>Le bon traitement des erreurs dans votre code est essentiel pour :  </p>
<ul>
<li>Que l'utilisateur ne pense pas qu'il a brisé votre site Web dès qu'une erreur survient  </li>
<li>Les pirates utilisent le contenu des erreurs brutes comme source d'information</li>
</ul>
<h3 id="conditions-limites">Conditions limites</h3>
<p>Un aspect important pour éviter les erreurs est de se prévenir contre ce que l'utilisateur peut saisir dans notre page qui ne devrait pas y être.  </p>
<p>Exemples de conditions limites :<br />
- Entrée vide<br />
- Caractères de contrôle<br />
- Caractères non-alphanumériques<br />
- Entrée excessivement grande<br />
- Données binaires<br />
- Entrée dans une autre page de code (UTF-8, ASCII, etc.)  <br />
- Injection SQL<br />
- Injection de code<br />
- XSS   </p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>La règle d'or lors de l'écriture des conditions limites est de refuser tout ce qui est suspicieux.  </p>
</div>
<h3 id="mecanisme-de-traitement-des-erreurs">Mécanisme de traitement des erreurs</h3>
<p>Pour s'assurer que toutes les entrées à votre application Web aient la même gestion d'erreurs, il est recommandé de bâtir un mécanisme de traitement des erreurs. Ce mécanisme sera utilisé à travers l'application.  Deux raisons :  </p>
<ul>
<li>Ça évite des oublis  </li>
<li>C'est consistant  </li>
</ul>
<p>Dans votre application, certains choix devrons être faits. Est-ce que l'application devrait accepter le code HTML dans les commentaires?  D'un côté, ce peut être intéressant pour les utilisateurs de mettre en <strong>gras</strong> son commentaire, mais accepter le HTML ouvre la porte aux pirates.  </p>
<p>Pour enlever le code HTML d'une entrée :  </p>
<div class="highlight"><pre><span></span><code>$texte_a_nettoyer = &quot;Tu es &amp;lt;em&gt;le&amp;lt;/em&gt; meilleur!&quot;;
$texte_propre = strip_tags($texte_a_nettoyer);
</code></pre></div>
<p>$texte_propre aura la valeur "Tu es le meilleur!".</p>
<p>Au lieu de permettre le HTML pour formater les commentaires, il est possible d'utiliser un autre langage tel que Markdown. Il y a un module PHP qui aide pour ça :  </p>
<p><a href="https://github.com/erusev/parsedown">ParseDown sur GitHub</a>  </p>
<div class="highlight"><pre><span></span><code>$Parsedown = new Parsedown();

$Parsedown-&gt;setSafeMode(true);

$commentaire = $Parsedown-&gt;text($ligne[&quot;commentaire&quot;]);
</code></pre></div>
<p>Si c'est important pour vous de permettre le HTML, privilégiez l'utilisation d'un module tel que celui-ci :  </p>
<p><a href="http://htmlpurifier.org/">HTML purifier</a>  </p>
<p>Testons MonMur :  </p>
<p>Caractères de contrôle :<br />
<div class="highlight"><pre><span></span><code>&quot;
</code></pre></div></p>
<p>Comment le corriger :
<div class="highlight"><pre><span></span><code>$commentaire = addslashes($commentaire);
</code></pre></div></p>
<p>Commentaire trop long :<br />
<div class="highlight"><pre><span></span><code>Da Da, ooooh  
Well, my friends, the time has come  
(To) raise the roof and have some fun  
Throw away the work to be done  
Let the music play on...(Play on, play on, play on.)  
Everybody sing, everybody dance  
Lose yourself in wild romance  
We&#39;re going to Party, Karamu, Fiesta, forever  
Come on and sing along!  
We&#39;re going to Party, Karamu, Fiesta, forever  
Come on and sing along!  

All night long (all night), All night (all night)  
All night long (all night), All night (all night)  
All night long (all night), All night (all night)  
All night long! (all night), Ooh, yeah (all night)  

People dancing all in the street  
See the rhythm all in their feet  
Life is good, wild and sweet  
Let the music play on...(Play on, play on, play on...)  
Feel it in your heart and feel it in your soul  
Let the music take control  
We&#39;re going to Party, Liming, Fiesta, forever  
Come on and sing along  
We&#39;re going to Party, Liming, Fiesta, forever  
Come on and sing my song!  

All night long (all night), oooh, (all night)  
All night long (all night), yeaz, (all night)  
All night long (all night), yeah, (all night)  
All night long (all night)...(all night)  

Yeah, once you get started you can&#39;t sit down  
Come join the fun, it&#39;s a merry-go-round  
Everyone&#39;s dancing their troubles away  
Come join our party, See how we play!  

[Chant}  
Tam bo li de say de moi ya  
Hey Jambo Jumbo  
Way to parti o we goin&#39;  
Oh, jambali  
Tam bo li de say de moi ya  
Yeah, Jambo, jumbo  

Oh, O, O, O, yes  
We&#39;re going to have a party! (Yeah... ugh)  

All night long (all night), All night, (all night)  
All night long (all night), All night, (all night)  
All night long (all night), All night, (all night)  
All night long (all night)...(ugh)  

We&#39;re going to Party, Kalamu, Fiesta, forever  
Come on and sing along!  
We&#39;re going to Party, Kalamu, Fiesta, forever  
Come on and sing my song!  

All night long (all night), All night, (all night)  
All night long (all night), All night, (all night)  
All night long (all night), All night, (all night)  
All night long (all night)...(ugh)  

All night, (all night), All night, (all night),  
All night, (all night), All night, (all night),  
All night, (all night), All night, (all night),  
All night, (all night), Ugh, (all night),  

Everyone you meet (all night)  
They&#39;re jamming in the street (all night)  
All night long! (All night)  
Yeah, I said, (All night)  
Everyone you meet (All night)  
They&#39;re jamming in the street (All night)  
All night long! (All night)  
Feel good! Feel good! (All night)  
(All night to fade)  
</code></pre></div></p>
<p><a href="https://youtu.be/HZb6oz0ANyA">All Night long - Rhett and Link</a>  </p>
<p>Comment corriger :  </p>
<p>Deux choix :  </p>
<p>Couper le commentaire à la longueur maximale du champ de la base de données :<br />
<div class="highlight"><pre><span></span><code>$commentaire = substr($commentaire, 0, 1000);
</code></pre></div></p>
<p>OU  </p>
<p>Afficher un message d'erreur que le commentaire est trop long :<br />
<div class="highlight"><pre><span></span><code>if(mb_strlen($_POST[&#39;commentaire&#39;]) &lt;= 1000) {
  $commentaire = $_POST[&#39;commentaire&#39;];
  enregistrerCommentaire($commentaire, $nom_image, utilisateurCourant());
  retourAuMur();
  exit();
} else {
    $erreur = &#39;Le commentaire est trop long. Veuillez réessayer.&#39;;
}
</code></pre></div></p>
<p>XSS :  </p>
<div class="highlight"><pre><span></span><code>&amp;lt;script&gt;alert(&#39;Doh!&#39;)&amp;lt;/script&gt;
</code></pre></div>
<p>Comment corriger :  </p>
<ul>
<li>En enlevant les tags html complètement  </li>
<li>En utilisant un module qui transforme le commentaire à l'affichage (voir ParseDown)  </li>
<li>En utilisant un module qui fait du ménage sélectif (voir HTML purifier)  </li>
</ul>
<h2 id="televersement-de-fichiers">Téléversement de fichiers</h2>
<p>L'application MonMur permet de téléverser des images pour les commentaires. Un pirate peut abuser de cette fonctionnalité pour injecter du code PHP dans le serveur pour en prendre possession.</p>
<p>Téléversons un fichier nommé <strong>liste.php</strong> :  </p>
<div class="highlight"><pre><span></span><code>&amp;lt;html&gt;&amp;lt;body&gt;
&amp;lt;?php echo str_replace(&quot;\n&quot;, &#39;&amp;lt;br/&gt;&#39;,shell_exec(&quot;ls /etc/&quot;));?&gt;
&amp;lt;/body&gt;&amp;lt;/html&gt;
</code></pre></div>
<p>MonMur copie les images dans le répertoire <code>/images</code>.  Donc, on peut maintenant exécuter le code dans la barre d'adresse : <code>http://192.168.2.222/images/liste.php</code>  </p>
<div class="admonition figure">
<p class="admonition-title">Résultat de liste.php</p>
<p><img alt="22-resultats-liste-php" src="../../images/2020/08/22-resultats-liste-php.png" />  </p>
</div>
<p>Il faut donc limiter les formats de fichier à accepter.  </p>
<p>Commençons par interdire les fichiers avec l'extension <strong>.php</strong> :  </p>
<div class="highlight"><pre><span></span><code>if (substr($image_cible,-3) == &#39;php&#39;) {
  $nom_image = &#39;&#39;;
  $erreur = &#39;Ceci n\&#39;est pas une image!&#39;;
  return 0;
}
</code></pre></div>
<p>On ne peut plus téléverser <strong>liste.php</strong>. Utilisons le bon vieux truc de la double extension et renommons le fichier <code>liste.php.jpg</code>.  </p>
<p>Le logiciel accepte sans problème le fichier qui peut être exécuté comme suit :<br />
<code>http://192.168.2.222/images/liste.php.jpg</code>  </p>
<p>La magie de ceci est une configuration du serveur qui permet d'exécuter tout script qui a la mention php dans son nom :  </p>
<div class="highlight"><pre><span></span><code>&amp;lt;FilesMatch &quot;.+\.ph(ar|p|tml)&quot;&amp;gt;
    SetHandler application/x-httpd-php
&amp;lt;/FilesMatch&amp;gt;
&amp;lt;FilesMatch &quot;.+\.phps&quot;&gt;
    SetHandler application/x-httpd-php-source
    # Deny access to raw php sources by default
    # To re-enable it&#39;s recommended to enable access to the files
    # only in specific virtual host or directory
    Require all denied
&amp;lt;/FilesMatch&gt;
# Deny access to files without filename (e.g. &#39;.php&#39;)
&amp;lt;FilesMatch &quot;^\.ph(ar|p|ps|tml)&quot;&gt;
    Require all denied
&amp;lt;/FilesMatch&gt;
</code></pre></div>
<p>Corrigeons la configuration (le <strong>$</strong> à la fin du regex indique que c'est à la fin du nom du fichier, donc .php accepté, .php.jpg ne l'est pas.):  </p>
<div class="highlight"><pre><span></span><code>&amp;lt;FilesMatch &quot;.+\.ph(ar|p|tml$)&quot;&gt;
    SetHandler application/x-httpd-php
&amp;lt;/FilesMatch&gt;
&amp;lt;FilesMatch &quot;.+\.phps$&quot;&gt;
    SetHandler application/x-httpd-php-source
    # Deny access to raw php sources by default
    # To re-enable it&#39;s recommended to enable access to the files
    # only in specific virtual host or directory
    Require all denied
&amp;lt;/FilesMatch&gt;
# Deny access to files without filename (e.g. &#39;.php&#39;)
&amp;lt;FilesMatch &quot;^\.ph(ar|p|ps|tml)$&quot;&gt;
    Require all denied
&amp;lt;/FilesMatch&gt;
</code></pre></div>
<h2 id="lectures-supplementaires">Lectures supplémentaires</h2>
<p><a href="https://www.markdownguide.org/">Documentation de MarkDown</a><br />
<a href="https://www.hackingarticles.in/comprehensive-guide-on-unrestricted-file-upload/">Pirater les fichiers téléversés</a><br />
<a href="https://owasp.org/www-project-top-ten/">OWASP_Top_Ten</a></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Prenez quelques minutes pour faire votre <a href="../../outils/cartographie/">cartographie</a> de la leçon d'aujourd'hui!   </p>
</div>
<h2 id="testez-vos-connaissances">Testez vos connaissances</h2>
<p><a href="https://forms.office.com/r/WQ3z1mgvdJ">Petit quiz sur la programmation sécurisée</a>  </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.471ce7a9.min.js"></script>
      
        <script src="../../javascript/linktarget.js"></script>
      
        <script src="../../javascript/addTranslations.js"></script>
      
    
  </body>
</html>